/*
    v=1.6.0 keys=noop,malloc,toDebugStr,logPrefix,log,logDebug,logWarn,logError,test,userAgent,genUID,genSID,genIID,objClone,objExtend,objKeys,objForIn,objToQueryStr,arrForEach,arrMap,arrFilter,arrFind,arrFindIndex,arrRemove,arrFirst,arrLast,arrOrderBy,arrHas,arrUnique,strPadStart,strPadEnd,strHyphenize,strFormat,strHTML,strStripHTML,strToHTMLText,strStripWhitespaces,strRemoveDiacritics,strSlug,strReplaceBetween,strReplaceCharAt,strTrim,strReverse,strHas,strUntil,strFromUntil,strReverseUntil,strReverseFromUntil,strMatchLen,strToQueryObj,numToKeyType,Error,ErrorBuilder,SETSCHEMA,SCHEMA,SETMODULE,MODULE,procSerial,H,browserSupportsEvent,ajax,domReady,domIsEl,domMatches,domFind,domHasClass,domAddClass,domRemoveClass,domToggleClass,domVal,domAttr,domData,domHTML,domText,domParent,domChildren,domSiblings,domPrev,domPrevAll,domNext,domNextAll,domStyle,domFadeIn,domFadeOut,domFadeTo,domFadeToggle,domOn,domOff,domTriggerNativeEvent,domTriggerEvent,domAppend,domPrepend,domRemove,domScrollTo,SETROUTE0,ROUTE0,Controller0,ls,Watcher,SETROUTE1,ROUTE1,Controller1,SERVER node compile
*/
var U = {};
U.noop = function(){};
U.malloc = function(prefix){if(!U.__cache){U.__cache={};}if(!U.__cache[prefix]){U.__cache[prefix]={};}var obj=U.__cache[prefix];return function(k,v){if(typeof(k)==='object'&&v===undefined){obj=k;return;}if(k===undefined&&v===undefined){return obj;}if(typeof(k)!=='string'){throw new Error('invalidParameter');}if(v===undefined){return obj[k];}else{obj[k]=v;}};};
U.toDebugStr = function(){var str='';for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){if(typeof(arg)==='object'||Array.isArray(arg)){if(Array.isArray(arg)){str+='Array('+arg.length+'): \n';}else if(typeof(arg)==='object'){str+='Object: \n';}str+=JSON.stringify(arg,null,'    ');str+='\n';}else{str+=(i>0?' ':'')+arg;}}else{str+=(i>0?' ':'')+arg;}}return str;};
U.logPrefix = function(str){var c=U.malloc('__LOG');c('prefix',str);};
U.log = function(){var cache=U.malloc('__LOG');var args=[].slice.call(arguments);if(cache('prefix')){args.unshift(cache('prefix')+':');}console.log.apply(null,args);};
U.logDebug = function(){var cache=U.malloc('__LOG');var args=[].slice.call(arguments);var log=U.toDebugStr.apply(this,args);var prefix=cache('prefix')?(cache('prefix')+': '):'';console.log(prefix+log);};
U.logWarn = function(){var cache=U.malloc('__LOG');var args=[].slice.call(arguments);if(cache('prefix')){args.unshift(cache('prefix')+':');}console.warn.apply(null,args);};
U.logError = function(){var cache=U.malloc('__LOG');var args=[].slice.call(arguments);if(cache('prefix')){args.unshift(cache('prefix')+':');}console.error.apply(null,args);};
U.test = function(k,fn,maxTimeout){if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}if(typeof(fn)!=='function'){throw new Error('invalidParameter');}function getEnv(){var Env=function(env,type){var self=this;self.env=env;self.type=type;self.fns={};if(self.type==='BROWSER'){self.env.onerror=function(msg,url,lin,col,err){var fn=self.fns['windowError'];if(fn){fn(err);return true;}};}else if(self.type==='NODE'){self.env.on('uncaughtException',function(err){var fn=self.fns['uncaughtProcessException'];if(fn){fn(err);}});self.env.on('unhandledRejection',function(err){var fn=self.fns['unhandledProcessRejection'];if(fn){fn(err);}});}};Env.prototype={isNode:function(){var self=this;return self.type==='NODE';},on:function(k,fn){var self=this;self.fns[k]=fn;}};if(typeof(process)==='object'){return new Env(process,'NODE');}else if(typeof(window)==='object'){return new Env(window,'BROWSER');}else{return null;}}function TestRunner(env){var self=this;self.env=env;self.tests=[];self.emitter=new EventEmitter();self.results=new TestResults();self.logger=new ResultLogger(env);self.terminated=false;self.finalizeTimeout=5000;self.findTest=function(k){for(var i=0;i<self.tests.length;i++){var v=self.tests[i];if(v&&v.id===k){return v;}}return null;};self.runNextTest=function(ms){var test=self.tests.shift();if(test){test.run();}else{if(ms>=self.finalizeTimeout){return self.finalize();}setTimeout(function(){ms=ms||0;self.runNextTest(ms+=500);},500);}};self.finalize=function(){var self=this;self.logger.logResults(self.results.results);};self.canRunNextTest=function(){return!self.terminated;};self.env.on('windowError',function(err){self.emitter.trigger('error',[err,'windowError']);});self.env.on('uncaughtProcessException',function(err){self.emitter.trigger('error',[err,'uncaughtException']);});self.env.on('unhandledProcessRejection',function(err){self.emitter.trigger('error',[err,'unhandledRejection']);});}TestRunner.prototype={addTest:function(k,fn,maxTimeout){var self=this;if(self.findTest(k)){throw new Error('testDuplicate "'+k+'"');}self.tests.push(new Test(k,fn,self.emitter,maxTimeout));},run:function(){var self=this;self.emitter.on('runNextTest',function(){if(self.canRunNextTest()){self.runNextTest();}});self.emitter.on('error',function(err){self.terminated=true;var msg=err[0]?(': '+err[0].stack):'';U.logError('TEST ERROR DETECTION [ENV:'+self.env.type+'] ('+err[1]+')'+msg);if(self.env.isNode()){self.env.env.exit(1);}});self.emitter.on('assert.result',function(result){self.results.push(result);});self.emitter.trigger('runNextTest');}};function Test(k,fn,emitter,maxTimeout){var self=this;self.id=k;self.fn=fn;self.emitter=emitter;self.assert=new Assert(k,emitter);self.maxTimeout=maxTimeout||20000;self.execTime=0;self.startInterval=function(){self.interval=setInterval(function(){self.execTime+=500;if(self.execTime>=self.maxTimeout){var err=new Error("Test '"+self.id+"' exceeded maxTimeout "+self.maxTimeout+'ms.');return self.emitter.trigger('error',[err,'timingError']);}},500);};self.runNextTest=function(){clearInterval(self.interval);self.assert.onTestEnd();self.emitter.trigger('runNextTest');};}Test.prototype={run:function(){var self=this;self.startInterval();try{self.fn(self.assert);}catch(error){return self.emitter.trigger('error',[error,'syncError']);}if(self.isAsync()){self.emitter.on('assert.asyncTestEnded',function(){self.runNextTest();});}else{self.runNextTest();}},isAsync:function(){var self=this;return self.assert.isAsync;}};function Assert(testName,emitter){var self=this;self.testName=testName;self.emitter=emitter;self.isAsync=false;self.callbackCounter=-1;self.expectedAssertions=0;self.assertionCounter=0;self.callback=function(){self.callbackCounter--;if(self.callbackCounter===0){self.emitter.trigger('assert.asyncTestEnded');}};self.onTestEnd=function(){if(self.expectedAssertions>0&&self.expectedAssertions!==self.assertionCounter){var b='Expected '+self.expectedAssertions;b+=self.expectedAssertions===1?' assertion':' assertions';b+=', but '+self.assertionCounter;b+=self.assertionCounter===1?' was run.':' were run.';self.emitter.trigger('assert.result',self.composeAssertionResult(b,undefined,null,new Error('assert.expect')));}};self.composeAssertionResult=function(msg,expected,actual,expectedValue,actualValue,err){return{testName:self.testName,msg:msg,expected:expected,actual:actual,expectedValue:expectedValue,actualValue:actualValue,err:err};};}Assert.prototype={ok:function(bool,actualValue,expectedValue,msg){var self=this;self.assertionCounter++;if(bool){return self.emitter.trigger('assert.result',self.composeAssertionResult(msg,true,true,expectedValue,actualValue,null));}else{return self.emitter.trigger('assert.result',self.composeAssertionResult(msg,true,false,expectedValue,actualValue,new Error('assert.ok')));}},async:function(expectedCallbacks){var self=this;if(isNaN(parseInt(expectedCallbacks))||expectedCallbacks<=0){throw new Error('invalidParameter');}self.isAsync=true;self.callbackCounter=expectedCallbacks;return self.callback;},expect:function(expectedAssertions){var self=this;if(isNaN(parseInt(expectedAssertions))||expectedAssertions<=0){throw new Error('invalidParameter');}self.expectedAssertions=expectedAssertions;}};function TestResults(){var self=this;self.results={};self.composeTestResult=function(results,passed){return{results:results,passed:passed};};}TestResults.prototype={push:function(result){var self=this;if(!self.results[result.testName]){self.results[result.testName]=self.composeTestResult([],true);}self.results[result.testName].results.push(result);if(result.err){self.results[result.testName].passed=false;}}};function ResultLogger(env){var self=this;self.logger=env.isNode()?new NodeLogger():new BrowserLogger();self.logger.initialLog();self.composeResultsForLogger=function(results,passed,failed){return{results:results,passed:passed,failed:failed};};self.prepareResults=function(results){var passed=0;var failed=0;for(var k in results){if(results.hasOwnProperty(k)){var v=results[k];if(v.passed){passed++;}else{failed++;}}}return self.composeResultsForLogger(results,passed,failed);};self.getAssertErrorsStr=function(results){var b='';for(var i=0;i<results.length;i++){var v=results[i];if(v.err){b+='  ---\n';b+="  message: '"+v.msg+"'\n";b+='  severity: failed\n';b+='  expected: '+v.expected+'\n';b+='  actual: '+v.actual+'\n';b+='  expectedValue: '+v.expectedValue+'\n';b+='  actualValue: '+v.actualValue+'\n';b+='  stack: '+v.err.stack+'\n';b+='  ...\n';}}return b;};}ResultLogger.prototype={logResults:function(results){var self=this;results=self.prepareResults(results);var i=0;for(var k in results.results){if(results.results.hasOwnProperty(k)){self.logger.logTestResult(i,k,results.results[k].results,self.getAssertErrorsStr);i++;}}self.logger.logFooter(results);}};function BrowserLogger(){var self=this;self.domReady=function(fn){var d=document;if(d.readyState==='complete'||d.readyState!=='loading'){fn();}else{d.addEventListener('DOMContentLoaded',fn);}};}BrowserLogger.prototype={initialLog:function(){var self=this;self.domReady(function(){var d=document;var el=d.getElementById('tests');if(!el){el=d.createElement('div');el.setAttribute('id','tests');el.style.fontFamily='"Courier New", Courier, monospace';el.style.fontSize=12+'px';}var line=d.createElement('div');line.textContent='TAP version 13';el.appendChild(line);var body=d.querySelector('body');if(body){body.appendChild(el);}});},logTestResult:function(i,testName,results,getAssertErrorsStr){var d=document;results=getAssertErrorsStr(results);var el=d.createElement('div');if(results){el.style.color='red';el.textContent='not ok '+(i+1)+' '+testName;d.getElementById('tests').appendChild(el);el=d.createElement('pre');el.style.margin='0 0 15px 0';el.style.fontFamily='inherit';el.textContent=results;d.getElementById('tests').appendChild(el);}else{el.textContent='ok '+(i+1)+' '+testName;d.getElementById('tests').appendChild(el);}},logFooter:function(results){var d=document;var el=d.createElement('div');el.textContent='1..'+(results.passed+results.failed);d.getElementById('tests').appendChild(el);el=d.createElement('div');el.textContent='# pass '+results.passed;d.getElementById('tests').appendChild(el);el=d.createElement('div');el.style.color='red';el.textContent='# fail '+results.failed;d.getElementById('tests').appendChild(el);}};function NodeLogger(){}NodeLogger.prototype={initialLog:function(){console.log('TAP version 13');},logTestResult:function(i,testName,results,getAssertErrorsStr){results=getAssertErrorsStr(results);if(results){console.log('\x1b[31mnot ok '+(i+1)+' '+testName+'\x1b[0m');console.log(results);}else{console.log('ok '+(i+1)+' '+testName);}},logFooter:function(results){console.log('1..'+(results.passed+results.failed));console.log('# pass '+results.passed);console.log('\x1b[31m# fail '+results.failed+'\x1b[0m');}};function EventEmitter(){this.fns={};}EventEmitter.prototype={on:function(k,fn){this.fns[k]=fn;},trigger:function(k,v){var fn=this.fns[k];if(fn){fn(v);}}};var cache=U.malloc('__TEST');var runner=cache('runner');var env=cache('env');if(env&&runner){runner.addTest(k,fn,maxTimeout);}else{env=getEnv();if(env){cache('env',env);runner=new TestRunner(env);runner.addTest(k,fn,maxTimeout);runner.run();cache('runner',runner);}else{throw new Error('unknownEnvironment');}}};
U.userAgent = function(str){if(str&&typeof(str)!=='string'){throw new Error('invalidParameter');}str=typeof(str)==='string'?(str||''):((window&&window.navigator&&window.navigator.userAgent)||'');function mapUserAgent(ua,arrays){var result={};var i=0;var matches=null;while(i<arrays.length&&!matches){var regex=arrays[i];var props=arrays[i+1];var j=0;var k=0;while(j<regex.length&&!matches){matches=regex[j++].exec(ua);if(Array.isArray(matches)&&matches.length>0){for(var p=0;p<props.length;p++){var match=matches[++k];var q=props[p];if(Array.isArray(q)&&q.length>0){if(q.length===2){if(isFN(q[1])){result[q[0]]=strToSnakeCase(q[1](match));}else{result[q[0]]=strToSnakeCase(q[1]);}}else if(q.length===3){if(isFN(q[1])&&!(q[1].exec&&q[1].test)){result[q[0]]=match?strToSnakeCase(q[1](match,q[2])):null;}else{result[q[0]]=match?strToSnakeCase(match.replace(q[1],q[2])):null;}}else if(q.length===4){result[q[0]]=(match&&isFN(q[3]))?strToSnakeCase(q[3](match.replace(q[1],q[2]))):null;}}else{result[q]=strToSnakeCase(match)||null;}}}}i+=2;}return result;function isFN(v){return(typeof(v)==='function');}function strToSnakeCase(str){if(typeof(str)==='string'){return str.replace(/\s+/g,'_').toUpperCase()||null;}return null;}}function correctBy(match,map){for(var k in map){if(Array.isArray(map[k])&&map[k].length>0){for(var i=0;i<map[k].length;i++){if(strHas(match,map[k][i])){return(k==='?')?null:k;}}}else if(strHas(match,map[k])){return(k==='?')?null:k;}}return match;function strHas(str1,str2){if(typeof(str1)==='string'){return str1.toLowerCase().indexOf(str2.toLowerCase())>=0;}return false;}}function strToLowerCase(str){return str.toLowerCase();}function strTrim(str){return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'');}var NAME='name';var VERSION='version';var VENDOR='vendor';var MODEL='model';var TYPE='type';var ARCHITECTURE='architecture';var CONSOLE='CONSOLE';var MOBILE='MOBILE';var TABLET='TABLET';var SMARTTV='SMART_TV';var WEARABLE='WEARABLE';var maps={browser:{oldSafari:{version:{'1.0':'/8','1.2':'/1','1.3':'/3','2.0':'/412','2.0.2':'/416','2.0.3':'/417','2.0.4':'/419','?':'/'}}},device:{amazon:{model:{'FIRE_PHONE':['SD','KF']}},sprint:{model:{'EVO_SHIFT_4G':'7373KT'},vendor:{'HTC':'APA','SPRINT':'Sprint'}}},os:{windows:{version:{'ME':'4.90','NT_3.11':'NT3.51','NT_4.0':'NT4.0','2000':'NT 5.0','XP':['NT 5.1','NT 5.2'],'VISTA':'NT 6.0','7':'NT 6.1','8':'NT 6.2','8.1':'NT 6.3','10':['NT 6.4','NT 10.0'],'RT':'ARM'}}}};var regexes={browser:[[/(opera\smini)\/([\w.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w.-]+)/i,/(opera).+version\/([\w.]+)/i,/(opera)[/\s]+([\w.]+)/i],[NAME,VERSION],[/(opios)[/\s]+([\w.]+)/i],[[NAME,'Opera Mini'],VERSION],[/\s(opr)\/([\w.]+)/i],[[NAME,'Opera'],VERSION],[/(kindle)\/([\w.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[/\s]?([\w.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[/\s]?([\w.]*)/i,/(?:ms|\()(ie)\s([\w.]+)/i,/(rekonq)\/([\w.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w.-]+)/i],[NAME,VERSION],[/(trident).+rv[:\s]([\w.]+).+like\sgecko/i],[[NAME,'IE'],VERSION],[/(edge)\/((\d+)?[\w.]+)/i],[NAME,VERSION],[/(yabrowser)\/([\w.]+)/i],[[NAME,'Yandex'],VERSION],[/(puffin)\/([\w.]+)/i],[[NAME,'Puffin'],VERSION],[/((?:[\s/])uc?\s?browser|(?:juc.+)ucweb)[/\s]?([\w.]+)/i],[[NAME,'UCBrowser'],VERSION],[/(comodo_dragon)\/([\w.]+)/i],[[NAME,/_/g,' '],VERSION],[/(micromessenger)\/([\w.]+)/i],[[NAME,'WeChat'],VERSION],[/(QQ)\/([\d.]+)/i],[NAME,VERSION],[/m?(qqbrowser)[/\s]?([\w.]+)/i],[NAME,VERSION],[/xiaomi\/miuibrowser\/([\w.]+)/i],[VERSION,[NAME,'MIUI Browser']],[/;fbav\/([\w.]+);/i],[VERSION,[NAME,'Facebook']],[/headlesschrome(?:\/([\w.]+)|\s)/i],[VERSION,[NAME,'Chrome Headless']],[/\swv\).+(chrome)\/([\w.]+)/i],[[NAME,/(.+)/,'$1 WebView'],VERSION],[/((?:oculus|samsung)browser)\/([\w.]+)/i],[[NAME,/(.+(?:g|us))(.+)/,'$1 $2'],VERSION],[/android.+version\/([\w.]+)\s+(?:mobile\s?safari|safari)*/i],[VERSION,[NAME,'Android Browser']],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w.]+)/i],[NAME,VERSION],[/(dolfin)\/([\w.]+)/i],[[NAME,'Dolphin'],VERSION],[/((?:android.+)crmo|crios)\/([\w.]+)/i],[[NAME,'Chrome'],VERSION],[/(coast)\/([\w.]+)/i],[[NAME,'Opera Coast'],VERSION],[/fxios\/([\w.-]+)/i],[VERSION,[NAME,'Firefox']],[/version\/([\w.]+).+?mobile\/\w+\s(safari)/i],[VERSION,[NAME,'Mobile Safari']],[/version\/([\w.]+).+?(mobile\s?safari|safari)/i],[VERSION,NAME],[/webkit.+?(gsa)\/([\w.]+).+?(mobile\s?safari|safari)(\/[\w.]+)/i],[[NAME,'GSA'],VERSION],[/webkit.+?(mobile\s?safari|safari)(\/[\w.]+)/i],[NAME,[VERSION,correctBy,maps.browser.oldSafari.version]],[/(konqueror)\/([\w.]+)/i,/(webkit|khtml)\/([\w.]+)/i],[NAME,VERSION],[/(navigator|netscape)\/([\w.-]+)/i],[[NAME,'Netscape'],VERSION],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[/\s]?([\w.+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w.-]+)/i,/(mozilla)\/([\w.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[/\s]?([\w.]+)/i,/(links)\s\(([\w.]+)/i,/(gobrowser)\/?([\w.]+)*/i,/(ice\s?browser)\/v?([\w._]+)/i,/(mosaic)[/\s]([\w.]+)/i],[NAME,VERSION]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;)]/i],[[ARCHITECTURE,'amd64']],[/(ia32(?=;))/i],[[ARCHITECTURE,strToLowerCase]],[/((?:i[346]|x)86)[;)]/i],[[ARCHITECTURE,'ia32']],[/windows\s(ce|mobile);\sppc;/i],[[ARCHITECTURE,'arm']],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[ARCHITECTURE,/ower/,'',strToLowerCase]],[/(sun4\w)[;)]/i],[[ARCHITECTURE,'sparc']],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[ARCHITECTURE,strToLowerCase]]],device:[[/\((ipad|playbook);[\w\s);-]+(rim|apple)/i],[MODEL,VENDOR,[TYPE,TABLET]],[/applecoremedia\/[\w.]+ \((ipad)/],[MODEL,[VENDOR,'Apple'],[TYPE,TABLET]],[/(apple\s{0,1}tv)/i],[[MODEL,'Apple TV'],[VENDOR,'Apple']],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(kf[A-z]+)\sbuild\/[\w.]+.*silk\//i],[MODEL,[VENDOR,'Amazon'],[TYPE,TABLET]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w.]+.*silk\//i],[[MODEL,correctBy,maps.device.amazon.model],[VENDOR,'Amazon'],[TYPE,MOBILE]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[MODEL,VENDOR,[TYPE,MOBILE]],[/\((ip[honed|\s\w*]+);/i],[MODEL,[VENDOR,'Apple'],[TYPE,MOBILE]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/\(bb10;\s(\w+)/i],[MODEL,[VENDOR,'BlackBerry'],[TYPE,MOBILE]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[MODEL,[VENDOR,'Asus'],[TYPE,TABLET]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[VENDOR,'Sony'],[MODEL,'Xperia Tablet'],[TYPE,TABLET]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[MODEL,[VENDOR,'Sony'],[TYPE,MOBILE]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[VENDOR,MODEL,[TYPE,CONSOLE]],[/android.+;\s(shield)\sbuild/i],[MODEL,[VENDOR,'Nvidia'],[TYPE,CONSOLE]],[/(playstation\s[34portablevi]+)/i],[MODEL,[VENDOR,'Sony'],[TYPE,CONSOLE]],[/(sprint\s(\w+))/i],[[VENDOR,correctBy,maps.device.sprint.vendor],[MODEL,correctBy,maps.device.sprint.model],[TYPE,MOBILE]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[VENDOR,[MODEL,/_/g,' '],[TYPE,MOBILE]],[/(nexus\s9)/i],[MODEL,[VENDOR,'HTC'],[TYPE,TABLET]],[/d\/huawei([\w\s-]+)[;)]/i,/(nexus\s6p)/i],[MODEL,[VENDOR,'Huawei'],[TYPE,MOBILE]],[/(microsoft);\s(lumia[\s\w]+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/[\s(;](xbox(?:\sone)?)[\s);]/i],[MODEL,[VENDOR,'Microsoft'],[TYPE,CONSOLE]],[/(kin\.[onetw]{3})/i],[[MODEL,/\./g,' '],[VENDOR,'Microsoft'],[TYPE,MOBILE]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[MODEL,[VENDOR,'Motorola'],[TYPE,MOBILE]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[MODEL,[VENDOR,'Motorola'],[TYPE,TABLET]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[VENDOR,strTrim],[MODEL,strTrim],[TYPE,SMARTTV]],[/hbbtv.+maple;(\d+)/i],[[MODEL,/^/,'SmartTV'],[VENDOR,'Samsung'],[TYPE,SMARTTV]],[/\(dtv[);].+(aquos)/i],[MODEL,[VENDOR,'Sharp'],[TYPE,SMARTTV]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[VENDOR,'Samsung'],MODEL,[TYPE,TABLET]],[/smart-tv.+(samsung)/i],[VENDOR,[TYPE,SMARTTV],MODEL],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[VENDOR,'Samsung'],MODEL,[TYPE,MOBILE]],[/sie-(\w+)*/i],[MODEL,[VENDOR,'Siemens'],[TYPE,MOBILE]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[VENDOR,'Nokia'],MODEL,[TYPE,MOBILE]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[MODEL,[VENDOR,'Acer'],[TYPE,TABLET]],[/android.+([vl]k-?\d{3})\s+build/i],[MODEL,[VENDOR,'LG'],[TYPE,TABLET]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[VENDOR,'LG'],MODEL,[TYPE,TABLET]],[/(lg) netcast\.tv/i],[VENDOR,MODEL,[TYPE,SMARTTV]],[/(nexus\s[45])/i,/lg[e;\s/-]+(\w+)*/i,/android.+lg(-?[\d\w]+)\s+build/i],[MODEL,[VENDOR,'LG'],[TYPE,MOBILE]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[MODEL,[VENDOR,'Lenovo'],[TYPE,TABLET]],[/linux;.+((jolla));/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/((pebble))app\/[\d.]+\s/i],[VENDOR,MODEL,[TYPE,WEARABLE]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/crkey/i],[[MODEL,'Chromecast'],[VENDOR,'Google']],[/android.+;\s(glass)\s\d/i],[MODEL,[VENDOR,'Google'],[TYPE,WEARABLE]],[/android.+;\s(pixel c)\s/i],[MODEL,[VENDOR,'Google'],[TYPE,TABLET]],[/android.+;\s(pixel xl|pixel)\s/i],[MODEL,[VENDOR,'Google'],[TYPE,MOBILE]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[MODEL,/_/g,' '],[VENDOR,'Xiaomi'],[TYPE,MOBILE]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[MODEL,/_/g,' '],[VENDOR,'Xiaomi'],[TYPE,TABLET]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[MODEL,[VENDOR,'Meizu'],[TYPE,TABLET]],[/android.+a000(1)\s+build/i],[MODEL,[VENDOR,'OnePlus'],[TYPE,MOBILE]],[/android.+[;/]\s*(RCT[\d\w]+)\s+build/i],[MODEL,[VENDOR,'RCA'],[TYPE,TABLET]],[/android.+[;/]\s*(Venue[\d\s]*)\s+build/i],[MODEL,[VENDOR,'Dell'],[TYPE,TABLET]],[/android.+[;/]\s*(Q[T|M][\d\w]+)\s+build/i],[MODEL,[VENDOR,'Verizon'],[TYPE,TABLET]],[/android.+[;/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[VENDOR,'Barnes & Noble'],MODEL,[TYPE,TABLET]],[/android.+[;/]\s+(TM\d{3}.*\b)\s+build/i],[MODEL,[VENDOR,'NuVision'],[TYPE,TABLET]],[/android.+[;/]\s*(zte)?.+(k\d{2})\s+build/i],[[VENDOR,'ZTE'],MODEL,[TYPE,TABLET]],[/android.+[;/]\s*(gen\d{3})\s+build.*49h/i],[MODEL,[VENDOR,'Swiss'],[TYPE,MOBILE]],[/android.+[;/]\s*(zur\d{3})\s+build/i],[MODEL,[VENDOR,'Swiss'],[TYPE,TABLET]],[/android.+[;/]\s*((Zeki)?TB.*\b)\s+build/i],[MODEL,[VENDOR,'Zeki'],[TYPE,TABLET]],[/(android).+[;/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;/]\s+(Dragon[-\s]+Touch\s+|DT)(.+)\s+build/i],[[VENDOR,'Dragon Touch'],MODEL,[TYPE,TABLET]],[/android.+[;/]\s*(NS-?.+)\s+build/i],[MODEL,[VENDOR,'Insignia'],[TYPE,TABLET]],[/android.+[;/]\s*((NX|Next)-?.+)\s+build/i],[MODEL,[VENDOR,'NextBook'],[TYPE,TABLET]],[/android.+[;/]\s*(Xtreme_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[VENDOR,'Voice'],MODEL,[TYPE,MOBILE]],[/android.+[;/]\s*(LVTEL-?)?(V1[12])\s+build/i],[[VENDOR,'LvTel'],MODEL,[TYPE,MOBILE]],[/android.+[;/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[MODEL,[VENDOR,'Envizen'],[TYPE,TABLET]],[/android.+[;/]\s*(Le[\s-]+Pan)[\s-]+(.*\b)\s+build/i],[VENDOR,MODEL,[TYPE,TABLET]],[/android.+[;/]\s*(Trio[\s-]*.*)\s+build/i],[MODEL,[VENDOR,'MachSpeed'],[TYPE,TABLET]],[/android.+[;/]\s*(Trinity)[-\s]*(T\d{3})\s+build/i],[VENDOR,MODEL,[TYPE,TABLET]],[/android.+[;/]\s*TU_(1491)\s+build/i],[MODEL,[VENDOR,'Rotor'],[TYPE,TABLET]],[/android.+(KS(.+))\s+build/i],[MODEL,[VENDOR,'Amazon'],[TYPE,TABLET]],[/android.+(Gigaset)[\s-]+(Q.+)\s+build/i],[VENDOR,MODEL,[TYPE,TABLET]],[/\s(tablet|tab)[;/]/i,/\s(mobile)(?:[;/]|\ssafari)/i],[[TYPE,strToLowerCase],VENDOR,MODEL],[/(android.+)[;/].+build/i],[MODEL,[VENDOR,'Generic']]],engine:[[/windows.+\sedge\/([\w.]+)/i],[VERSION,[NAME,'EdgeHTML']],[/(presto)\/([\w.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w.]+)/i,/(khtml|tasman|links)[/\s]\(?([\w.]+)/i,/(icab)[/\s]([23]\.[\d.]+)/i],[NAME,VERSION],[/rv:([\w.]+).*(gecko)/i],[VERSION,NAME]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[NAME,VERSION],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s/]?([\d.\s]+\w)*/i,/(windows\smobile|windows)[\s/]?([ntce\d.\s]+\w)/i],[NAME,[VERSION,correctBy,maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d.]+)/i],[[NAME,'Windows'],[VERSION,correctBy,maps.os.windows.version]],[/\((bb)(10);/i],[[NAME,'BlackBerry'],VERSION],[/(blackberry)\w*\/?([\w.]+)*/i,/(tizen)[/\s]([\w.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[/\s-]?([\w.]+)*/i,/linux;.+(sailfish);/i],[NAME,VERSION],[/(symbian\s?os|symbos|s60(?=;))[/\s-]?([\w.]+)*/i],[[NAME,'Symbian'],VERSION],[/\((series40);/i],[NAME],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[NAME,'Firefox OS'],VERSION],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[/\s(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[/\s-]?(?!chrom)([\w.-]+)*/i,/(hurd|linux)\s?([\w.]+)*/i,/(gnu)\s?([\w.]+)*/i],[NAME,VERSION],[/(cros)\s[\w]+\s([\w.]+\w)/i],[[NAME,'Chromium OS'],VERSION],[/(sunos)\s?([\w.]+\d)*/i],[[NAME,'Solaris'],VERSION],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w.]+)*/i],[NAME,VERSION],[/(haiku)\s(\w+)/i],[NAME,VERSION],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[VERSION,/_/g,'.'],[NAME,'iOS']],[/(mac\sos\sx)\s?([\w\s.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[NAME,'Mac OS'],[VERSION,/_/g,'.']],[/((?:open)?solaris)[/\s-]?([\w.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w.]+)*/i],[NAME,VERSION]]};var browser=mapUserAgent(str,regexes.browser);var engine=mapUserAgent(str,regexes.engine);var os=mapUserAgent(str,regexes.os);var device=mapUserAgent(str,regexes.device);var result={ua:str,browserName:browser.name||null,browserVersion:browser.version||null,engineName:engine.name||null,engineVersion:engine.version||null,osName:os.name||null,osVersion:os.version||null,deviceVendor:device.vendor||null,deviceModel:device.model||null,deviceType:device.type||null,cpu:mapUserAgent(str,regexes.cpu).architecture||null};return result;};
U.genUID = function(){var d=new Date();var mo=twoPlaces(d.getMonth()+1);var day=twoPlaces(d.getDate());var h=twoPlaces(d.getHours());var min=twoPlaces(d.getMinutes());var arr=[d.getFullYear(),mo,day,h,min,U.genSID(3)];return arr.join('-');function twoPlaces(v){return v<10?('0'+v):v;}};
U.genSID = function(len){var chars='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';len=parseInt(len);len=isNaN(len)?5:len;if(len<0){throw new Error('invalidParameter');}var str='';if(len>0){for(var i=0;i<len;i++){str+=chars.charAt(Math.floor(Math.random()*chars.length));}}var cache=U.malloc('__GEN');var c=cache('SID');c=c===undefined?0:(++c%2);c=''+c;cache('SID',c);return(str.length>0)?(str+'-'+c):c;};
U.genIID = function(len){var c=U.malloc('__GEN');len=parseInt(len);len=isNaN(len)?3:len;if(len<=0){throw new Error('invalidParameter');}var chars='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');var num=chars.length;var prefix='SID_'+len;var i=0;var arr=[];if(c(prefix)){arr=c(prefix).arr;var b='';for(i;i<len;i++){b+=chars[arr[i]];}i=len-1;if(arr[len-1]==(num-1)){while(arr[i]==(num-1)){arr[i]=0;i--;}if(i!=-1){arr[i]=(arr[i]+1)%num;}i=len-1;}else{arr[i]=(arr[i]+1)%num;}c(prefix).arr=arr;return b;}else{for(i;i<len;i++){arr[i]=0;}c(prefix,{arr:arr});return U.genIID(len);}};
U.objClone = function(obj,skip,skipFunctions){if(!obj){return obj;}var typ=typeof(obj);if(typ!=='object'||obj instanceof Date){return obj;}var len;var o;if(obj instanceof Array){len=obj.length;o=new Array(len);for(var i=0;i<len;i++){typ=typeof(obj[i]);if(typ!=='object'||obj[i]instanceof Date){if(skipFunctions&&typ==='function'){continue;}o[i]=obj[i];continue;}o[i]=U.objClone(obj[i],skip,skipFunctions);}return o;}o={};for(var m in obj){if(skip&&skip[m]){continue;}var val=obj[m];typ=typeof(val);if(typ!=='object'||val instanceof Date){if(skipFunctions&&typ==='function'){continue;}o[m]=val;continue;}o[m]=U.objClone(obj[m],skip,skipFunctions);}return o;};
U.objExtend = function(base,obj,rewrite){if(!base||!obj){return base;}if(typeof(base)!=='object'||typeof(obj)!=='object'){return base;}if(rewrite===undefined){rewrite=true;}var keys=Object.keys(obj);var i=keys.length;while(i--){var key=keys[i];if(rewrite||base[key]===undefined){base[key]=U.objClone(obj[key]);}}return base;};
U.objKeys = function(obj){var keys=[];var k;for(k in obj){if(obj.hasOwnProperty(k)){keys.push(k);}}return keys;};
U.objForIn = function(obj,fn){var i=0;for(var k in obj){if(obj.hasOwnProperty(k)){fn(k,obj[k],i);i++;}}};
U.objToQueryStr = function(obj){var arr=[];for(var k in obj){if(obj.hasOwnProperty(k)){var v=encodeVal(obj[k]);k=encodeURIComponent(k);if(k&&v){arr.push(k+'='+v);}}}var len=arr.length;return len>0?('?'+arr.join('&')):'';function encodeVal(any){var typ=Object.prototype.toString.call(any);switch(typ){case'[object Number]':return encodeURIComponent(any);case'[object String]':return strEncode(any);case'[object Array]':return arrEncode(any);case'[object Boolean]':return any?'1':'0';}return null;}function strEncode(str){var len=str.replace(/\s*/g,'').length;if(len==0){return null;}var map={' ':'%20','\t':'%09','\n':'%0A','\r':'%0D'};str=str.replace(/( |\t|\n|\r)/g,function(match,k){return map[k]||k;});return str||null;}function arrEncode(arr){var acc=[];var len=arr.length;for(var i=0;i<len;i++){var v=encodeVal(arr[i]);if(v){acc.push(v);}}len=acc.length;return len>0?acc.join(','):null;}};
U.arrForEach = function(arr,fn){var len=arr.length;for(var i=0;i<len;i++){fn(arr[i],i,arr);}};
U.arrMap = function(arr,fn){var acc=[];for(var i=0;i<arr.length;i++){var v=arr[i];if(typeof(fn)==='function'){acc.push(fn(v,i,arr));}else{acc.push(v&&typeof(v)==='object'?v[fn]:undefined);}}return acc;};
U.arrFilter = function(arr,fn){var acc=[];for(var i=0;i<arr.length;i++){if(fn.call(null,arr[i],i,arr)){acc.push(arr[i]);}}return acc;};
U.arrFind = function(arr,fn,v){var isFN=typeof(fn)==='function';var isV=v!==undefined;for(var i=0,len=arr.length;i<len;i++){if(isFN){if(fn(arr[i],i)){return arr[i];}continue;}if(isV){if(arr[i]&&arr[i][fn]===v){return arr[i];}continue;}if(arr[i]===fn){return arr[i];}}return null;};
U.arrFindIndex = function(arr,fn,v){var isFN=typeof(fn)==='function';var isV=v!==undefined;for(var i=0,len=arr.length;i<len;i++){if(isFN){if(fn(arr[i],i)){return i;}continue;}if(isV){if(arr[i]&&arr[i][fn]===v){return i;}continue;}if(arr[i]===fn){return i;}}return-1;};
U.arrRemove = function(arr,fn,v){var isFN=typeof(fn)==='function';var isV=v!==undefined;var tmp=[];for(var i=0,len=arr.length;i<len;i++){if(isFN){if(!fn.call(arr,arr[i],i)){tmp.push(arr[i]);}continue;}if(isV){if(arr[i]&&arr[i][fn]!==v){tmp.push(arr[i]);}continue;}if(arr[i]!==fn){tmp.push(arr[i]);}}return tmp;};
U.arrFirst = function(arr){return arr[0]||null;};
U.arrLast = function(arr){return arr[arr.length-1]||null;};
U.arrOrderBy = function(arr,name,asc,maxlength){var length=arr.length;if(!length||length===1){return arr;}if(typeof(name)==='boolean'){asc=name;name=undefined;}if(maxlength===undefined){maxlength=3;}if(asc===undefined){asc=true;}var type=0;var field=name?arr[0][name]:arr[0];switch(typeof(field)){case'string':type=1;break;case'number':type=2;break;case'boolean':type=3;break;default:if(!(field instanceof Date)&&!isNaN(field.getTime())){return arr;}type=4;break;}function shellInsertionSort(list,length,gapSize,fn){var i=0;var j=0;var temp=null;for(i=gapSize;i<length;i+=gapSize){j=i;while(j>0&&fn(list[j-gapSize],list[j])===1){temp=list[j];list[j]=list[j-gapSize];list[j-gapSize]=temp;j-=gapSize;}}}function shellsort(arr,fn){var length=arr.length;var gapSize=Math.floor(length/2);while(gapSize){shellInsertionSort(arr,length,gapSize,fn);gapSize=Math.floor(gapSize/2);}return arr;}shellsort(arr,function(a,b){var va=name?a[name]:a;var vb=name?b[name]:b;if(type===1){if(va&&vb){if(asc){return U.strRemoveDiacritics(va.substring(0,maxlength)).localeCompare(U.strRemoveDiacritics(vb.substring(0,maxlength)));}else{return U.strRemoveDiacritics(vb.substring(0,maxlength)).localeCompare(U.strRemoveDiacritics(va.substring(0,maxlength)));}}else{return 0;}}else if(type===2){if(va>vb){return asc?1:-1;}else if(va<vb){return asc?-1:1;}else{return 0;}}else if(type===3){if(va===true&&vb===false){return asc?1:-1;}else if(va===false&&vb===true){return asc?-1:1;}else{return 0;}}else if(type===4){if(!va||!vb){return 0;}if(!va.getTime){va=new Date(va);}if(!vb.getTime){vb=new Date(vb);}var at=va.getTime();var bt=vb.getTime();if(at>bt){return asc?1:-1;}else if(at<bt){return asc?-1:1;}else{return 0;}}else{return 0;}});return arr;};
U.arrHas = function(arr,v){return arr.indexOf(v)>=0;};
U.arrUnique = function(arr,k){var result=[];var sublen=0;for(var i=0,len=arr.length;i<len;i++){var v=arr[i];if(!k){if(result.indexOf(v)===-1){result.push(v);}continue;}if(sublen===0){result.push(v);sublen++;continue;}var is=true;for(var j=0;j<sublen;j++){if(result[j][k]===v[k]){is=false;break;}}if(is){result.push(v);sublen++;}}return result;};
U.strPadStart = function(str,len,fill){if(typeof(str)==='number'&&typeof(len)==='string'&&!fill){return padStart('',str,len);}else if(typeof(str)==='string'&&typeof(len)==='number'&&typeof(fill)==='string'){return padStart(str,len,fill);}else{throw new Error('invalidParameter');}function padStart(s,l,f){l-=s.length;if(l<0){return s;}if(f===undefined){f=' ';}while(l--){s=f+s;}return s;}};
U.strPadEnd = function(str,len,fill){if(typeof(str)==='number'&&typeof(len)==='string'&&!fill){return padEnd('',str,len);}else if(typeof(str)==='string'&&typeof(len)==='number'&&typeof(fill)==='string'){return padEnd(str,len,fill);}else{throw new Error('invalidParameter');}function padEnd(s,l,f){l-=s.length;if(l<0){return s;}if(f===undefined){f=' ';}while(l--){s+=f;}return s;}};
U.strHyphenize = function(str){if(typeof(str)!=='string'){return null;}return str.replace(/\B([A-Z])/g,function(g){return('-'+g[0]);}).toLowerCase();};
U.strFormat = function(str,args){return str.replace(/\{\d+\}/g,function(text){var value=args[+text.substring(1,text.length-1)];return value===null?'':value;});};
U.strHTML = function(tag,obj){if(!tag||typeof(tag)!=='string'){return'';}var pairables=['area','base','br','col','command','embed','hr','img','input','keygen','link','meta','param','source','track','wbr'];var str='<'+tag;if(!obj){obj={};}if(obj.id){str+=' id="'+obj.id+'"';}if(Array.isArray(obj.classes)){str+=classesAsStr(obj);}if(obj.style&&typeof(obj.style)==='object'){str+=stylesAsStr(obj.style);}str+=attrsAsStr(obj);if(obj.data&&typeof(obj.data)==='object'){str+=dataAttrsAsStr(obj.data);}if(pairables.indexOf(tag)>=0){return str+'/>';}str+='>';str+=obj.html;str+='</'+tag+'>';return str;function classesAsStr(obj){var arr=obj.classes;var str='';for(var i=0;i<arr.length;i++){var v=arr[i];if(v){v='.'+v;}}str=obj.classes.join(' ');return str.length>0?(' class="'+str+'"'):'';}function attrsAsStr(obj){obj=typeof(obj)==='object'?obj:{};var str='';for(var k in obj){if(['id','classes','style','data','html'].indexOf(k)>=0){continue;}var attr=k+'="'+obj[k]+'"';str+=str.length>0?(' '+attr):attr;}return str.length>0?(' '+str):'';}function dataAttrsAsStr(obj){var str='';for(var k in obj){if(obj.hasOwnProperty(k)){var attr='data-'+k+'="'+obj[k]+'"';str+=str.length>0?(' '+attr):attr;}}return str.length>0?(' '+str):'';}function stylesAsStr(obj){var str='';for(var k in obj){if(obj.hasOwnProperty(k)){str+=U.strHyphenize(k)+':'+obj[k]+';';}}return(str.length>0)?(' style="'+str+'"'):'';}};
U.strStripHTML = function(str){str=typeof(str)==='string'?str.replace(/<\/?[^>]+(>|$)/g,''):'';var map={'nbsp':' ','amp':'&','quot':'"','lt':'<','gt':'>'};return str.replace(/&(nbsp|amp|quot|lt|gt);/g,function(match,k){return map[k]||k;});};
U.strToHTMLText = function(str,leftStartWithNBPS,leftRevResult,rightStartWithNBPS,rightRevResult){var map={'&':'amp','"':'quot','<':'lt','>':'gt'};str=str.replace(/(&|"|<|>)/g,function(match,k){return('&'+map[k]+';')||k;});str=replaceMultipleWhitespacesBetweenChars(str);str=str.replace(/^\s+/,function(spaces){return generateSpaces(spaces.length,leftStartWithNBPS,leftRevResult);});str=str.replace(/\s+$/,function(spaces){return generateSpaces(spaces.length,rightStartWithNBPS,rightRevResult);});return str;function replaceMultipleWhitespacesBetweenChars(str){var exp=/[^\s](\s+)[^\s]/g;var match=null;while(match=exp.exec(str)){if(Array.isArray(match)){exp.lastIndex-=1;var i=match.index+1;var len=match[1].length;var part=generateSpaces(len,false,true);str=str.substring(0,i)+part+str.substring(i+len);}}return str;}function generateSpaces(len,startWithNBPS,revResult){var arr=[];for(var i=0;i<len;i++){if(i%2===0){arr[i]=startWithNBPS?'&nbsp;':' ';}else{arr[i]=startWithNBPS?' ':'&nbsp;';}}return revResult?arr.reverse().join(''):arr.join('');}};
U.strStripWhitespaces = function(str){return typeof(str)==='string'?str.replace(/\s+/,''):'';};
U.strRemoveDiacritics = function(str){var map={'\u00a0':' ','\u07c0':'0','\u24b6':'A','\uff21':'A','\u00c0':'A','\u00c1':'A','\u00c2':'A','\u1ea6':'A','\u1ea4':'A','\u1eaa':'A','\u1ea8':'A','\u00c3':'A','\u0100':'A','\u0102':'A','\u1eb0':'A','\u1eae':'A','\u1eb4':'A','\u1eb2':'A','\u0226':'A','\u01e0':'A','\u00c4':'A','\u01de':'A','\u1ea2':'A','\u00c5':'A','\u01fa':'A','\u01cd':'A','\u0200':'A','\u0202':'A','\u1ea0':'A','\u1eac':'A','\u1eb6':'A','\u1e00':'A','\u0104':'A','\u023a':'A','\u2c6f':'A','\ua732':'AA','\u00c6':'AE','\u01fc':'AE','\u01e2':'AE','\ua734':'AO','\ua736':'AU','\ua738':'AV','\ua73a':'AV','\ua73c':'AY','\u24b7':'B','\uff22':'B','\u1e02':'B','\u1e04':'B','\u1e06':'B','\u0243':'B','\u0181':'B','\u24b8':'C','\uff23':'C','\ua73e':'C','\u1e08':'C','\u0106C':'C','\u0108':'C','\u010a':'C','\u010c':'C','\u00c7':'C','\u0187':'C','\u023b':'C','\u24b9':'D','\uff24':'D','\u1e0a':'D','\u010e':'D','\u1e0c':'D','\u1e10':'D','\u1e12':'D','\u1e0e':'D','\u0110':'D','\u018a':'D','\u0189':'D','\u1d05':'D','\ua779':'D','\u00d0':'Dh','\u01f1':'DZ','\u01c4':'DZ','\u01f2':'Dz','\u01c5':'Dz','\u025b':'E','\u24ba':'E','\uff25':'E','\u00c8':'E','\u00c9':'E','\u00ca':'E','\u1ec0':'E','\u1ebe':'E','\u1ec4':'E','\u1ec2':'E','\u1ebc':'E','\u0112':'E','\u1e14':'E','\u1e16':'E','\u0114':'E','\u0116':'E','\u00cb':'E','\u1eba':'E','\u011a':'E','\u0204':'E','\u0206':'E','\u1eb8':'E','\u1ec6':'E','\u0228':'E','\u1e1c':'E','\u0118':'E','\u1e18':'E','\u1e1a':'E','\u0190':'E','\u018e':'E','\u1d07':'E','\ua77c':'F','\u24bb':'F','\uff26':'F','\u1e1e':'F','\u0191':'F','\ua77b':'F','\u24bc':'G','\uff27':'G','\u01f4':'G','\u011c':'G','\u1e20':'G','\u011e':'G','\u0120':'G','\u01e6':'G','\u0122':'G','\u01e4':'G','\u0193':'G','\ua7a0':'G','\ua77d':'G','\ua77e':'G','\u0262':'G','\u24bd':'H','\uff28':'H','\u0124':'H','\u1e22':'H','\u1e26':'H','\u021e':'H','\u1e24':'H','\u1e28':'H','\u1e2a':'H','\u0126':'H','\u2c67':'H','\u2c75':'H','\ua78d':'H','\u24be':'I','\uff29':'I','\u00cc':'I','\u00cd':'I','\u00ce':'I','\u0128':'I','\u012a':'I','\u012c':'I','\u0130':'I','\u00cf':'I','\u1e2e':'I','\u1ec8':'I','\u01cf':'I','\u0208':'I','\u020a':'I','\u1eca':'I','\u012e':'I','\u1e2c':'I','\u0197':'I','\u24bf':'J','\uff2a':'J','\u0134':'J','\u0248':'J','\u0237':'J','\u24c0':'K','\uff2b':'K','\u1e30':'K','\u01e8':'K','\u1e32':'K','\u0136':'K','\u1e34':'K','\u0198':'K','\u2c69':'K','\ua740':'K','\ua742':'K','\ua744':'K','\ua7a2':'K','\u24c1':'L','\uff2c':'L','\u013f':'L','\u0139':'L','\u013d':'L','\u1e36':'L','\u1e38':'L','\u013b':'L','\u1e3c':'L','\u1e3a':'L','\u0141':'L','\u023d':'L','\u2c62':'L','\u2c60':'L','\ua748':'L','\ua746':'L','\ua780':'L','\u01c7':'LJ','\u01c8':'Lj','\u24c2':'M','\uff2d':'M','\u1e3e':'M','\u1e40':'M','\u1e42':'M','\u2c6e':'M','\u019c':'M','\u03fb':'M','\ua7a4':'N','\u0220':'N','\u24c3':'N','\uff2e':'N','\u01f8':'N','\u0143':'N','\u00d1':'N','\u1e44':'N','\u0147':'N','\u1e46':'N','\u0145':'N','\u1e4a':'N','\u1e48':'N','\u019d':'N','\ua790':'N','\u1d0e':'N','\u01ca':'NJ','\u01cb':'Nj','\u24c4':'O','\uff2f':'O','\u00d2':'O','\u00d3':'O','\u00d4':'O','\u1ed2':'O','\u1ed0':'O','\u1ed6':'O','\u1ed4':'O','\u00d5':'O','\u1e4c':'O','\u022c':'O','\u1e4e':'O','\u014c':'O','\u1e50':'O','\u1e52':'O','\u014e':'O','\u022e':'O','\u0230':'O','\u00d6':'O','\u022a':'O','\u1ece':'O','\u0150':'O','\u01d1':'O','\u020c':'O','\u020e':'O','\u01a0':'O','\u1edc':'O','\u1eda':'O','\u1ee0':'O','\u1ede':'O','\u1ee2':'O','\u1ecc':'O','\u1ed8':'O','\u01ea':'O','\u01ec':'O','\u00d8':'O','\u01fe':'O','\u0186':'O','\u019f':'O','\ua74a':'O','\ua74c':'O','\u0152':'OE','\u01a2':'OI','\ua74e':'OO','\u0222':'OU','\u24c5':'P','\uff30':'P','\u1e54':'P','\u1e56':'P','\u01a4':'P','\u2c63':'P','\ua750':'P','\ua752':'P','\ua754':'P','\u24c6':'Q','\uff31':'Q','\ua756':'Q','\ua758':'Q','\u024a':'Q','\u24c7':'R','\uff32':'R','\u0154':'R','\u1e58':'R','\u0158':'R','\u0210':'R','\u0212':'R','\u1e5a':'R','\u1e5c':'R','\u0156':'R','\u1e5e':'R','\u024c':'R','\u2c64':'R','\ua75a':'R','\ua7a6':'R','\ua782':'R','\u24c8':'S','\uff33':'S','\u1e9e':'S','\u015a':'S','\u1e64':'S','\u015c':'S','\u1e60':'S','\u0160':'S','\u1e66':'S','\u1e62':'S','\u1e68':'S','\u0218':'S','\u015e':'S','\u2c7e':'S','\ua7a8':'S','\ua784':'S','\u24c9':'T','\uff34':'T','\u1e6a':'T','\u0164':'T','\u1e6c':'T','\u021a':'T','\u0162':'T','\u1e70':'T','\u1e6e':'T','\u0166':'T','\u01ac':'T','\u01ae':'T','\u023e':'T','\ua786':'T','\u00de':'Th','\ua728':'TZ','\u24ca':'U','\uff35':'U','\u00d9':'U','\u00da':'U','\u00db':'U','\u0168':'U','\u1e78':'U','\u016a':'U','\u1e7a':'U','\u016c':'U','\u00dc':'U','\u01db':'U','\u01d7':'U','\u01d5':'U','\u01d9':'U','\u1ee6':'U','\u016e':'U','\u0170':'U','\u01d3':'U','\u0214':'U','\u0216':'U','\u01af':'U','\u1eea':'U','\u1ee8':'U','\u1eee':'U','\u1eec':'U','\u1ef0':'U','\u1ee4':'U','\u1e72':'U','\u0172':'U','\u1e76':'U','\u1e74':'U','\u0244':'U','\u24cb':'V','\uff36':'V','\u1e7c':'V','\u1e7e':'V','\u01b2':'V','\ua75e':'V','\u0245':'V','\ua760':'VY','\u24cc':'W','\uff37':'W','\u1e80':'W','\u1e82':'W','\u0174':'W','\u1e86':'W','\u1e84':'W','\u1e88':'W','\u2c72':'W','\u24cd':'X','\uff38':'X','\u1e8a':'X','\u1e8c':'X','\u24ce':'Y','\uff39':'Y','\u1ef2':'Y','\u00dd':'Y','\u0176':'Y','\u1ef8':'Y','\u0232':'Y','\u1e8e':'Y','\u0178':'Y','\u1ef6':'Y','\u1ef4':'Y','\u01b3':'Y','\u024e':'Y','\u1efe':'Y','\u24cf':'Z','\uff3a':'Z','\u0179':'Z','\u1e90':'Z','\u017b':'Z','\u017d':'Z','\u1e92':'Z','\u1e94':'Z','\u01b5':'Z','\u0224':'Z','\u2c7f':'Z','\u2c6b':'Z','\ua762':'Z','\u24d0':'a','\uff41':'a','\u1e9a':'a','\u00e0':'a','\u00e1':'a','\u00e2':'a','\u1ea7':'a','\u1ea5':'a','\u1eab':'a','\u1ea9':'a','\u00e3':'a','\u0101':'a','\u0103':'a','\u1eb1':'a','\u1eaf':'a','\u1eb5':'a','\u1eb3':'a','\u0227':'a','\u01e1':'a','\u00e4':'a','\u01df':'a','\u1ea3':'a','\u00e5':'a','\u01fb':'a','\u01ce':'a','\u0201':'a','\u0203':'a','\u1ea1':'a','\u1ead':'a','\u1eb7':'a','\u1e01':'a','\u0105':'a','\u2c65':'a','\u0250':'a','\u0251':'a','\ua733':'aa','\u00e6':'ae','\u01fd':'ae','\u01e3':'ae','\ua735':'ao','\ua737':'au','\ua739':'av','\ua73b':'av','\ua73d':'ay','\u24d1':'b','\uff42':'b','\u1e03':'b','\u1e05':'b','\u1e07':'b','\u0180':'b','\u0183':'b','\u0253':'b','\u0182':'b','\uff43':'c','\u24d2':'c','\u0107':'c','\u0109':'c','\u010b':'c','\u010d':'c','\u00e7':'c','\u1e09':'c','\u0188':'c','\u023c':'c','\ua73f':'c','\u2184':'c','\u24d3':'d','\uff44':'d','\u1e0b':'d','\u010f':'d','\u1e0d':'d','\u1e11':'d','\u1e13':'d','\u1e0f':'d','\u0111':'d','\u018c':'d','\u0256':'d','\u0257':'d','\u018b':'d','\u13e7':'d','\u0501':'d','\ua7aa':'d','\u00f0':'dh','\u01f3':'dz','\u01c6':'dz','\u24d4':'e','\uff45':'e','\u00e8':'e','\u00e9':'e','\u00ea':'e','\u1ec1':'e','\u1ebf':'e','\u1ec5':'e','\u1ec3':'e','\u1ebd':'e','\u0113':'e','\u1e15':'e','\u1e17':'e','\u0115':'e','\u0117':'e','\u00eb':'e','\u1ebb':'e','\u011b':'e','\u0205':'e','\u0207':'e','\u1eb9':'e','\u1ec7':'e','\u0229':'e','\u1e1d':'e','\u0119':'e','\u1e19':'e','\u1e1b':'e','\u0247':'e','\u01dd':'e','\u24d5':'f','\uff46':'f','\u1e1f':'f','\u0192':'f','\ufb00':'ff','\ufb01':'fi','\ufb02':'fl','\ufb03':'ffi','\ufb04':'ffl','\u24d6':'g','\uff47':'g','\u01f5':'g','\u011d':'g','\u1e21':'g','\u011f':'g','\u0121':'g','\u01e7':'g','\u0123':'g','\u01e5':'g','\u0260':'g','\ua7a1':'g','\ua77f':'g','\u1d79':'g','\u24d7':'h','\uff48':'h','\u0125':'h','\u1e23':'h','\u1e27':'h','\u021f':'h','\u1e25':'h','\u1e29':'h','\u1e2b':'h','\u1e96':'h','\u0127':'h','\u2c68':'h','\u2c76':'h','\u0265':'h','\u0195':'hv','\u24d8':'i','\uff49':'i','\u00ec':'i','\u00ed':'i','\u00ee':'i','\u0129':'i','\u012b':'i','\u012d':'i','\u00ef':'i','\u1e2f':'i','\u1ec9':'i','\u01d0':'i','\u0209':'i','\u020b':'i','\u1ecb':'i','\u012f':'i','\u1e2d':'i','\u0268':'i','\u0131':'i','\u24d9':'j','\uff4a':'j','\u0135':'j','\u01f0':'j','\u0249':'j','\u24da':'k','\uff4b':'k','\u1e31':'k','\u01e9':'k','\u1e33':'k','\u0137':'k','\u1e35':'k','\u0199':'k','\u2c6a':'k','\ua741':'k','\ua743':'k','\ua745':'k','\ua7a3':'k','\u24db':'l','\uff4c':'l','\u0140':'l','\u013a':'l','\u013e':'l','\u1e37':'l','\u1e39':'l','\u013c':'l','\u1e3d':'l','\u1e3b':'l','\u017f':'l','\u0142':'l','\u019a':'l','\u026b':'l','\u2c61':'l','\ua749':'l','\ua781':'l','\ua747':'l','\u026d':'l','\u01c9':'lj','\u24dc':'m','\uff4d':'m','\u1e3f':'m','\u1e41':'m','\u1e43':'m','\u0271':'m','\u026f':'m','\u24dd':'n','\uff4e':'n','\u01f9':'n','\u0144':'n','\u00f1':'n','\u1e45':'n','\u0148':'n','\u1e47':'n','\u0146':'n','\u1e4b':'n','\u1e49':'n','\u019e':'n','\u0272':'n','\u0149':'n','\ua791':'n','\ua7a5':'n','\u043b':'n','\u0509':'n','\u01cc':'nj','\u24de':'o','\uff4f':'o','\u00f2':'o','\u00f3':'o','\u00f4':'o','\u1ed3':'o','\u1ed1':'o','\u1ed7':'o','\u1ed5':'o','\u00f5':'o','\u1e4d':'o','\u022d':'o','\u1e4f':'o','\u014d':'o','\u1e51':'o','\u1e53':'o','\u014f':'o','\u022f':'o','\u0231':'o','\u00f6':'o','\u022b':'o','\u1ecf':'o','\u0151':'o','\u01d2':'o','\u020d':'o','\u020f':'o','\u01a1':'o','\u1edd':'o','\u1edb':'o','\u1ee1':'o','\u1edf':'o','\u1ee3':'o','\u1ecd':'o','\u1ed9':'o','\u01eb':'o','\u01ed':'o','\u00f8':'o','\u01ff':'o','\ua74b':'o','\ua74d':'o','\u0275':'o','\u0254':'o','\u1d11':'o','\u0153':'oe','\u01a3':'oi','\ua74f':'oo','\u0223':'ou','\u24df':'p','\uff50':'p','\u1e55':'p','\u1e57':'p','\u01a5':'p','\u1d7d':'p','\ua751':'p','\ua753':'p','\ua755':'p','\u03c1':'p','\u24e0':'q','\uff51':'q','\u024b':'q','\ua757':'q','\ua759':'q','\u24e1':'r','\uff52':'r','\u0155':'r','\u1e59':'r','\u0159':'r','\u0211':'r','\u0213':'r','\u1e5b':'r','\u1e5d':'r','\u0157':'r','\u1e5f':'r','\u024d':'r','\u027d':'r','\ua75b':'r','\ua7a7':'r','\ua783':'r','\u24e2':'s','\uff53':'s','\u015b':'s','\u1e65':'s','\u015d':'s','\u1e61':'s','\u0161':'s','\u1e67':'s','\u1e63':'s','\u1e69':'s','\u0219':'s','\u015f':'s','\u023f':'s','\ua7a9':'s','\ua785':'s','\u1e9b':'s','\u0282':'s','\u00df':'ss','\u24e3':'t','\uff54':'t','\u1e6b':'t','\u1e97':'t','\u0165':'t','\u1e6d':'t','\u021b':'t','\u0163':'t','\u1e71':'t','\u1e6f':'t','\u0167':'t','\u01ad':'t','\u0288':'t','\u2c66':'t','\ua787':'t','\u00fe':'th','\ua729':'tz','\u24e4':'u','\uff55':'u','\u00f9':'u','\u00fa':'u','\u00fb':'u','\u0169':'u','\u1e79':'u','\u016b':'u','\u1e7b':'u','\u016d':'u','\u00fc':'u','\u01dc':'u','\u01d8':'u','\u01d6':'u','\u01da':'u','\u1ee7':'u','\u016f':'u','\u0171':'u','\u01d4':'u','\u0215':'u','\u0217':'u','\u01b0':'u','\u1eeb':'u','\u1ee9':'u','\u1eef':'u','\u1eed':'u','\u1ef1':'u','\u1ee5':'u','\u1e73':'u','\u0173':'u','\u1e77':'u','\u1e75':'u','\u0289':'u','\u24e5':'v','\uff56':'v','\u1e7d':'v','\u1e7f':'v','\u028b':'v','\ua75f':'v','\u028c':'v','\ua761':'vy','\u24e6':'w','\uff57':'w','\u1e81':'w','\u1e83':'w','\u0175':'w','\u1e87':'w','\u1e85':'w','\u1e98':'w','\u1e89':'w','\u2c73':'w','\u24e7':'x','\uff58':'x','\u1e8b':'x','\u1e8d':'x','\u24e8':'y','\uff59':'y','\u1ef3':'y','\u00fd':'y','\u0177':'y','\u1ef9':'y','\u0233':'y','\u1e8f':'y','\u00ff':'y','\u1ef7':'y','\u1e99':'y','\u1ef5':'y','\u01b4':'y','\u024f':'y','\u1eff':'y','\u24e9':'z','\uff5a':'z','\u017a':'z','\u1e91':'z','\u017c':'z','\u017e':'z','\u1e93':'z','\u1e95':'z','\u01b6':'z','\u0225':'z','\u0240':'z','\u2c6c':'z','\ua763':'z'};var expDiacritics=/[^\u0000-\u007e]/g;return str.replace(expDiacritics,function(ch){return map[ch]||ch;});};
U.strSlug = function(str,max){max=max||60;var self=U.strRemoveDiacritics(str.trim().toLowerCase());var builder='';var length=self.length;for(var i=0;i<length;i++){var c=self[i];var code=self.charCodeAt(i);if(builder.length>=max){break;}if(code>31&&code<48){if(builder[builder.length-1]!=='-'){builder+='-';}continue;}if((code>47&&code<58)||(code>94&&code<123)){builder+=c;}}var l=builder.length-1;return builder[l]==='-'?builder.substring(0,l):builder;};
U.strReplaceBetween = function(str,i,j,part){return str.substring(0,i)+part+str.substring(j);};
U.strReplaceCharAt = function(str,i,ch){return str.substr(0,i)+ch+str.substr(i+ch.length);};
U.strTrim = function(str,ch){ch=ch||'\\s';var exp=new RegExp('^'+ch+'+|'+ch+'+$','gm');return str.replace(exp,'');};
U.strReverse = function(str){var rev='';for(var i=str.length-1;i>=0;i--){rev+=str[i];}return rev;};
U.strHas = function(str,v){return str.includes(v);};
U.strUntil = function(str,exp){var arr=str.split(exp);if(Array.isArray(arr)){return arr[0]===str?null:arr[0];}return null;};
U.strFromUntil = function(str,leftIndex,exp){str=str.substring(leftIndex);var arr=str.split(exp);if(Array.isArray(arr)){return arr[0]===str?null:arr[0];}return null;};
U.strReverseUntil = function(str,exp){var rev='';for(var i=str.length-1;i>=0;i--){rev+=str[i];}var arr=rev.split(exp);if(Array.isArray(arr)){return arr[0]===str?null:arr[0];}return null;};
U.strReverseFromUntil = function(str,leftIndex,exp){str=str.substring(0,leftIndex);var rev='';for(var i=str.length-1;i>=0;i--){rev+=str[i];}var arr=rev.split(exp);if(Array.isArray(arr)){return arr[0]===str?null:arr[0];}return null;};
U.strMatchLen = function(str,regex,i){var matches=str.match(regex);i=parseInt(i);i=isNaN(i)?0:i;return(Array.isArray(matches)&&matches[i])?matches[i].length:0;};
U.strToQueryObj = function(url){url=url.replace(/\+/g,' ');var exp=/[?&]([^=]+)=([^&]*)/g;var o={};var m=null;while(m=exp.exec(url)){var k=m[1]?decodeURIComponent(m[1]):'';var v=m[2]?decodeURIComponent(m[2]):'';if(k){o[k]=v;}}return o;};
U.numToKeyType = function(keyCode){var map={8:'BACKSPACE',9:'TAB',13:'ENTER',16:'SHIFT',17:'CTRL',18:'ALT',32:'SPACE',37:'LEFT_ARROW',38:'UP_ARROW',39:'RIGHT_ARROW',40:'DOWN_ARROW',65:'A',66:'B',67:'C',68:'D',69:'E',70:'F',71:'G',72:'H',73:'I',74:'J',75:'K',76:'L',77:'M',78:'N',79:'O',80:'P',81:'Q',82:'R',83:'S',84:'T',85:'U',86:'V',87:'W',88:'X',89:'Y',90:'Z'};return map[keyCode]||null;};
U.Error = function(problem,message){if(problem){if(problem instanceof Error){this.id=problem.message;this.message=message||null;}else if(typeof(problem)==='string'){this.id=problem;this.message=message||null;}else{throw new Error('invalidParameter');}}else{throw new Error('invalidParameter');}};U.Error.prototype={log:function(){var msg=this.message?(this.id+' - '+this.message):this.id;U.logWarn(msg);},throw:function(){throw new Error(this.id);},logAndThrow:function(){this.log();this.throw();},toNative:function(){var msg=this.message?(this.id+' - '+this.message):this.id;return new Error(msg);},toString:function(){return JSON.stringify(this,null,'    ');}};
U.ErrorBuilder = function(err){if(err){if(typeof(err)==='string'||err instanceof Error){this.errors=[new U.Error(err)];}else if(err instanceof U.Error){this.errors=[err];}else if(Array.isArray(err)){var len=err.length;var arr=[];if(len>0){for(var i=0;i<len;i++){var v=err[i];if(v){if(v instanceof U.Error){arr.push(v);}else if(v instanceof Error){arr.push(new U.Error(v));}else{throw new Error('invalidParameter');}}else{throw new Error('invalidParameter');}}}this.errors=arr;}else if(typeof(err)==='object'&&Array.isArray(err.errors)){this.errors=err.errors;}else{throw new Error('invalidParameter');}}else{this.errors=[];}};U.ErrorBuilder.prototype={push:function(err){if(err instanceof Error){this.errors.push(new U.Error(err.message));return this;}else if(err instanceof U.Error){this.errors.push(err);return this;}else{throw new Error('invalidParameter');}},remove:function(id){var arr=this.errors;var i=-1;for(var j=0;j<arr.length;j++){if(arr[j].id==id){i=j;}}if(i>=0){arr.splice(i,1);}},clear:function(){this.errors=[];},first:function(){return this.errors[0]||null;},last:function(){return this.errors[this.errors.length-1]||null;},toString:function(){return JSON.stringify(this,null,'    ');},hasError:function(id){var arr=this.errors;if(id){for(var i=0;i<arr.length;i++){if(arr[i]&&arr[i].id==id){return true;}}return false;}return arr.length>0;},throwFirst:function(){var len=this.errors.length;if(len==0){throw new Error('emptyErrorBuilder');}this.errors[0].throw();},logFirst:function(){var len=this.errors.length;if(len==0){throw new Error('emptyErrorBuilder');}this.errors[0].log();},logAndThrowFirst:function(){var len=this.errors.length;if(len==0){throw new Error('emptyErrorBuilder');}this.errors[0].logAndThrow();}};
U.SETSCHEMA = function(k,fn){if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}if(typeof(fn)!=='function'){throw new Error('invalidParameter');}var Co=function(fn){this.rule={};this.prefix='';this.currentKey=null;var funcError=attrError;fn.apply(null,[attr.bind(this),attrError.bind(this),attrPrepare.bind(this),attrValidate.bind(this),func.bind(this),funcError.bind(this),setPrefix.bind(this)]);};Co.prototype={prepareAndValidate:function(obj,lan){if(!obj||typeof(obj)!=='object'){throw new Error('invalidParameter');}if(lan&&typeof(lan)!=='string'){throw new Error('invalidParameter');}var eb=new U.ErrorBuilder();for(var k in this.rule){if(this.rule.hasOwnProperty(k)){var v=obj[k];var rule=this.rule[k];var typeMatch=false;if(rule.prepare){typeMatch=(Object.prototype.toString.call(v)===rule.type);v=rule.prepare(v,typeMatch,obj);obj[k]=v;}typeMatch=(Object.prototype.toString.call(v)===rule.type);if(rule.validate&&!rule.validate(v,typeMatch,obj)){var mes=lan?(rule.message[lan.toUpperCase()]||rule.message['default']):rule.message['default'];eb.push(new U.Error(this.prefix+k,mes));}}}return eb;},clean:function(obj){if(!obj||typeof(obj)!=='object'){throw new Error('invalidParameter');}var tmp={};for(var k in this.rule){if(this.rule.hasOwnProperty(k)){tmp[k]=obj[k];}}return tmp;},makeError:function(name,lan){if(!name||typeof(name)!=='string'){throw new Error('invalidParameter');}if(lan&&typeof(lan)!=='string'){throw new Error('invalidParameter');}for(var k in this.rule){if(this.rule.hasOwnProperty(k)){if(k===name){var rule=this.rule[k];var mes=lan?(rule.message[lan.toUpperCase()]||rule.message['default']):rule.message['default'];return new U.Error(this.prefix+k,mes);}}}throw new Error('Missing field "'+name+'" in schema definition.');}};function attr(name,type){if(!name||typeof(name)!=='string'){throw new Error('invalidParameter');}type=strType(type);if(!type){throw new Error('invalidParameter');}this.currentKey=name;this.rule[this.currentKey]={type:type,message:{default:'Invalid attribute "'+name+'".'}};}function func(name){if(!name||typeof(name)!=='string'){throw new Error('invalidParameter');}this.currentKey=name;this.rule[this.currentKey]={type:'[object Function]',message:{default:'Invalid function "'+name+'".'}};}function attrError(a,b){if(!a||typeof(a)!=='string'){throw new Error('invalidParameter');}if(b&&typeof(b)!=='string'){throw new Error('invalidParameter');}var lan=(a&&b)?a.toUpperCase():'default';var mes=(a&&b)?b:a;if(!this.rule[this.currentKey]){throw new Error('invalidOrder');}if(!this.rule[this.currentKey].message){this.rule[this.currentKey].message={};}this.rule[this.currentKey].message[lan]=mes;}function attrPrepare(fn){if(!fn||typeof(fn)!=='function'){throw new Error('invalidParameter');}if(!this.rule[this.currentKey]){throw new Error('invalidOrder');}this.rule[this.currentKey].prepare=fn;}function attrValidate(fn){if(!fn||typeof(fn)!=='function'){throw new Error('invalidParameter');}if(!this.rule[this.currentKey]){throw new Error('invalidOrder');}this.rule[this.currentKey].validate=fn;}function strType(type){if(type===Number){return'[object Number]';}else if(type===String){return'[object String]';}else if(type===Array){return'[object Array]';}else if(type===Date){return'[object Date]';}else if(type===Object){return'[object Object]';}else if(type===Boolean){return'[object Boolean]';}else{return null;}}function setPrefix(prefix){this.prefix=prefix;}var cache=U.malloc('__SCHEMA');if(cache(k)){throw new Error("Duplicate schema: '"+k+"'.");}cache(k,new Co(fn));};
U.SCHEMA = function(k){if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}var cache=U.malloc('__SCHEMA');return cache(k)||null;};
U.SETMODULE = function(k,fn){if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}if(typeof(fn)!=='function'){throw new Error('invalidParameter');}var Co=function(){var self=this;self.fns={};self.registerFN=function(kk,func){if(!kk||typeof(kk)!=='string'){throw new Error('invalidParameter');}if(typeof(func)!=='function'){throw new Error('invalidParameter');}if(self.fns[kk]){throw new Error("Duplicate function: '"+kk+"' in '"+k+"' module.");}self.fns[kk]=func;};fn(self.registerFN);};Co.prototype={func:function(){var self=this;var args=[].slice.call(arguments);var kk=args.shift();if(!kk||typeof(kk)!=='string'){throw new Error('invalidParameter');}var func=self.fns[kk];if(!func){throw new Error("Function: '"+kk+"' in '"+k+"' module was not found.");}return func.apply(null,args);}};var cache=U.malloc('__MODULE');if(cache(k)){throw new Error("Duplicate module: '"+k+"'.");}cache(k,new Co());};
U.MODULE = function(k){if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}var cache=U.malloc('__MODULE');return cache(k)||null;};
U.procSerial = function(){var Co=function(){var self=this;self.queue=[];self.ctx={};};Co.prototype.push=function(fn){var self=this;var args=(arguments&&arguments.length>0)?[].slice.call(arguments,1):[];self.queue.push({fn:fn,args:args});};Co.prototype.run=function(endFN){var self=this;(function loop(i,args){var obj=self.queue[i];if(!obj){return endFN&&endFN.call(self.ctx,null);}if(i===0||(Array.isArray(obj.args)&&obj.args.length>0)){obj.args.push(next);obj.fn.apply(self.ctx,obj.args);}else{args.push(next);obj.fn.apply(self.ctx,args);}function next(){var args=(arguments&&arguments.length>0)?[].slice.call(arguments):[];var err=args.shift();if(err){return endFN&&endFN.call(self.ctx,err);}if(typeof(setImmediate)==='function'){setImmediate(function(){return loop(++i,args);});}else{return loop(++i,args);}}}(0));};return new Co();};
U.H = function(command,a,b){var REG_BASE_CMD_NO_SPACE_AT_START=/^\s/;var REG_BASE_CMD_NO_SPACE_AT_END=/\s$/;var REG_BASE_CMD_NO_SPACE_FOLLOWED_BY_COMMA=/\s,/;var REG_BASE_CMD_NO_MULTIPLE_SPACES=/\s{2,}/;var REG_BASE_CMD_NO_MULTIPLE_COMMAS=/,\s*,/;var REG_BASE_CMD_NO_MULTIPLE_PIPES=/\|{2,}/;var REG_BASE_CMD_NO_SPACES_AROUND_PIPE=/(?:\s+\|)|(?:\|\s+)/;var REG_BASE_CMD_NO_PIPE_AT_END=/\|$/;var REG_BASE_CMD_NO_SPACE_AFTER_OPEN_PAREN=/\(\s/;var REG_BASE_CMD_NO_SPACE_BEFORE_CLOSE_PAREN=/\s\)/;var REG_BASE_CMD_IS_METATAG=/^(Doc|Head|Link|Meta|Title)(?![A-Za-z0-9_-])/;var REG_BASE_CMD_IS_BODYTAG=/^(A|Abbr|Address|Area|Article|Aside|Audio|B|Base|Bdi|Bdo|BlockQuote|Body|Br|Btn|Canvas|Caption|Cite|Code|Col|ColGroup|DataList|Dd|Del|Details|Dfn|Dialog|Div|Dl|Dt|Em|Embeded|FieldSet|FigCaption|Figure|Footer|Form|H1|H2|H3|H4|H5|H6|Header|Hr|I|Iframe|Img|Input|Ins|Kbd|Label|Legend|Li|Main|Map|Mark|Menu|MenuItem|Meter|Nav|NoScript|Object|Ol|OptGroup|Option|Output|P|Param|Picture|Pre|Progress|Q|Rp|Rt|Ruby|S|Samp|Script|Section|Select|Small|Source|Span|Strong|Sub|Summary|Sup|Svg|TFoot|THead|Table|Tbody|Td|Template|TextArea|Th|Time|Tr|Track|U|Ul|Var|Video|Wbr)(?![A-Za-z0-9_-])/;var REG_BASE_CMD_SPLIT_BY_PIPE=/\|/;var REG_BASE_CMD_IS_PROBABLY_HTML_ATTRIBUTES_INSTRUCTIONS_STRING=/(?:^|\s)(?:Charset|Chckd|Content|Disabled|For|Href|HttpEquiv|Lang|Name|Ph|Property|Rel|Ro|Slctd|Src|Type)(?![A-Za-z0-9])/;var REG_BASE_CMD_IS_PROBABLY_ACSS_INSTUCTIONS_STRING=/(?:^|\s)(?:Ac|Ai|Anim|Animdel|Animdir|Animdur|Animfm|Animic|Animn|Animps|Animtf|Ap|As|B|BdA|Bda|Bdb|Bdbc|Bdbs|Bdbw|Bdc|Bdcl|BdL|Bdl|Bdlc|Bdls|Bdlw|BdR|Bdr|Bdrad|Bdradbl|Bdradbr|Bdradtl|Bdradtr|Bdrc|Bdrs|Bdrw|Bds|Bdsp|Bdt|Bdtc|Bdts|Bdtw|Bdw|Bdx|Bdy|Bfv|Bg|Bga|Bgc|Bgcp|Bgi|Bgo|Bgp|Bgpx|Bgpy|Bgr|Bgz|Blur|Brightness|Bxsh|Bxz|C|Cl|Cnt|Contrast|Ctn|Cur|D|Dropshadow|Ff|Fil|Fill|Fl|Fld|Flf|Flw|Flx|Flxb|Flxg|Flxs|Fs|Fv|Fw|Fx|Fxb|Fxd|Fxf|Fxg|Fxs|Fxw|Fz|Grayscale|H|HueRotate|Hy|Invert|Jc|L|Lh|LineClamp|Lisi|Lisp|List|Lts|M|Mah|Matrix|Matrix3d|Maw|Mb|Mih|Miw|Ml|Mr|Mt|Mx|My|O|Op|Opacity|Or|Ov|Ovs|Ovx|Ovy|P|Pb|Pe|Pl|Pos|Pr|Prs|Prso|Pt|Px|Py|R|Rotate|Rotate3d|RotateX|RotateY|RotateZ|Rsz|Saturate|Scale|Scale3d|ScaleX|ScaleY|Sepia|Skew|SkewX|SkewY|Stk|Stklc|Stklj|Stkw|T|Ta|Tal|Tbl|Td|Ti|Tov|Tr|Translate|Translate3d|TranslateX|TranslateY|TranslateZ|Tren|Trf|Trfo|Trfs|Trs|Trsde|Trsdu|Trsp|Trstf|Tsh|Tt|Us|V|Va|W|Whs|Whsc|Wob|Wow|Z)(?![A-Za-z0-9])/;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_SPACES=/\s+/g;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_UNALLOWED_METATAG_CHAR=/[^\w]/;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_UNALLOWED_BODYTAG_CHAR=/[^\w-_#.]/;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_MULTIPLE_DOTS=/\.{2,}/;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_MULTIPLE_HASHES=/#{2,}/;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_DOT_AT_END=/\.$/;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_HASH_AT_END=/#$/;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_HASH_FOLLOWED_BY_DOT=/#\./;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_DOT_FOLLOWED_BY_HASH=/\.#/;var REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_NAME_SEPARATOR_AT_BOUNDARY=/[#.][-_]|[-_]\.|[-_]$/;var REG_HTML_SELECTOR_INSTRUCTION_STRING_MATCH_COMPONENTS=/[-_A-Z][-_A-Za-z0-9]*|[.#][-_A-Za-z0-9]+/g;var REG_HTML_ATTRIBUTES_INSTRUCTIONS_STRING_NO_MISSING_SPACE_BETWEEN_INSTRUCTIONS=/\)(?![\s)]|$)/;var REG_HTML_ATTRIBUTES_INSTRUCTIONS_STRING_MATCH_INSTRUCTION_STRINGS=/\S*\(.*?\)/g;var REG_HTML_ATTRIBUTES_INSTRUCTION_STRING_MATCH_COMPONENTS=/([^\s(]+)\((.*)\)/;var REG_HTML_ATTRIBUTES_INSTRUCTION_VALUE_NO_UNALLOWED_CHAR=/[()]/;var REG_HTML_ATTRIBUTES_INSTRUCTION_VALUE_NO_MISSING_SPACE_AFTER_COMMA=/,\S/;var REG_ACSS_INSTRUCTIONS_STRING_NO_MISSING_SPACE_BETWEEN_INSTRUCTIONS=/\)\S*\(/;var REG_ACSS_INSTRUCTIONS_STRING_MATCH_INSTRUCTION_STRINGS=/\S*\(.*?\)\S*/g;var REG_ACSS_INSTRUCTION_STRING_MATCH_COMPONENTS=/^([^:_>+()!@]+)\(([^()]*)\)((?=!)!|)((?=:[^:_>+()!@])(?::[^:_>+()!@]+)+|)((?=::[^:_>+()!@])(?:::[^:_>+()!@]+)+|)((?=@[^:_>+()!@])@[^:_>+()!@]+|)$/;var REG_ACSS_INSTRUCTION_VALUE_NO_MISSING_SPACE_AFTER_COMMA=/,\S/;var REG_ACSS_INSTRUCTION_VALUE_NO_MISSING_SPACE_AFTER_COMMA_SKIP=/url\[(.*?)\]/g;var REG_ACSS_INSTRUCTION_VALUE_BRACKETS=[/\[/g,/\]/g];var REG_ACSS_INSTRUCTION_VALUE_MATCH_NEXT_COLOR=/(^|\s|,)(?=#)(?:#([^.,\s]+))((?=\.)\.[^#,\s]*|)(?:\s|,|$)+/;var REG_ACSS_COLOR_HEX_NO_LOWERCASED_LETTER=/[a-z]/;var REG_ACSS_COLOR_HEX_NO_INVALID_HEX_VALUE=/[^0-9A-F]/;var REG_ACSS_COLOR_HEX_TO_RGB=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;var REG_ACSS_MATCH_PSEUDO_CLASSES=/(?=:)(:[^:]+)/g;var REG_ACSS_MATCH_PSEUDO_ELEMENTS=/(?=::)(::[^:]+)/g;var ACSS_COMMENT_TEMPLATE='/* -------------------> $ */';var HTML_TEMPLATES={Doc:'<!DOCTYPE html><html[[modifiers]]>[[content]]</html>',Head:'<head>[[content]]</head>',Meta:'<meta[[modifiers]]>',Title:'<title>[[content]]</title>',Link:'<link[[modifiers]]>',Body:'<body>[[content]]</body>',Div:'<div[[modifiers]]>[[content]]</div>',Span:'<span[[modifiers]]>[[content]]</span>',Label:'<label[[modifiers]]>[[content]]</label>',Input:'<input[[modifiers]]>',Select:'<select[[modifiers]]>[[content]]</select>',Option:'<option[[modifiers]]>[[content]]</option>',Script:'<script[[modifiers]]></script>'};var HTML_ATTRIBUTES={Doc:[{name:'Language',func:'Lang',allowArgument:true,html:'lang=$',noMissingSpaceAfterComma:true}],Head:[],Meta:[{name:'Charset',func:'Charset',allowArgument:true,html:'charset=$',noMissingSpaceAfterComma:true},{name:'Name',func:'Name',allowArgument:true,html:'name=$',noMissingSpaceAfterComma:true},{name:'Property',func:'Property',allowArgument:true,html:'property=$',noMissingSpaceAfterComma:true},{name:'HttpEquiv',func:'HttpEquiv',allowArgument:true,html:'http-equiv=$',noMissingSpaceAfterComma:true},{name:'Content',func:'Content',allowArgument:true,html:'content=$',noMissingSpaceAfterComma:true}],Title:[],Link:[{name:'Rel',func:'Rel',allowArgument:true,html:'rel=$',noMissingSpaceAfterComma:true},{name:'Type',func:'Type',allowArgument:true,html:'type=$',noMissingSpaceAfterComma:true},{name:'Href',func:'Href',allowArgument:true,html:'href=$',noMissingSpaceAfterComma:false}],Body:[],Div:[],Span:[],Label:[{name:'For',func:'For',allowArgument:true,html:'for=$',noMissingSpaceAfterComma:true}],Input:[{name:'Type',func:'Type',allowArgument:true,html:'type=$',noMissingSpaceAfterComma:true},{name:'Placeholder',func:'Ph',allowArgument:true,html:'placeholder=$',noMissingSpaceAfterComma:true},{name:'Checked',func:'Chckd',allowArgument:false,html:'checked',noMissingSpaceAfterComma:true},{name:'Readonly',func:'Ro',allowArgument:false,html:'readonly',noMissingSpaceAfterComma:true},{name:'Disabled',func:'Disabled',allowArgument:false,html:'disabled',noMissingSpaceAfterComma:true}],Select:[{name:'Disabled',func:'Disabled',allowArgument:false,html:'disabled',noMissingSpaceAfterComma:true}],Option:[{name:'Selected',func:'Slctd',allowArgument:false,html:'selected',noMissingSpaceAfterComma:true}],Script:[{name:'Src',func:'Src',allowArgument:true,html:'src=$',noMissingSpaceAfterComma:false}]};var ACSS_COLOR_ARGUMENTS={t:'transparent',cc:'currentColor',n:'none'};var ACSS_RULES=[{name:'Border All Edges',func:'BdA',css:['.[[el]] {','    border-width: 1px;','    border-style: solid;','}'],allowArgument:false,type:ACSS_INSTRUCTION_TYPE_helper()},{name:'Border X 1px solid',func:'BdX',css:['.[[el]] {','    border-top-width: 0;','    border-right-width: 1px;','    border-bottom-width: 0;','    border-left-width: 1px;','    border-style: solid;','}'],allowArgument:false,type:ACSS_INSTRUCTION_TYPE_helper()},{name:'Border Y 1px solid',func:'BdY',css:['.[[el]] {','    border-top-width: 1px;','    border-right-width: 0;','    border-bottom-width: 1px;','    border-left-width: 0;','    border-style: solid;','}'],allowArgument:false,type:ACSS_INSTRUCTION_TYPE_helper()},{name:'Border Top 1px solid',func:'BdT',css:['.[[el]] {','    border-top-width: 1px;','    border-right-width: 0;','    border-bottom-width: 0;','    border-left-width: 0;','    border-style: solid;','}'],allowArgument:false,type:ACSS_INSTRUCTION_TYPE_helper()},{name:'Border Right 1px solid',func:'BdR',css:['.[[el]] {','    border-top-width: 0;','    border-right-width: 1px;','    border-bottom-width: 0;','    border-left-width: 0;','    border-style: solid;','}'],allowArgument:false,type:ACSS_INSTRUCTION_TYPE_helper()},{name:'Border Bottom 1px solid',func:'BdB',css:['.[[el]] {','    border-top-width: 0;','    border-right-width: 0;','    border-bottom-width: 1px;','    border-left-width: 0;','    border-style: solid;','}'],allowArgument:false,type:ACSS_INSTRUCTION_TYPE_helper()},{name:'Border Left 1px solid',func:'BdL',css:['.[[el]] {','    border-top-width: 0;','    border-right-width: 0;','    border-bottom-width: 0;','    border-left-width: 1px;','    border-style: solid;','}'],allowArgument:false,type:ACSS_INSTRUCTION_TYPE_helper()},{name:'Line clamp',func:'LineClamp',css:['.[[el]] {','    -webkit-line-clamp: [0];','    max-height: [1];','    display: -webkit-box;','    -webkit-box-orient: vertical;','    overflow: hidden;','}','@supports (display:-moz-box) {','    .[[el]] {','        display: block;','    }','}','a.[[el]] {','    display: inline-block;','    display: -webkit-box;','    *display: inline;','    zoom: 1;','}','a.[[el]]:after {','    content: ".";','    font-size: 0;','    visibility: hidden;','    display: inline-block;','    overflow: hidden;','    height: 0;','    width: 0;','}'],allowArgument:true,type:ACSS_INSTRUCTION_TYPE_helper()},{name:'Animation',func:'Anim',css:'animation: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Animation delay',func:'Animdel',css:'animation-delay: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Animation direction',func:'Animdir',css:'animation-direction: $',expanders:{a:'alternate',ar:'alternate-reverse',n:'normal',r:'reverse'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Animation duration',func:'Animdur',css:'animation-duration: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Animation fill mode',func:'Animfm',css:'animation-fill-mode: $',expanders:{b:'backwards',bo:'both',f:'forwards',n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Animation iteration count',func:'Animic',css:'animation-iteration-count: $',expanders:{i:'infinite'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Animation name',func:'Animn',css:'animation-name: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Animation play state',func:'Animps',css:'animation-play-state: $',expanders:{p:'paused',r:'running'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Animation timing function',func:'Animtf',css:'animation-timing-function: $',expanders:{e:'ease',ei:'ease-in',eo:'ease-out',eio:'ease-in-out',l:'linear',se:'step-end',ss:'step-start'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Appearance',func:'Ap',css:'appearance: $',expanders:{a:'auto',n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border All Edges',func:'Bda',css:'border: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border X',func:'Bdx',css:['border-left: $','border-right: $'],type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border Y',func:'Bdy',css:['border-top: $','border-bottom: $'],type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border top',func:'Bdt',css:'border-top: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border right',func:'Bdr',css:'border-right: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border bottom',func:'Bdb',css:'border-bottom: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border left',func:'Bdl',css:'border-left: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border color',func:'Bdc',css:'border-color: $',expanders:ACSS_COLOR_ARGUMENTS,type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border top color',func:'Bdtc',css:'border-top-color: $',expanders:ACSS_COLOR_ARGUMENTS,type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border right color',func:'Bdrc',css:'border-right-color: $',expanders:ACSS_COLOR_ARGUMENTS,type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border bottom color',func:'Bdbc',css:'border-bottom-color: $',expanders:ACSS_COLOR_ARGUMENTS,type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border left color',func:'Bdlc',css:'border-left-color: $',expanders:ACSS_COLOR_ARGUMENTS,type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border spacing',func:'Bdsp',css:'border-spacing: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border style',func:'Bds',css:'border-style: $',expanders:{d:'dotted',da:'dashed',do:'double',g:'groove',h:'hidden',i:'inset',n:'none',o:'outset',r:'ridge',s:'solid'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border top style',func:'Bdts',css:'border-top-style: $',expanders:{d:'dotted',da:'dashed',do:'double',g:'groove',h:'hidden',i:'inset',n:'none',o:'outset',r:'ridge',s:'solid'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border right style',func:'Bdrs',css:'border-right-style: $',expanders:{d:'dotted',da:'dashed',do:'double',g:'groove',h:'hidden',i:'inset',n:'none',o:'outset',r:'ridge',s:'solid'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border bottom style',func:'Bdbs',css:'border-bottom-style: $',expanders:{d:'dotted',da:'dashed',do:'double',g:'groove',h:'hidden',i:'inset',n:'none',o:'outset',r:'ridge',s:'solid'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border left style',func:'Bdls',css:'border-left-style: $',expanders:{d:'dotted',da:'dashed',do:'double',g:'groove',h:'hidden',i:'inset',n:'none',o:'outset',r:'ridge',s:'solid'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border width',func:'Bdw',css:'border-width: $',expanders:{m:'medium',t:'thin',th:'thick'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border top width',func:'Bdtw',css:'border-top-width: $',expanders:{m:'medium',t:'thin',th:'thick'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border right width',func:'Bdrw',css:'border-right-width: $',expanders:{m:'medium',t:'thin',th:'thick'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border bottom width',func:'Bdbw',css:'border-bottom-width: $',expanders:{m:'medium',t:'thin',th:'thick'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border left width',func:'Bdlw',css:'border-left-width: $',expanders:{m:'medium',t:'thin',th:'thick'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border radius',func:'Bdrad',css:'border-radius: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border radius top right',func:'Bdradtr',css:'border-top-right-radius: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border radius bottom right',func:'Bdradbr',css:'border-bottom-right-radius: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border radius bottom left',func:'Bdradbl',css:'border-bottom-left-radius: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border radius top left',func:'Bdradtl',css:'border-top-left-radius: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background',func:'Bg',css:'background: $',expanders:{n:'none',t:'transparent'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background image',func:'Bgi',css:'background-image: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background color',func:'Bgc',css:'background-color: $',expanders:ACSS_COLOR_ARGUMENTS,type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background clip',func:'Bgcp',css:'background-clip: $',expanders:{bb:'border-box',cb:'content-box',pb:'padding-box'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background origin',func:'Bgo',css:'background-origin: $',expanders:{bb:'border-box',cb:'content-box',pb:'padding-box'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background size',func:'Bgz',css:'background-size: $',expanders:{a:'auto',ct:'contain',cv:'cover'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background attachment',func:'Bga',css:'background-attachment: $',expanders:{f:'fixed',l:'local',s:'scroll'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background position',func:'Bgp',css:'background-position: $',expanders:{left_t:'left 0',right_t:'right 0',left_b:'left 100%',right_b:'right 100%',left_c:'left center',right_c:'right center',c_b:'center 100%',c_t:'center 0',c:'center'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background position (X axis)',func:'Bgpx',css:'background-position-x: $',expanders:{left:'left',right:'right',c:'50%'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background position (Y axis)',func:'Bgpy',css:'background-position-y: $',expanders:{t:'0',b:'100%',c:'50%'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Background repeat',func:'Bgr',css:'background-repeat: $',expanders:{nr:'no-repeat',rx:'repeat-x',ry:'repeat-y',r:'repeat',s:'space',ro:'round'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Border collapse',func:'Bdcl',css:'border-collapse: $',expanders:{c:'collapse',s:'separate'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Box sizing',func:'Bxz',css:'box-sizing: $',expanders:{cb:'content-box',pb:'padding-box',bb:'border-box'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Box shadow',func:'Bxsh',css:'box-shadow: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Clear',func:'Cl',css:'clear: $',expanders:{n:'none',b:'both'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Color',func:'C',css:'color: $',expanders:ACSS_COLOR_ARGUMENTS,type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Content',func:'Cnt',css:'content: $',expanders:{n:'none',nor:'normal',oq:'open-quote',cq:'close-quote',noq:'no-open-quote',ncq:'no-close-quote'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Cursor',func:'Cur',css:'cursor: $',expanders:{a:'auto',as:'all-scroll',c:'cell',cr:'col-resize',co:'copy',cro:'crosshair',d:'default',er:'e-resize',ewr:'ew-resize',g:'grab',gr:'grabbing',h:'help',m:'move',n:'none',nd:'no-drop',na:'not-allowed',nr:'n-resize',ner:'ne-resize',neswr:'nesw-resize',nwser:'nwse-resize',nsr:'ns-resize',nwr:'nw-resize',p:'pointer',pr:'progress',rr:'row-resize',sr:'s-resize',ser:'se-resize',swr:'sw-resize',t:'text',vt:'vertical-text',w:'wait',wr:'w-resize',zi:'zoom-in',zo:'zoom-out'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Display',func:'D',css:'display: $',expanders:{n:'none',b:'block',f:'flex',if:'inline-flex',i:'inline',ib:'inline-block',tb:'table',tbr:'table-row',tbc:'table-cell',li:'list-item',ri:'run-in',cp:'compact',itb:'inline-table',tbcl:'table-column',tbclg:'table-column-group',tbhg:'table-header-group',tbfg:'table-footer-group',tbrg:'table-row-group'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Filter',func:'Fil',css:'filter: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Blur (filter)',func:'Blur',css:'filter: blur($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Brightness (filter)',func:'Brightness',css:'filter: brightness($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Contrast (filter)',func:'Contrast',css:'filter: contrast($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Drop shadow (filter)',func:'Dropshadow',css:'filter: drop-shadow($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Grayscale (filter)',func:'Grayscale',css:'filter: grayscale($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Hue Rotate (filter)',func:'HueRotate',css:'filter: hue-rotate($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Invert (filter)',func:'Invert',css:'filter: invert($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Opacity (filter)',func:'Opacity',css:'filter: opacity($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Saturate (filter)',func:'Saturate',css:'filter: saturate($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Sepia (filter)',func:'Sepia',css:'filter: sepia($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Flex',func:'Fx',css:'flex: $',expanders:{a:'auto',n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Flex grow',func:'Fxg',css:'flex-grow: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Flex shrink',func:'Fxs',css:'flex-shrink: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Flex basis',func:'Fxb',css:'flex-basis: $',expanders:{a:'auto',n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Align self',func:'As',css:'align-self: $',expanders:{a:'auto',fs:'flex-start',fe:'flex-end',c:'center',b:'baseline',st:'stretch'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Flex direction',func:'Fxd',css:'flex-direction: $',expanders:{r:'row',rr:'row-reverse',c:'column',cr:'column-reverse'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Flex flow',func:'Fxf',css:'flex-flow: $',expanders:{r:'row',rr:'row-reverse',c:'column',cr:'column-reverse',nw:'nowrap',w:'wrap',wr:'wrap-reverse'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Align items',func:'Ai',css:'align-items: $',expanders:{fs:'flex-start',fe:'flex-end',c:'center',b:'baseline',st:'stretch'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Align content',func:'Ac',css:'align-content: $',expanders:{fs:'flex-start',fe:'flex-end',c:'center',sb:'space-between',sa:'space-around',st:'stretch'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Order',func:'Or',css:'order: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Justify content',func:'Jc',css:'justify-content: $',expanders:{fs:'flex-start',fe:'flex-end',c:'center',sb:'space-between',sa:'space-around'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Flex-wrap',func:'Fxw',css:'flex-wrap: $',expanders:{nw:'nowrap',w:'wrap',wr:'wrap-reverse'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Float',func:'Fl',css:'float: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Font family',func:'Ff',css:'font-family: $',expanders:{c:'"Monotype Corsiva", "Comic Sans MS", cursive',f:'Capitals, Impact, fantasy',m:'Monaco, "Courier New", monospace',s:'Georgia, "Times New Roman", serif',ss:'Helvetica, Arial, sans-serif'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Font weight',func:'Fw',css:'font-weight: $',expanders:{b:'bold',br:'bolder',lr:'lighter',n:'normal'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Font size',func:'Fz',css:'font-size: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Font style',func:'Fs',css:'font-style: $',expanders:{n:'normal',i:'italic',o:'oblique'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Font variant',func:'Fv',css:'font-variant: $',expanders:{n:'normal',sc:'small-caps'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Height',func:'H',css:'height: $',expanders:{a:'auto',av:'available',bb:'border-box',cb:'content-box',fc:'fit-content',maxc:'max-content',minc:'min-content'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Hyphens',func:'Hy',css:'hyphens: $',expanders:{a:'auto',n:'normal',m:'manual'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Letter spacing',func:'Lts',css:'letter-spacing: $',expanders:{n:'normal'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'List style type',func:'List',css:'list-style-type: $',expanders:{n:'none',d:'disc',c:'circle',s:'square',dc:'decimal',dclz:'decimal-leading-zero',lr:'lower-roman',lg:'lower-greek',ll:'lower-latin',ur:'upper-roman',ul:'upper-latin',a:'armenian',g:'georgian',la:'lower-alpha',ua:'upper-alpha'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'List style position',func:'Lisp',css:'list-style-position: $',expanders:{i:'inside',o:'outside'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'List style image',func:'Lisi',css:'list-style-image: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Line height',func:'Lh',css:'line-height: $',expanders:{n:'normal'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Margin (all edges)',func:'M',css:'margin: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Margin (X axis)',func:'Mx',css:['margin-left: $','margin-right: $'],expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Margin (Y axis)',func:'My',css:['margin-top: $','margin-bottom: $'],expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Margin top',func:'Mt',css:'margin-top: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Margin right',func:'Mr',css:'margin-right: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Margin bottom',func:'Mb',css:'margin-bottom: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Margin left',func:'Ml',css:'margin-left: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Max height',func:'Mah',css:'max-height: $',expanders:{a:'auto',maxc:'max-content',minc:'min-content',fa:'fill-available',fc:'fit-content'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Max width',func:'Maw',css:'max-width: $',expanders:{n:'none',fa:'fill-available',fc:'fit-content',maxc:'max-content',minc:'min-content'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Min height',func:'Mih',css:'min-height: $',expanders:{a:'auto',fa:'fill-available',fc:'fit-content',maxc:'max-content',minc:'min-content'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Min width',func:'Miw',css:'min-width: $',expanders:{a:'auto',fa:'fill-available',fc:'fit-content',ini:'initial',maxc:'max-content',minc:'min-content'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Outline',func:'O',css:'outline: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Top',func:'T',css:'top: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Right',func:'R',css:'right: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Bottom',func:'B',css:'bottom: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Left',func:'L',css:'left: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Opacity',func:'Op',css:'opacity: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Overflow',func:'Ov',css:'overflow: $',expanders:{a:'auto',h:'hidden',s:'scroll',v:'visible'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Overflow (X axis)',func:'Ovx',css:'overflow-x: $',expanders:{a:'auto',h:'hidden',s:'scroll',v:'visible'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Overflow (Y axis)',func:'Ovy',css:'overflow-y: $',expanders:{a:'auto',h:'hidden',s:'scroll',v:'visible'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Overflow scrolling',func:'Ovs',css:'-webkit-overflow-scrolling: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Padding (all edges)',func:'P',css:'padding: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Padding (X axis)',func:'Px',css:['padding-left: $','padding-right: $'],type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Padding (Y axis)',func:'Py',css:['padding-top: $','padding-bottom: $'],type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Padding top',func:'Pt',css:'padding-top: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Padding right',func:'Pr',css:'padding-right: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Padding bottom',func:'Pb',css:'padding-bottom: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Padding left',func:'Pl',css:'padding-left: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Pointer events',func:'Pe',css:'pointer-events: $',expanders:{a:'auto',f:'fill',n:'none',p:'painted',s:'stroke',v:'visible',vf:'visibleFill',vp:'visiblePainted',vs:'visibleStroke'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Position',func:'Pos',css:'position: $',expanders:{a:'absolute',f:'fixed',r:'relative',s:'static',st:'sticky'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Resize',func:'Rsz',css:'resize: $',expanders:{n:'none',b:'both',h:'horizontal',v:'vertical'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Table layout',func:'Tbl',css:'table-layout: $',expanders:{a:'auto',f:'fixed'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Text align',func:'Ta',css:'text-align: $',expanders:{c:'center',e:'end',j:'justify',mp:'match-parent',s:'start'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Text align last',func:'Tal',css:'text-align-last: $',expanders:{a:'auto',c:'center',e:'end',j:'justify',s:'start'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Text decoration',func:'Td',css:'text-decoration: $',expanders:{lt:'line-through',n:'none',o:'overline',u:'underline'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Text indent',func:'Ti',css:'text-indent: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Text overflow',func:'Tov',css:'text-overflow: $',expanders:{c:'clip',e:'ellipsis'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Text rendering',func:'Tren',css:'text-rendering: $',expanders:{a:'auto',os:'optimizeSpeed',ol:'optimizeLegibility',gp:'geometricPrecision'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Text replace',func:'Tr',css:'text-replace: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Text transform',func:'Tt',css:'text-transform: $',expanders:{n:'none',c:'capitalize',u:'uppercase',l:'lowercase'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Text shadow',func:'Tsh',css:'text-shadow: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Transform',func:'Trf',css:'transform: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Transform origin',func:'Trfo',css:'transform-origin: $',expanders:{t:'top',c:'center'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Transform style',func:'Trfs',css:'transform-style: $',expanders:{f:'flat',p:'preserve-3d'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Perspective',func:'Prs',css:'perspective: $',expanders:{n:'none'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Perspective origin',func:'Prso',css:'perspective-origin: $',expanders:{t:'top',c:'center'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Backface visibility',func:'Bfv',css:'backface-visibility: $',expanders:{h:'hidden',v:'visible'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Matrix (transform)',func:'Matrix',css:'transform: matrix($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Matrix 3d (transform)',func:'Matrix3d',css:'transform: matrix($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Rotate (transform)',func:'Rotate',css:'transform: rotate($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Rotate 3d (transform)',func:'Rotate3d',css:'transform: rotate3d($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'RotateX (transform)',func:'RotateX',css:'transform: rotateX($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'RotateY (transform)',func:'RotateY',css:'transform: rotateY($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'RotateZ (transform)',func:'RotateZ',css:'transform: rotateZ($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Scale (transform)',func:'Scale',css:'transform: scale($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Scale 3d (transform)',func:'Scale3d',css:'transform: scale3d($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'ScaleX (transform)',func:'ScaleX',css:'transform: scaleX($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'ScaleY (transform)',func:'ScaleY',css:'transform: scaleY($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Skew (transform)',func:'Skew',css:'transform: skew($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'SkewX (transform)',func:'SkewX',css:'transform: skewX($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'SkewY (transform)',func:'SkewY',css:'transform: skewY($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Translate (transform)',func:'Translate',css:'transform: translate($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Translate 3d (transform)',func:'Translate3d',css:'transform: translate3d($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Translate X (transform)',func:'TranslateX',css:'transform: translateX($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Translate Y (transform)',func:'TranslateY',css:'transform: translateY($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Translate Z (transform)',func:'TranslateZ',css:'transform: translateZ($)',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Transition',func:'Trs',css:'transition: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Transition delay',func:'Trsde',css:'transition-delay: $',expanders:{i:'initial'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Transition duration',func:'Trsdu',css:'transition-duration: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Transition property',func:'Trsp',css:'transition-property: $',expanders:{a:'all'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Transition timing function',func:'Trstf',css:'transition-timing-function: $',expanders:{e:'ease',ei:'ease-in',eo:'ease-out',eio:'ease-in-out',l:'linear',ss:'step-start',se:'step-end'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'User select',func:'Us',css:'user-select: $',expanders:{a:'all',el:'element',els:'elements',n:'none',t:'text',to:'toggle'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Vertical align',func:'Va',css:'vertical-align: $',expanders:{b:'bottom',bl:'baseline',m:'middle',sub:'sub',sup:'super',t:'top',tb:'text-bottom',tt:'text-top'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Visibility',func:'V',css:'visibility: $',expanders:{v:'visible',h:'hidden',c:'collapse'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'White space',func:'Whs',css:'white-space: $',expanders:{n:'normal',p:'pre',nw:'nowrap',pw:'pre-wrap',pl:'pre-line'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'White space collapse',func:'Whsc',css:'white-space-collapse: $',expanders:{n:'normal',ka:'keep-all',l:'loose',bs:'break-strict',ba:'break-all'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Width',func:'W',css:'width: $',expanders:{a:'auto',bb:'border-box',cb:'content-box',av:'available',minc:'min-content',maxc:'max-content',fc:'fit-content'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Word break',func:'Wob',css:'word-break: $',expanders:{ba:'break-all',ka:'keep-all',n:'normal'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Word wrap',func:'Wow',css:'word-wrap: $',expanders:{bw:'break-word',n:'normal'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Z index',func:'Z',css:'z-index: $',expanders:{a:'auto'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Fill (SVG)',func:'Fill',css:'fill: $',expanders:ACSS_COLOR_ARGUMENTS,type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Stroke (SVG)',func:'Stk',css:'stroke: $',expanders:ACSS_COLOR_ARGUMENTS,type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Stroke width (SVG)',func:'Stkw',css:'stroke-width: $',type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Stroke linecap (SVG)',func:'Stklc',css:'stroke-linecap: $',expanders:{b:'butt',r:'round',s:'square'},type:ACSS_INSTRUCTION_TYPE_rule()},{name:'Stroke linejoin (SVG)',func:'Stklj',css:'stroke-linejoin: $',expanders:{b:'bevel',r:'round',m:'miter'},type:ACSS_INSTRUCTION_TYPE_rule()}];function ACSS_INSTRUCTION_TYPE_rule(){return'RULE';}function ACSS_INSTRUCTION_TYPE_helper(){return'HELPER';}var PSEUDO_CLASSES=[{acssValue:':a',cssValue:':active'},{acssValue:':c',cssValue:':checked'},{acssValue:':d',cssValue:':default'},{acssValue:':di',cssValue:':disabled'},{acssValue:':e',cssValue:':empty'},{acssValue:':en',cssValue:':enabled'},{acssValue:':fi',cssValue:':first'},{acssValue:':fc',cssValue:':first-child'},{acssValue:':fot',cssValue:':first-of-type'},{acssValue:':fs',cssValue:':fullscreen'},{acssValue:':f',cssValue:':focus'},{acssValue:':h',cssValue:':hover'},{acssValue:':ind',cssValue:':indeterminate'},{acssValue:':ir',cssValue:':in-range'},{acssValue:':inv',cssValue:':invalid'},{acssValue:':lc',cssValue:':last-child'},{acssValue:':lot',cssValue:':last-of-type'},{acssValue:':l',cssValue:':left'},{acssValue:':li',cssValue:':link'},{acssValue:':oc',cssValue:':only-child'},{acssValue:':oot',cssValue:':only-of-type'},{acssValue:':o',cssValue:':optional'},{acssValue:':oor',cssValue:':out-of-range'},{acssValue:':ro',cssValue:':read-only'},{acssValue:':rw',cssValue:':read-write'},{acssValue:':req',cssValue:':required'},{acssValue:':r',cssValue:':right'},{acssValue:':rt',cssValue:':root'},{acssValue:':s',cssValue:':scope'},{acssValue:':t',cssValue:':target'},{acssValue:':va',cssValue:':valid'},{acssValue:':vi',cssValue:':visited'}];var PSEUDO_ELEMENTS=[{acssValue:'::b',cssValue:'::before'},{acssValue:'::a',cssValue:'::after'},{acssValue:'::fl',cssValue:'::first-letter'},{acssValue:'::fli',cssValue:'::first-line'},{acssValue:'::ph',cssValue:'::placeholder'}];command=command instanceof RegExp?command.toString().slice(1,-1):command;if(!command||typeof(command)!=='string'){throw new Error('invalidParameter');}var data=(a&&Object.prototype.toString.call(a)==='[object Object]')?a:null;var content=(typeof(a)==='string'||Array.isArray(a))?a:b;var err=BASE_CMD_validate(command);if(err){throw err;}else{return BASE_CMD_process(command,data);}function BASE_CMD_validate(v){return validateAll(v,[BASE_CMD_noSpaceAtStart,BASE_CMD_noSpaceAtEnd,BASE_CMD_noSpaceFollowedByComma,BASE_CMD_noMultipleSpaces,BASE_CMD_noMultipleCommas,BASE_CMD_noMultiplePipes,BASE_CMD_noSpacesAroundPipe,BASE_CMD_noPipeAtEnd,BASE_CMD_noSpaceAfterOpenParen,BASE_CMD_noSpaceBeforeCloseParen]);}function validateAll(str,validations){for(var i=0,l=validations.length;i<l;i++){var err=validations[i](str);if(err){return err;}}return null;}function BASE_CMD_noSpaceAtStart(v){if(REG_BASE_CMD_NO_SPACE_AT_START.test(v)){return new Error('Base command - No space at start.');}return null;}function BASE_CMD_noSpaceAtEnd(v){if(REG_BASE_CMD_NO_SPACE_AT_END.test(v)){return new Error('Base command - No space at end.');}return null;}function BASE_CMD_noSpaceFollowedByComma(v){if(REG_BASE_CMD_NO_SPACE_FOLLOWED_BY_COMMA.test(v)){return new Error('Base command - No space followed by comma.');}return null;}function BASE_CMD_noMultipleSpaces(v){if(REG_BASE_CMD_NO_MULTIPLE_SPACES.test(v)){return new Error('Base command - No multiple spaces.');}return null;}function BASE_CMD_noMultipleCommas(v){if(REG_BASE_CMD_NO_MULTIPLE_COMMAS.test(v)){return new Error('Base command - No multiple commas.');}return null;}function BASE_CMD_noMultiplePipes(v){if(REG_BASE_CMD_NO_MULTIPLE_PIPES.test(v)){return new Error('Base command - No multiple pipes.');}return null;}function BASE_CMD_noSpacesAroundPipe(v){if(REG_BASE_CMD_NO_SPACES_AROUND_PIPE.test(v)){return new Error('Base command - No spaces around pipe.');}return null;}function BASE_CMD_noPipeAtEnd(v){if(REG_BASE_CMD_NO_PIPE_AT_END.test(v)){return new Error('Base command - No pipe at end.');}return null;}function BASE_CMD_noSpaceAfterOpenParen(v){if(REG_BASE_CMD_NO_SPACE_AFTER_OPEN_PAREN.test(v)){return new Error('Base command - No space after open paren.');}return null;}function BASE_CMD_noSpaceBeforeCloseParen(v){if(REG_BASE_CMD_NO_SPACE_BEFORE_CLOSE_PAREN.test(v)){return new Error('Base command - No space before close paren.');}return null;}function BASE_CMD_process(cmd,data){data=BASE_CMD_parse(cmd);return BASE_CMD_generateHTML(data);}function BASE_CMD_parse(cmd){var type=BASE_CMD_GET_TYPE(cmd);if(type===BASE_CMD_TYPE_HTML_METATAG()||type===BASE_CMD_TYPE_HTML_BODYTAG()){cmd=BASE_CMD_parseTriple(type,cmd);var err=HTML_SELECTOR_INSTRUCTION_STRING_validate(type,cmd.htmlSelectorInstructionString);if(err){throw err;}var selector=HTML_SELECTOR_INSTRUCTION_STRING_parse(type,cmd.htmlSelectorInstructionString);var attributes=[];if(cmd.htmlAttributesInstructionsString){err=HTML_ATTRIBUTES_INSTRUCTIONS_STRING_validate(cmd.htmlAttributesInstructionsString);if(err){throw err;}attributes=HTML_ATTRIBUTES_INSTRUCTIONS_STRING_parse(selector.tag,cmd.htmlAttributesInstructionsString);}var acss=ACSS_compose(null,[]);if(cmd.acssInstructionsString){err=ACSS_INSTRUCTIONS_STRING_validate(cmd.acssInstructionsString);if(err){throw err;}var styleID=genStyleID();acss=ACSS_INSTRUCTIONS_STRING_parse(styleID,cmd.acssInstructionsString);selector.classes.unshift(styleID);}return BASE_CMD_compose(selector,attributes,acss);}else{throw new Error('Unsupported command type.');}}function BASE_CMD_GET_TYPE(cmd){if(REG_BASE_CMD_IS_METATAG.test(cmd)){return BASE_CMD_TYPE_HTML_METATAG();}else if(REG_BASE_CMD_IS_BODYTAG.test(cmd)){return BASE_CMD_TYPE_HTML_BODYTAG();}else{return null;}}function BASE_CMD_TYPE_HTML_METATAG(){return'HTML_METATAG_CMD';}function BASE_CMD_TYPE_HTML_BODYTAG(){return'HTML_BODYTAG_CMD';}function BASE_CMD_parseTriple(type,cmd){cmd=cmd.split(REG_BASE_CMD_SPLIT_BY_PIPE);if(!Array.isArray(cmd)||cmd.length===0){throw new Error('Base command - Unable to parse triple.');}if(type===BASE_CMD_TYPE_HTML_METATAG()){if(cmd.length>2){throw new Error('Base command - Max 1 pipe separator.');}}else{if(cmd.length>3){throw new Error('Base command - Max 2 pipe separators.');}}var htmlSelectorInstructionString=cmd[0];if(!htmlSelectorInstructionString){throw new Error('Base command - Missing <html-selector>.');}var htmlAttributesInstructionsString=null;var acssInstructionsString=null;if(cmd.length===3){if(cmd[1]&&REG_BASE_CMD_IS_PROBABLY_HTML_ATTRIBUTES_INSTRUCTIONS_STRING.test(cmd[1])){htmlAttributesInstructionsString=cmd[1];}else{throw new Error('Base command - Missing or invalid <html-attributes>.');}if(cmd[2]&&REG_BASE_CMD_IS_PROBABLY_ACSS_INSTUCTIONS_STRING.test(cmd[2])){acssInstructionsString=cmd[2];}else{throw new Error('Base command - Missing or invalid <acss>.');}}else{if(cmd.length===2){if(cmd[1]){if(REG_BASE_CMD_IS_PROBABLY_HTML_ATTRIBUTES_INSTRUCTIONS_STRING.test(cmd[1])){htmlAttributesInstructionsString=cmd[1];}else if(REG_BASE_CMD_IS_PROBABLY_ACSS_INSTUCTIONS_STRING.test(cmd[1])){acssInstructionsString=cmd[1];}else{throw new Error('Base command - Unable to classify command at [1].');}}else{throw new Error('Base command - Unable to classify command at [1].');}}}if(type===BASE_CMD_TYPE_HTML_METATAG()){if(acssInstructionsString){throw new Error('Base command - Metatag command must not define <acss>.');}}return BASE_CMD_composeTripleObject(type,htmlSelectorInstructionString,htmlAttributesInstructionsString,acssInstructionsString);}function BASE_CMD_composeTripleObject(type,htmlSelectorInstructionString,htmlAttributesInstructionsString,acssInstructionsString){return{type:type,htmlSelectorInstructionString:htmlSelectorInstructionString,htmlAttributesInstructionsString:htmlAttributesInstructionsString,acssInstructionsString:acssInstructionsString};}function HTML_SELECTOR_INSTRUCTION_STRING_validate(type,instructionString){if(type===BASE_CMD_TYPE_HTML_METATAG()){return HTML_SELECTOR_INSTRUCTION_STRING_metaTagValidate(instructionString);}else if(type===BASE_CMD_TYPE_HTML_BODYTAG()){return HTML_SELECTOR_INSTRUCTION_STRING_bodyTagValidate(instructionString);}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_metaTagValidate(firstPartOfCMD){return validateAll(firstPartOfCMD,[HTML_SELECTOR_INSTRUCTION_STRING_noSpaces,HTML_SELECTOR_INSTRUCTION_STRING_noUnallowedMetaTagChar]);}function HTML_SELECTOR_INSTRUCTION_STRING_bodyTagValidate(firstPartOfCMD){return validateAll(firstPartOfCMD,[HTML_SELECTOR_INSTRUCTION_STRING_noSpaces,HTML_SELECTOR_INSTRUCTION_STRING_noUnallowedBodyTagChar,HTML_SELECTOR_INSTRUCTION_STRING_noMultipleDots,HTML_SELECTOR_INSTRUCTION_STRING_noMultipleHashes,HTML_SELECTOR_INSTRUCTION_STRING_noDotAtEnd,HTML_SELECTOR_INSTRUCTION_STRING_noHashAtEnd,HTML_SELECTOR_INSTRUCTION_STRING_noHashFollowedByDot,HTML_SELECTOR_INSTRUCTION_STRING_noDotFollowedByHash,HTML_SELECTOR_INSTRUCTION_STRING_noNameSeparatorAtBoundary]);}function HTML_SELECTOR_INSTRUCTION_STRING_noSpaces(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_SPACES.test(v)){return new Error('HTML selector instruction string - No spaces.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_noUnallowedMetaTagChar(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_UNALLOWED_METATAG_CHAR.test(v)){return new Error('HTML selector instruction string - No unallowed character.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_noUnallowedBodyTagChar(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_UNALLOWED_BODYTAG_CHAR.test(v)){return new Error('HTML selector instruction string - No unallowed character.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_noMultipleDots(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_MULTIPLE_DOTS.test(v)){return new Error('HTML selector instruction string - No multiple dots.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_noMultipleHashes(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_MULTIPLE_HASHES.test(v)){return new Error('HTML selector instruction string - No multiple hashes.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_noDotAtEnd(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_DOT_AT_END.test(v)){return new Error('HTML selector instruction string - No dot at end.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_noHashAtEnd(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_HASH_AT_END.test(v)){return new Error('HTML selector instruction string - No hash at end.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_noHashFollowedByDot(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_HASH_FOLLOWED_BY_DOT.test(v)){return new Error('HTML selector instruction string - No hash followed by dot.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_noDotFollowedByHash(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_DOT_FOLLOWED_BY_HASH.test(v)){return new Error('HTML selector instruction string - No dot followed by hash.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_noNameSeparatorAtBoundary(v){if(REG_HTML_SELECTOR_INSTRUCTION_STRING_NO_NAME_SEPARATOR_AT_BOUNDARY.test(v)){return new Error('HTML selector instruction string - No name separator at boundary.');}return null;}function HTML_SELECTOR_INSTRUCTION_STRING_parse(type,instructionString){var components=instructionString.match(REG_HTML_SELECTOR_INSTRUCTION_STRING_MATCH_COMPONENTS);var tag=null;var id=null;var classes=[];for(var i=0,l=components.length;i<l;i++){var component=components[i];if(component){if(i>0){var ch=component[0];if(ch==='.'){classes.push(component.slice(1));}else if(ch==='#'){if(classes.length>0){throw new Error('HTML selector instruction string - No invalid order.');}if(id){throw new Error('HTML selector instruction string - No multiple IDs. ');}id=component.slice(1);}}else{tag=component;if(!tag){throw new Error('Unable to parse HTML selector tag.');}if(!HTML_TEMPLATES[tag]){throw new Error('Missing template for "'+tag+'" tag.');}else{if(HTML_TEMPLATES[tag].indexOf('[[content]]')===-1){if(content!==undefined){throw new Error('Unexpected content for "'+tag+'" tag.');}}else{content=content==null?'':content;if(typeof(content)!=='string'&&!Array.isArray(content)){throw new Error('Unexpected content for "'+tag+'" tag.');}content=Array.isArray(content)?content.join(''):content;}}}}}return HTML_SELECTOR_INSTRUCTION_compose(tag,id,classes);}function HTML_SELECTOR_INSTRUCTION_compose(tag,id,classes){return{tag:tag,id:id,classes:classes};}function HTML_ATTRIBUTES_INSTRUCTIONS_STRING_validate(instructionsString){return validateAll(instructionsString,[HTML_ATTRIBUTES_INSTRUCTIONS_STRING_noMissingSpaceBetweenInstructions]);}function HTML_ATTRIBUTES_INSTRUCTIONS_STRING_noMissingSpaceBetweenInstructions(v){if(REG_HTML_ATTRIBUTES_INSTRUCTIONS_STRING_NO_MISSING_SPACE_BETWEEN_INSTRUCTIONS.test(v)){return new Error('HTML attributes instructions string - No missing space between instructions.');}return null;}function HTML_ATTRIBUTES_INSTRUCTIONS_STRING_parse(htmlSelectorTag,instructionsString){var allowedHTMLAttributes=HTML_ATTRIBUTES[htmlSelectorTag]||[];var instructionStrings=instructionsString.match(REG_HTML_ATTRIBUTES_INSTRUCTIONS_STRING_MATCH_INSTRUCTION_STRINGS);if(!instructionStrings){throw new Error('HTML attributes instructions string - Unable to match any instruction string.');}var attributes=[];var unordered=false;for(var i=0,l=instructionStrings.length;i<l;i++){var instructionString=instructionStrings[i];var attribute=HTML_ATTRIBUTES_INSTRUCTION_STRING_parse(instructionString,allowedHTMLAttributes,htmlSelectorTag);if(i>0){var va=attribute.score;var vb=attributes[attributes.length-1].score;if(va<vb){unordered=true;}else if(va===vb){throw new Error('HTML attributes instructions string - Duplicate instructions.');}}attributes.push(attribute);}if(unordered){throw HTML_ATTRIBUTES_INSTRUCTIONS_STRING_composeOrderError(attributes);}return attributes;}function HTML_ATTRIBUTES_INSTRUCTION_STRING_parse(instructionString,allowedHTMLAttributes,htmlSelectorTag){var components=instructionString.match(REG_HTML_ATTRIBUTES_INSTRUCTION_STRING_MATCH_COMPONENTS);if(!components){throw new Error('HTML attributes instruction string - Instruction must follow <Attribute>(<value>?) syntax.');}var i=arrFindIndex(allowedHTMLAttributes,'func',components[1]);if(i===-1){throw new Error('Unsupported HTML attribute "'+components[1]+'" for "'+htmlSelectorTag+'" tag.');}var htmlAttribute=allowedHTMLAttributes[i];var err=HTML_ATTRIBUTES_INSTRUCTION_VALUE_validate(htmlAttribute,components[2]);if(err){throw err;}var instructionValue=components[2]||'';var score=i;return HTML_ATTRIBUTES_INSTRUCTION_compose(instructionString,htmlAttribute,instructionValue,score);}function HTML_ATTRIBUTES_INSTRUCTION_VALUE_validate(htmlAttribute,v){if(!htmlAttribute.allowArgument&&v){return new Error('HTML attributes instruction string - Instruction "'+htmlAttribute.func+'" must not define parameter.');}var arr=[HTML_ATTRIBUTES_INSTRUCTION_VALUE_noUnallowedChar];if(htmlAttribute.noMissingSpaceAfterComma){arr.push(HTML_ATTRIBUTES_INSTRUCTION_VALUE_noMissingSpaceAfterComma);}return validateAll(v,arr);}function HTML_ATTRIBUTES_INSTRUCTION_VALUE_noUnallowedChar(v){if(REG_HTML_ATTRIBUTES_INSTRUCTION_VALUE_NO_UNALLOWED_CHAR.test(v)){return new Error('HTML attributes instruction value - No unallowed char.');}return null;}function HTML_ATTRIBUTES_INSTRUCTION_VALUE_noMissingSpaceAfterComma(v){if(REG_HTML_ATTRIBUTES_INSTRUCTION_VALUE_NO_MISSING_SPACE_AFTER_COMMA.test(v)){return new Error('HTML attributes instruction value - No missing space after comma.');}return null;}function HTML_ATTRIBUTES_INSTRUCTION_compose(instructionString,htmlAttribute,instructionValue,score){return extend(clone(htmlAttribute),{instructionString:instructionString,instructionValue:instructionValue,score:score});}function HTML_ATTRIBUTES_INSTRUCTIONS_STRING_composeOrderError(attributes){var arr=arrSortByNumberASC(clone(attributes),'score');var ba=[];var bb=[];for(var i=0,l=arr.length;i<l;i++){var va=attributes[i].instructionString;if(va){ba.push(va);}var vb=arr[i].instructionString;if(vb){bb.push(vb);}}ba=ba.join(' ');bb=bb.join(' ');var msg='HTML attributes instructions string - ';msg+=(ba&&bb)?('Found "'+ba+'" expected "'+bb+'".'):'Invalid instructions order.';return new Error(msg);}function ACSS_INSTRUCTIONS_STRING_validate(instructionsString){return validateAll(instructionsString,[ACSS_INSTRUCTIONS_STRING_noMissingSpaceBetweenInstructions]);}function ACSS_INSTRUCTIONS_STRING_noMissingSpaceBetweenInstructions(v){if(REG_ACSS_INSTRUCTIONS_STRING_NO_MISSING_SPACE_BETWEEN_INSTRUCTIONS.test(v)){return new Error('ACSS instructions string - No missing space between instructions.');}return null;}function ACSS_INSTRUCTIONS_STRING_parse(styleID,instructionsString){var instructionStrings=instructionsString.match(REG_ACSS_INSTRUCTIONS_STRING_MATCH_INSTRUCTION_STRINGS);if(!instructionStrings){throw new Error('ACSS instructions string - Unable to match any instruction string.');}var scores=[];var rules=[];var unordered=false;for(var i=0,l=instructionStrings.length;i<l;i++){var instructionString=instructionStrings[i];var rule=ACSS_INSTRUCTION_STRING_parse(instructionString);var score=ACSS_INSTRUCTION_composeInstructionScore(instructionString,rule.score,rule.pseudoScore,rule.mediaValue);if(i>0){var va=score.score;var vb=scores[scores.length-1].score;if(va<vb){unordered=true;}else if(va===vb){throw new Error('ACSS instructions string - Duplicate ACSS instructions.');}}scores.push(score);rules.push(rule);}if(unordered){throw ACSS_INSTRUCTIONS_STRING_composeOrderError(scores);}return ACSS_compose(styleID,rules);}function ACSS_INSTRUCTION_STRING_parse(instructionString){var components=instructionString.match(REG_ACSS_INSTRUCTION_STRING_MATCH_COMPONENTS);if(!components){throw new Error('ACSS instruction string - Instruction must follow <Style>[(<value>,<value>?,...)][<!>][:<pseudo-class>][::<pseudo-element>][@<breakpoint-identifier>]');}var i=arrFindIndex(ACSS_RULES,'func',components[1]);if(i===-1){throw new Error('Unsupported ACSS rule "'+components[1]+'".');}var score=i+1;var acssRule=ACSS_RULES[i];var err=ACSS_INSTRUCTION_VALUE_validate(acssRule,components[2]);if(err){throw err;}if(acssRule.type===ACSS_INSTRUCTION_TYPE_rule()){return ACSS_INSTRUCTION_STRING_parseRule(acssRule,score,components);}else if(acssRule.type===ACSS_INSTRUCTION_TYPE_helper()){return ACSS_INSTRUCTION_STRING_parseHelper(acssRule,score,components);}else{throw new Error('ACSS config - Missing "type".');}}function ACSS_INSTRUCTION_VALUE_validate(acssRule,v){if(acssRule.type===ACSS_INSTRUCTION_TYPE_helper()){if(!acssRule.allowArgument&&v){return new Error('ACSS instruction value - Instruction "'+acssRule.func+'" must not define parameter."');}}return ACSS_INSTRUCTION_VALUE_noMissingSpaceAfterComma(v);}function ACSS_INSTRUCTION_VALUE_noMissingSpaceAfterComma(v){v=v.replace(REG_ACSS_INSTRUCTION_VALUE_NO_MISSING_SPACE_AFTER_COMMA_SKIP,'');if(REG_ACSS_INSTRUCTION_VALUE_NO_MISSING_SPACE_AFTER_COMMA.test(v)){return new Error('ACSS instruction value - No missing space after comma.');}return null;}function ACSS_INSTRUCTION_STRING_parseRule(acssRule,score,components){var arg=ACSS_INSTRUCTION_VALUE_transform(acssRule,components[2]);var important=components[3]==='!';var pseudoClasses=ACSS_PSEUDO_CLASSES_STRING_parse(components[4]);var pseudoElements=ACSS_PSEUDO_ELEMENTS_STRING_parse(components[5]);if(Array.isArray(pseudoClasses.array)&&pseudoClasses.array.length>0&&Array.isArray(pseudoElements.array)&&pseudoElements.array.length>0){throw new Error('ACSS instruction string - Define either "pseudo classes" or "pseudo elements" exclusively.');}var pseudoScore=pseudoClasses.score||pseudoElements.score;var mediaValue=ACSS_MEDIA_STRING_parse(components[6]);return ACSS_INSTRUCTION_composeRule(acssRule,score,arg,important,pseudoClasses.array,pseudoElements.array,pseudoScore,mediaValue);}function ACSS_INSTRUCTION_VALUE_transform(acssRule,instructionValue){instructionValue=instructionValue.replace(REG_ACSS_INSTRUCTION_VALUE_BRACKETS[0],'(');instructionValue=instructionValue.replace(REG_ACSS_INSTRUCTION_VALUE_BRACKETS[1],')');instructionValue=ACSS_INSTRUCTION_VALUE_transformColors(instructionValue);instructionValue=ACSS_INSTRUCTION_VALUE_transformByExpanders(acssRule,instructionValue);return instructionValue;}function ACSS_INSTRUCTION_VALUE_transformColors(instructionValue){var m=null;while(m=REG_ACSS_INSTRUCTION_VALUE_MATCH_NEXT_COLOR.exec(instructionValue)){if(Array.isArray(m)&&m.length>0){var i=m.index+m[1].length;var j=i+1+m[2].length+m[3].length;var color=ACSS_INSTRUCTION_STRING_transformColor(m[2],m[3]);instructionValue=instructionValue.slice(0,i)+color+instructionValue.slice(j);m.lastIndex=j;}}return instructionValue;}function ACSS_INSTRUCTION_VALUE_transformByExpanders(acssRule,instructionValue){if(!acssRule.expanders||typeof(acssRule.expanders)!=='object'){return instructionValue;}for(var k in acssRule.expanders){if(acssRule.expanders.hasOwnProperty(k)){var exp=new RegExp('(^|\\s)('+k+')(\\s|$)','g');var m=null;while(m=exp.exec(instructionValue)){if(Array.isArray(m)&&m.length>0){var i=m.index+m[1].length;var j=i+m[2].length;instructionValue=instructionValue.slice(0,i)+acssRule.expanders[k]+instructionValue.slice(j);}}}}return instructionValue;}function ACSS_INSTRUCTION_STRING_transformColor(hexString,opacityString){var err=ACSS_COLOR_HEX_validate(hexString);if(err){throw err;}var rgb=ACSS_COLOR_HEX_parse(hexString);var a=ACSS_COLOR_OPACITY_parse(opacityString);return'rgba('+rgb.r+','+rgb.g+','+rgb.b+','+a+')';}function ACSS_COLOR_HEX_validate(hexString){return validateAll(hexString,[ACSS_COLOR_HEX_noLowercasedLetter,ACSS_COLOR_HEX_noInvalidHexValue,ACSS_COLOR_HEX_noInvalidLength]);}function ACSS_COLOR_HEX_noLowercasedLetter(v){if(REG_ACSS_COLOR_HEX_NO_LOWERCASED_LETTER.test(v)){return new Error('ACSS color hex - No lowercased letter.');}return null;}function ACSS_COLOR_HEX_noInvalidHexValue(v){if(REG_ACSS_COLOR_HEX_NO_INVALID_HEX_VALUE.test(v)){return new Error('ACSS color hex - No invalid hex value.');}return null;}function ACSS_COLOR_HEX_noInvalidLength(v){if(v.length!==6){return new Error('ACSS color hex - No invalid length.');}return null;}function ACSS_COLOR_HEX_parse(hexString){var m=hexString.match(REG_ACSS_COLOR_HEX_TO_RGB);if(!m){throw new Error('ACSS color hex - Unable to parse.');}var r=parseInt(m[1],16);var g=parseInt(m[2],16);var b=parseInt(m[3],16);return ACSS_COLOR_RGB_compose(r,g,b);}function ACSS_COLOR_RGB_compose(r,g,b){return{r:r,g:g,b:b};}function ACSS_COLOR_OPACITY_parse(opacityString){if(typeof(opacityString)==='string'&&opacityString.length>0){if(opacityString[0]!=='.'){throw new Error('ACSS color opacity - Unable to parse opacity.');}opacityString='0'+opacityString;var v=parseFloat(opacityString);if(isNaN(v)||(''+v).length!==opacityString.length||v<0||v>1){throw new Error('ACSS color opacity - Unable to parse opacity.');}if(opacityString.length>4){throw new Error('ACSS color opacity - Max precision 0.01 exceeded.');}return v;}return 100;}function ACSS_PSEUDO_CLASSES_STRING_parse(pseudoClassesString){var pseudoClassStrings=pseudoClassesString.match(REG_ACSS_MATCH_PSEUDO_CLASSES);if(!Array.isArray(pseudoClassStrings)||pseudoClassStrings.length===0){return ACSS_PSEUDO_CLASSES_compose([],0);}var totalScore=0;var scores=[];var pseudoClasses=[];var unordered=false;for(var i=0,l=pseudoClassStrings.length;i<l;i++){var pseudoClassString=pseudoClassStrings[i];var j=arrFindIndex(PSEUDO_CLASSES,'acssValue',pseudoClassString);if(j===-1){throw new Error('ACSS pseudo classes string - Unsupported class: "'+pseudoClassString+'".');}var score=j+1;totalScore+=score;if(i>0){var va=score;var vb=scores[scores.length-1];if(va<vb){unordered=true;}else if(va===vb){throw new Error('ACSS pseudo classes string - Duplicate pseudo classes.');}}scores.push(score);pseudoClasses.push(PSEUDO_CLASSES[j].cssValue);}if(unordered){throw ACSS_PSEUDO_CLASSES_STRING_composeOrderError(scores);}return ACSS_PSEUDO_CLASSES_compose(pseudoClasses,totalScore);}function ACSS_PSEUDO_CLASSES_STRING_composeOrderError(scores){var arr=arrSortByNumberASC(clone(scores));var ba=[];var bb=[];for(var i=0,l=arr.length;i<l;i++){var va=PSEUDO_CLASSES[scores[i]-1].acssValue;if(va){ba.push(va);}var vb=PSEUDO_CLASSES[arr[i]-1].acssValue;if(vb){bb.push(vb);}}ba=ba.join('');bb=bb.join('');var msg='ACSS pseudo classes string - ';msg+=(ba&&bb)?('Found "'+ba+'" expected "'+bb+'".'):'Invalid pseudo classes order.';return new Error(msg);}function ACSS_PSEUDO_CLASSES_compose(pseudoClasses,score){return{array:pseudoClasses,score:score};}function ACSS_PSEUDO_ELEMENTS_STRING_parse(pseudoElementsString){var pseudoElementStrings=pseudoElementsString.match(REG_ACSS_MATCH_PSEUDO_ELEMENTS);if(!Array.isArray(pseudoElementStrings)||pseudoElementStrings.length===0){return ACSS_PSEUDO_ELEMENTS_compose([],0);}var totalScore=0;var scores=[];var pseudoElements=[];var unordered=false;for(var i=0,l=pseudoElementStrings.length;i<l;i++){var pseudoElementString=pseudoElementStrings[i];var j=arrFindIndex(PSEUDO_ELEMENTS,'acssValue',pseudoElementString);if(j===-1){throw new Error('ACSS pseudo elements string - Unsupported element: "'+pseudoElementString+'".');}var score=PSEUDO_CLASSES.length+j+1;totalScore+=score;if(i>0){var va=score;var vb=scores[scores.length-1];if(va<vb){unordered=true;}else if(va===vb){throw new Error('ACSS pseudo elements string - Duplicate pseudo elements.');}}scores.push(score);pseudoElements.push(PSEUDO_ELEMENTS[j].cssValue);}if(unordered){throw ACSS_PSEUDO_ELEMENTS_STRING_composeOrderError(scores);}return ACSS_PSEUDO_ELEMENTS_compose(pseudoElements,totalScore);}function ACSS_PSEUDO_ELEMENTS_STRING_composeOrderError(scores){var arr=arrSortByNumberASC(clone(scores));var ba=[];var bb=[];for(var i=0,l=arr.length;i<l;i++){var va=PSEUDO_ELEMENTS[scores[i]-1].acssValue;if(va){ba.push(va);}var vb=PSEUDO_ELEMENTS[arr[i]-1].acssValue;if(vb){bb.push(vb);}}ba=ba.join('');bb=bb.join('');var msg='ACSS pseudo elements string - ';msg+=(ba&&bb)?('Found "'+ba+'" expected "'+bb+'".'):'Invalid pseudo elements order.';return new Error(msg);}function ACSS_PSEUDO_ELEMENTS_compose(pseudoElements,score){return{array:pseudoElements,score:score};}function ACSS_MEDIA_STRING_parse(mediaString){if(!mediaString){return 0;}var mediaValue=parseInt(mediaString.slice(1));if(isNaN(mediaValue)||mediaValue<=0||mediaValue>9000){throw new Error('ACSS instruction string - Media query value must be in range 0..9000.');}return mediaValue;}function ACSS_INSTRUCTION_composeRule(acssRule,score,arg,important,pseudoClasses,pseudoElements,pseudoScore,mediaValue){return{acssRule:acssRule,score:score,arg:arg,important:important,pseudoClasses:pseudoClasses,pseudoElements:pseudoElements,pseudoScore:pseudoScore,mediaValue:mediaValue};}function ACSS_INSTRUCTION_STRING_parseHelper(acssHelper,score,components){if(components[3]||components[4]||components[5]||components[6]){throw new Error('ACSS instruction string - Helper must follow <Helper> syntax.');}var args=components[2].split(/\s*,\s*/);args=!args[0]?[]:args;var expected=[];var tmp=acssHelper.css.join('').match(/\[\d+\]/g)||[];for(var i=0,l=tmp.length;i<l;i++){if(expected.indexOf(tmp[i])===-1){expected.push(tmp[i]);}}if(expected.length!==args.length){throw new Error('ACSS instruction string - Passed '+args.length+' argument(s), expected '+expected.length+' for "'+acssHelper.func+'" helper.');}return ACSS_INSTRUCTION_composeHelper(acssHelper,score,args);}function ACSS_INSTRUCTION_composeHelper(acssHelper,score,args){return{acssHelper:acssHelper,score:score,args:args,pseudoScore:0,mediaValue:0};}function ACSS_INSTRUCTION_composeInstructionScore(instructionString,ruleScore,pseudoScore,mediaValue){return{instructionString:instructionString,score:parseInt('10'+padStart(''+(mediaValue+1),4,'0')+padStart(''+ruleScore,4,'0')+padStart(''+pseudoScore,3,'0'))};}function ACSS_INSTRUCTIONS_STRING_composeOrderError(scores){var arr=arrSortByNumberASC(clone(scores),'score');var ba=[];var bb=[];for(var i=0,len=arr.length;i<len;i++){var va=scores[i].instructionString;if(va){ba.push(va);}var vb=arr[i].instructionString;if(vb){bb.push(vb);}}ba=ba.join(' ');bb=bb.join(' ');var msg='ACSS instructions string - ';msg+=(ba&&bb)?('Found "'+ba+'" expected "'+bb+'".'):'Invalid ACSS instructions order.';return new Error(msg);}function ACSS_compose(styleID,rules){return{styleID:styleID,rules:rules};}function BASE_CMD_compose(selector,attributes,acss){return{selector:selector,attributes:attributes,acss:acss};}function BASE_CMD_generateHTML(data){var css=strTrim([BASE_CMD_generateElementStylesByHelpers(data.acss),BASE_CMD_generateElementStylesByRules(data.acss)].join('\n'));if(css.length>0){return[('<style>\n    '+css.replace(/\n/g,'\n    ')+'\n</style>'),BASE_CMD_generateElementHTMLStructure(data.selector,data.attributes)].join('');}return BASE_CMD_generateElementHTMLStructure(data.selector,data.attributes);}function BASE_CMD_generateElementStylesByHelpers(acss){var b=[];for(var i=0,l=acss.rules.length;i<l;i++){var rule=acss.rules[i];if(rule&&rule.acssHelper){var tmp=[];for(var j=0,len=rule.acssHelper.css.length;j<len;j++){var line=rule.acssHelper.css[j]+(j===0?ACSS_COMMENT_TEMPLATE.replace('$','HELPERS'):'');tmp.push(line);}tmp=tmp.join('\n');tmp=tmp.replace(/\[\[el\]\]/g,acss.styleID);tmp=strFormatBySingleBrackets(tmp,rule.args);b=b.concat([tmp]);}}return b.join('\n');}function BASE_CMD_generateElementStylesByRules(acss){var media=ACSS_RULES_mergeBySelector(ACSS_RULES_groupByMedia(ACSS_RULES_filterAndTransform(acss)));var l=media.length;var css=[];while(l--){var rules=media.shift();if(rules.length===0){continue;}var b=[];for(var i=0,len=rules.length;i<len;i++){var rule=rules[i];b=b.concat([rule.selector+' {\n    '+rule.css.replace(/\n/g,'\n    ')+'\n}']);}b=b.join('\n');var mediaValue=rules[0].mediaValue;if(mediaValue>0){b='@media (min-width: '+mediaValue+'px) {\n    '+b.replace(/\n/g,'\n    ')+'\n}';}css.push(b);}css=css.join('\n');css=css.replace('\n',(ACSS_COMMENT_TEMPLATE.replace('$','RULES')+'\n'));return css;}function ACSS_RULES_mergeBySelector(media){var len=media.length;var newMedia=[];while(len--){var i;var l;var rules=media.shift();var rule=null;var uniqueSelectors=[];for(i=0,l=rules.length;i<l;i++){rule=rules[i];if(uniqueSelectors.indexOf(rule.selector)===-1){uniqueSelectors.push(rule.selector);}}var group=[];for(i=0,l=uniqueSelectors.length;i<l;i++){var merged=ACSS_TRANSFORMED_RULE_compose(rules[0].mediaValue,uniqueSelectors[i],[]);for(var j=0,lenlen=rules.length;j<lenlen;j++){rule=rules[j];if(rule&&rule.selector===merged.selector){merged.css.push(rule.css);}}merged.css=merged.css.join('\n');if(strTrim(merged.css).length>0){group.push(merged);}}if(group.length>0){newMedia.push(group);}}return newMedia;}function ACSS_RULES_groupByMedia(rules){var media=[];var group=[];for(var i=0,l=rules.length;i<l;i++){var rule=rules[i];var last=rules[i-1];if(i===0||(last&&last.mediaValue===rule.mediaValue)){group.push(rule);}if(last&&last.mediaValue!==rule.mediaValue){media.push(group);group=[rule];}if(i===l-1){media.push(group);}}return media;}function ACSS_RULES_filterAndTransform(acss){var rules=[];for(var i=0,l=acss.rules.length;i<l;i++){var rule=acss.rules[i];if(rule&&rule.acssRule){rules.push(ACSS_RULE_transform(acss,rule));}}return rules;}function ACSS_RULE_transform(acss,rule){var css=Array.isArray(rule.acssRule.css)?rule.acssRule.css:[rule.acssRule.css];for(var i=0,l=css.length;i<l;i++){if(rule.important){css[i]+='!important';}css[i]=cssPROPERTY(css[i]);}css=css.join('\n');css=css.replace(/\$/g,rule.arg);var selector='.'+acss.styleID+rule.pseudoClasses.join('')+rule.pseudoElements.join('');return ACSS_TRANSFORMED_RULE_compose(rule.mediaValue,selector,css);}function ACSS_TRANSFORMED_RULE_compose(mediaValue,selector,css){return{mediaValue:mediaValue,selector:selector,css:css};}function BASE_CMD_generateElementHTMLStructure(selector,attributes){var html=HTML_TEMPLATES[selector.tag];var modifiers=[];if(selector.id){modifiers=modifiers.concat(['id="'+selector.id+'"']);}if(Array.isArray(selector.classes)&&selector.classes.length>0){modifiers=modifiers.concat(['class="'+selector.classes.join(' ')+'"']);}if(Array.isArray(attributes)&&attributes.length>0){var tmp=[];for(var i=0,l=attributes.length;i<l;i++){var attribute=attributes[i];if(attribute&&attribute.html){tmp=tmp.concat(attribute.html.indexOf('$')>=0?[attribute.html.replace('$','"'+attribute.instructionValue+'"')]:[attribute.html]);}}if(tmp.length>0){modifiers=modifiers.concat(tmp.join(' '));}}if(data&&typeof(data)==='object'){for(var k in data){if(data.hasOwnProperty(k)){modifiers=modifiers.concat(['data-'+k+"='"+JSON.stringify(data[k])+"'"]);}}}modifiers=modifiers.length===0?'':(' '+modifiers.join(' '));html=html.replace('[[modifiers]]',modifiers);html=html.replace('[[content]]',content);return html;}function cssPROPERTY(kv){var autovendor=['filter','appearance','column-count','column-gap','column-rule','display','transform','transform-style','transform-origin','transition','user-select','animation','perspective','animation-name','animation-duration','animation-timing-function','animation-delay','animation-iteration-count','animation-direction','animation-play-state','opacity','background','background-image','font-smoothing','text-size-adjust','backface-visibility','box-sizing','overflow-scrolling'];kv=kv.replace(/\s{2,}/g,' ');kv=kv[kv.length-1]===';'?kv.slice(0,-1):kv;kv=kv.split(/\s*:\s*/);var k=kv[0];var v=kv[1];var sep=': ';var del=';';if(k&&v){if(autovendor.indexOf(k)===-1){return k+sep+v+del;}else{var rows=[k+sep+v];if(k==='opacity'){var opacity=+(v.replace(/\s/g,''));if(isNaN(opacity)){return'';}rows.push('filter'+sep+'alpha(opacity='+Math.floor(opacity*100)+')');}else if(k==='font-smoothing'){rows.push('-webkit-'+k+sep+v);rows.push('-moz-osx-'+k+sep+v);}else if(k==='background'||k==='background-image'){var g='-gradient';if(v.indexOf('linear'+g)>=0||v.indexOf('radial'+g)>=0){rows.push('-webkit-'+k+sep+v);rows.push('-moz-'+k+sep+v);rows.push('-ms-'+k+sep+v);}}else if(k==='text-overflow'){rows.push('-ms-'+k+sep+v);}else{rows.push('-webkit-'+k+sep+v);rows.push('-moz-'+k+sep+v);if(k.indexOf('animation')===-1){rows.push('-ms-'+k+sep+v);}}return rows.join(del+'\n')+del;}}else{return'';}}function clone(obj,skip){if(!obj||typeof(obj)!=='object'){return obj;}var o;var t;if(obj instanceof Array){var len=obj.length;o=new Array(len);for(var i=0;i<len;i++){t=typeof(obj[i]);if(t!=='object'){if(t==='function'){continue;}o[i]=obj[i];continue;}o[i]=clone(obj[i],skip);}return o;}o={};for(var m in obj){if(skip&&skip[m]){continue;}var val=obj[m];t=typeof(val);if(t!=='object'){if(t==='function'){continue;}o[m]=val;continue;}o[m]=clone(obj[m],skip);}return o;}function extend(base,obj){if(!base||!obj){return base;}if(typeof(base)!=='object'||typeof(obj)!=='object'){return base;}var keys=[];for(var k in obj){if(obj.hasOwnProperty(k)){keys.push(k);}}var i=keys.length;while(i--){var key=keys[i];base[key]=clone(obj[key]);}return base;}function arrFindIndex(arr,fn,value){var isFN=typeof(fn)==='function';var isV=value!==undefined;for(var i=0,length=arr.length;i<length;i++){if(isFN){if(fn.call(arr,arr[i],i)){return i;}continue;}if(isV){if(arr[i]&&arr[i][fn]===value){return i;}continue;}if(arr[i]===fn){return i;}}return-1;}function arrSortByNumberASC(arr,k){var l=arr.length;for(var i=0;i<l;i++){for(var j=0;j<(l-i-1);j++){if(shouldSwap(arr[j],arr[j+1],k)){var saved=arr[j];arr[j]=arr[j+1];arr[j+1]=saved;}}}return arr;function shouldSwap(a,b){var va=k?a[k]:a;var vb=k?b[k]:b;return va>vb;}}function padStart(s,l,f){l-=s.length;if(l<0){return s;}if(f===undefined){f=' ';}while(l--){s=f+s;}return s;}function strFormatBySingleBrackets(str,args){return str.replace(/\[\d+\]/g,function(text){var value=args[+text.substring(1,text.length-1)];return value===null?'':value;});}function strTrim(str){return str.replace(/^\s+|\s+$/,'');}function genStyleID(){var chars='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';var b='';for(var i=0;i<3;i++){b+=chars.charAt(Math.floor(Math.random()*chars.length));}return'css-'+b;}};
U.browserSupportsEvent = function(sel,eventName){var el=null;if(sel instanceof Node||sel instanceof Element||sel instanceof HTMLDocument){el=sel;}else if(typeof(sel)==='string'){el=createElementWithAttributes(sel);}else{return false;}if(el){eventName='on'+eventName;if(el[eventName]!==undefined){return true;}else if(el instanceof Element){el.setAttribute(eventName,'return;');return(typeof(el[eventName])==='function');}return false;}else{throw new Error('missingElement');}function createElementWithAttributes(selector){var exp=/^<(\S+)[^>]/;var m=selector.match(exp);if(!Array.isArray(m)||m.length===0){return null;}var el=document.createElement(m[1]);exp=/(\S+)="(\S+)"/g;m=null;while(m=exp.exec(selector)){if(Array.isArray(m)&&m.length>0){el.setAttribute(m[1],m[2]);}}return el;}};
U.ajax = function(obj){var xhr=new XMLHttpRequest();var res=null;var json='application/json';xhr.onreadystatechange=function(){if(xhr.readyState===4){if(obj.header['Accept']===json){try{res=JSON.parse(xhr.responseText);}catch(err){U.logWarn('Unable to parse server response to JSON.');obj.error(null,xhr);}}else{res=xhr.responseText;}if(xhr.status===200){obj.success(res,xhr);}else{obj.error(res,xhr);}obj.always(res,xhr);}};xhr.upload.onprogress=function(state){if(state.lengthComputable){var percentage=(state.loaded/state.total)*100;obj.progress(percentage.toFixed(0));}};xhr.onerror=function(){U.logWarn('Unexpected AJAX error.');};xhr.open(obj.method,obj.url,true);for(var k in obj.header){if(obj.hasOwnProperty(k)){var v=obj.header[k];xhr.setRequestHeader(k,v);}}xhr.send(obj.data);};
U.domReady = function(fn){if(document.attachEvent?(document.readyState==='complete'):(document.readyState!=='loading')){fn();}else{document.addEventListener('DOMContentLoaded',fn);}};
U.domIsEl = function(el){return(el instanceof Node||el instanceof Element||el instanceof HTMLDocument);};
U.domMatches = function(el,sel){var p=Element.prototype;var fn=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.msMatchesSelector||function(s){return Array.prototype.indexOf.call(document.querySelectorAll(s),this)!==-1;};return fn.call(el,sel);};
U.domFind = function(sel,el){var list=null;if(!sel||typeof(sel)!=='string'){throw new Error('invalidParameter');}if(el&&U.domIsEl(el)){list=el.querySelectorAll(sel);}else{list=document.querySelectorAll(sel);}if(list){if(selectingOne(sel)){return list[0]||null;}else{var arr=[];var len=list.length;arr.length=len;for(var i=0;i<len;i++){if(list[i]){arr[i]=list[i];}}return arr;}}else{if(selectingOne(sel)){return null;}return[];}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domHasClass = function(el,name){if(!el||!U.domIsEl(el)){throw new Error('invalidParameter');}if(el.classList){return el.classList.contains(name);}else{var exp=new RegExp('(^| )'+name+'( |$)','gi');return exp.test(el.className);}};
U.domAddClass = function(sel,v){if(!sel){throw new Error('invalidParameter');}if(!v||typeof(v)!=='string'){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){var len=els.length;for(var i=0;i<len;i++){var el=els[i];if(!el){continue;}var clas=v.split(/\s+/);var lenlen=clas.length;for(var j=0;j<lenlen;j++){var cla=clas[j];addClass(el,cla);}}}function addClass(el,v){if(el.classList){el.classList.add(v);}else{el.className+=' '+v;}}};
U.domRemoveClass = function(sel,v){if(!sel||!v||typeof(v)!=='string'){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){var len=els.length;for(var i=0;i<len;i++){var el=els[i];if(!el){continue;}var clas=v.split(/\s+/);var lenlen=clas.length;for(var j=0;j<lenlen;j++){var cla=clas[j];removeClass(el,cla);}}}function removeClass(el,v){if(el.classList){el.classList.remove(v);}else{el.className=el.className.replace(new RegExp('(^|\\b)'+v.split(' ').join('|')+'(\\b|$)','gi'),' ');}}};
U.domToggleClass = function(sel,v){if(!sel){throw new Error('invalidParameter');}if(!v||typeof(v)!=='string'){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){var len=els.length;for(var i=0;i<len;i++){var el=els[i];if(!el){continue;}var clas=v.split(/\s+/);var lenlen=clas.length;for(var j=0;j<lenlen;j++){var cla=clas[j];toggleClass(el,cla);}}}function toggleClass(el,v){el.classList.toggle(v);}};
U.domVal = function(sel,v){if(!sel){throw new Error('invalidParameter');}if(v&&typeof(v)!=='string'&&isNaN(parseInt(v))){return new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(!el){continue;}if(v===undefined){arr.push(getVal(el));}else{setVal(el,v);}}}return selectingOne(sel)?arr[0]:arr;function getVal(el){return el.value||null;}function setVal(el,v){el.value=v;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domAttr = function(sel,k,v){if(!sel){throw new Error('invalidParameter');}if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}if(v&&typeof(v)!=='string'&&isNaN(parseInt(v))&&v!==null){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(!el){continue;}if(v===undefined){arr.push(getAttr(el,k));}else{setAttr(el,k,v);}}}return selectingOne(sel)?arr[0]:arr;function getAttr(el,k){var v=el.getAttribute(k)||null;if(v){return v;}else{return el.hasAttribute(k);}}function setAttr(el,k,v){el.setAttribute(k,''+v);}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domData = function(sel,k,v){if(!sel){throw new Error('invalidParameter');}if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}try{v=normalizeVal(v);}catch(err){throw new Error('unableToParse');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(!el){continue;}if(v===undefined){arr.push(getData(el,k));}else{setData(el,k,v);}}}return selectingOne(sel)?arr[0]:arr;function getData(el,k){if(el.__elementData&&el.__elementData[k]){return el.__elementData[k];}if(el.dataset){return el.dataset[k]||null;}return null;}function setData(el,k,v){if(el.dataset){if(typeof(v)==='string'){el.dataset[k]=v;}else{if(!el.__elementData){el.__elementData={};}el.__elementData[k]=v;}}}function normalizeVal(v){if(v===undefined){return undefined;}else if(typeof(v)==='string'){return v;}else if(typeof(v)==='object'){if(!v){return null;}return v;}else if(v&&typeof(v.toString)=='function'){return v.toString();}else{throw new Error('invalidParameter');}}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domHTML = function(sel,v){if(!sel){throw new Error('invalidParameter');}if(v&&typeof(v)!=='string'){return new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(!el){continue;}if(v===undefined){arr.push(getHtml(el));}else{setHtml(el,v);}}}return selectingOne(sel)?arr[0]:arr;function getHtml(el){return el.innerHTML||null;}function setHtml(el,v){el.innerHTML=v;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domText = function(sel,v){if(!sel){throw new Error('invalidParameter');}if(v&&typeof(v)!=='string'){return new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(!el){continue;}if(v===undefined){arr.push(getText(el));}else{setText(el,v);}}}return selectingOne(sel)?arr[0]:arr;function getText(el){return el.textContent||null;}function setText(el,v){el.textContent=v;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domParent = function(sel){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){arr.push(getParent(el));}}}return selectingOne(sel)?arr[0]:arr;function getParent(el){return el.parentNode||null;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domChildren = function(sel){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){arr.push(getChildren(el));}}}return selectingOne(sel)?arr[0]:arr;function getChildren(el){var els=el.children||[];var arr=[];for(var i=0;i<els.length;i++){arr[i]=els[i];}return arr;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domSiblings = function(sel){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){arr.push(getSiblings(el));}}}return selectingOne(sel)?arr[0]:arr;function getSiblings(el){var els=(el.parentNode&&el.parentNode.children)?el.parentNode.children:[];var arr=[];for(var i=0;i<els.length;i++){var ch=els[i];if(ch!==el){arr.push(ch);}}return arr;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domPrev = function(sel){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){arr.push(getPrev(el));}}}return selectingOne(sel)?arr[0]:arr;function getPrev(el,psel){var els=(el.parentNode&&el.parentNode.children)?el.parentNode.children:[];var brk=false;for(var i=els.length-1;i>=0;i--){var sib=els[i];if(sib===el){brk=true;continue;}if(brk&&sib&&(U.domMatches(sib,psel)||!psel)){return sib;}else{continue;}}return null;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domPrevAll = function(sel){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){arr.push(getPrevAll(el));}}}return selectingOne(sel)?arr[0]:arr;function getPrevAll(el){var els=(el.parentNode&&el.parentNode.children)?el.parentNode.children:[];var arr=[];for(var i=0;i<els.length;i++){var ch=els[i];if(ch===el){return arr;}arr.push(ch);}return[];}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domNext = function(sel,nsel){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){arr.push(getNext(el,nsel));}}}return selectingOne(sel)?arr[0]:arr;function getNext(el,nsel){var els=(el.parentNode&&el.parentNode.children)?el.parentNode.children:[];var brk=false;for(var i=0;i<els.length;i++){var sib=els[i];if(sib===el){brk=true;continue;}if(brk&&sib&&(U.domMatches(sib,nsel)||!nsel)){return sib;}else{continue;}}return null;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domNextAll = function(sel){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){arr.push(getNextAll(el));}}}return selectingOne(sel)?arr[0]:arr;function getNextAll(el){var els=(el.parentNode&&el.parentNode.children)?el.parentNode.children:[];var arr=[];var brk=false;for(var i=0;i<els.length;i++){var ch=els[i];if(brk){arr.push(ch);}if(ch===el){brk=true;}}return arr;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domStyle = function(sel,k,v){if(!sel){throw new Error('invalidParameter');}if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}if(v&&(typeof(v)!=='string'&&isNaN(parseInt(v)))){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}var arr=[];if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(!el){continue;}if(v===undefined){arr.push(getStyle(el,k));}else{setStyle(el,k,v);}}}return selectingOne(sel)?arr[0]:arr;function getStyle(el,k){return el.style[k]||null;}function setStyle(el,k,v){el.style[k]=v;}function selectingOne(sel){if(U.domIsEl(sel)){return true;}else if(typeof(sel)==='string'){var parts=sel.split(/\s+/);return(parts&&parts.length==1&&parts[0][0]=='#');}return false;}};
U.domFadeIn = function(sel,t){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){fadeIn(el,t);}}}function fadeIn(el,t){el.style.transition='opacity '+(t&&!isNaN(t)&&t>0?t:250)+'ms';el.style.opacity='1';}};
U.domFadeOut = function(sel,t){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){fadeOut(el,t);}}}function fadeOut(el,t){el.style.transition='opacity '+(t&&!isNaN(t)&&t>0?t:250)+'ms';el.style.opacity='0';}};
U.domFadeTo = function(sel,o,t){if(!sel){throw new Error('invalidParameter');}if(!o||isNaN(o)||o>100||o<0){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){for(var i=0,len=els.length;i<len;i++){var el=els[i];if(el){fadeTo(el,o,t);}}}function fadeTo(el,o,t){el.style.transition='opacity '+(t&&!isNaN(t)&&t>0?t:250)+'ms';el.style.opacity=o.toString();}};
U.domFadeToggle = function(sel,t){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){for(var i=0,len=els.length;i<len;i++){var el=els[i];if(el){fadeToggle(el);}}}function fadeToggle(el){el.style.transition='opacity '+(t&&!isNaN(t)&&t>0?t:250)+'ms';var s=el.ownerDocument.defaultView.getComputedStyle(el,null);var o=(!s)?null:s.opacity;if(o===null){return;}if(o==='1'){el.style.opacity='0';}else{el.style.opacity='1';}}};
U.domOn = function(sel,k,fn){if(!sel){throw new Error('invalidParameter');}if(!k||typeof(k)!=='string'||typeof(fn)!=='function'){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){var len=els.length;for(var i=0;i<len;i++){var el=els[i];if(el){addListener(el,k,fn);}}}function addListener(el,k,fn){var cache=U.malloc('__DOM');var handler=cache('handler')||{};if(!handler[el]){handler[el]={};}if(!handler[el][k]){handler[el][k]=[];}handler[el][k].push(fn);el.addEventListener(k,fn,false);cache('handler',handler);}};
U.domOff = function(sel,k){if(!sel){throw new Error('invalidParameter');}if(k&&typeof(k)!=='string'){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){var len=els.length;for(var i=0;i<len;i++){var el=els[i];if(el){els[i]=removeListener(el,k||null);}}}function removeListener(el,k){var cache=U.malloc('__DOM');var handler=cache('handler')||{};var replacer=el;if(k){if(handler[el]&&handler[el][k]){var fns=handler[el][k];for(var i=0;i<fns.length;i++){var fn=fns[i];el.removeEventListener(k,fn,false);}handler[el][k]=null;}}else{var copy=el.cloneNode(true);el.parentNode.replaceChild(copy,el);handler[el]=null;replacer=copy;}cache('handler',handler);return replacer;}};
U.domTriggerNativeEvent = function(sel,k){if(!sel){throw new Error('invalidParameter');}if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){var len=els.length;for(var i=0;i<len;i++){var el=els[i];if(el){triggerEvent(el,k);}}}function triggerEvent(el,k){var e=document.createEvent('HTMLEvents');e.initEvent(k,true,false);el.dispatchEvent(e);}};
U.domTriggerEvent = function(sel,k,v){if(!sel){throw new Error('invalidParameter');}if(!k||typeof(k)!=='string'){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){var len=els.length;for(var i=0;i<len;i++){var el=els[i];if(el){triggerEvent(el,k,v);}}}function triggerEvent(el,k,v){var e=null;if(window.CustomEvent){e=new CustomEvent(k,{detail:v});}else{e=document.createEvent('CustomEvent');e.initCustomEvent(k,true,true,v);}el.dispatchEvent(e);}};
U.domAppend = function(sel,v){if(!sel){throw new Error('invalidParameter');}if(typeof(v)!=='string'){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){domAppend(el,v);}}}function domAppend(el,v){el.insertAdjacentHTML('beforeend',v);}};
U.domPrepend = function(sel,v){if(!sel){throw new Error('invalidParameter');}if(typeof(v)!=='string'){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){domPrepend(el,v);}}}function domPrepend(el,v){el.insertAdjacentHTML('afterbegin',v);}};
U.domRemove = function(sel){if(!sel){throw new Error('invalidParameter');}var els=null;if(Array.isArray(sel)){els=sel;}else if(U.domIsEl(sel)){els=[sel];}else{els=U.domFind(sel);els=Array.isArray(els)?els:[els];}if(Array.isArray(els)){for(var i=0;i<els.length;i++){var el=els[i];if(el){domRemove(el);}}}function domRemove(el){el.parentNode.removeChild(el);}};
U.domScrollTo = function(sel){if(typeof(sel)==='string'){if(sel[0]!=='#'&&sel[0]!=='.'){sel='#'+sel;}else{throw new Error('invalidParameter');}}else if(sel&&!U.domIsEl(sel)){throw new Error('invalidParameter');}else if(!sel){return;}var el=typeof(sel)==='string'?document.getElementById(sel.slice(1)):sel;if(el){el.scrollIntoView();}};
U.SETROUTE0 = function(route,fn){var cache=U.malloc('_ROUTE0');if(!route||typeof(route)!=='string'||route[0]!=='#'){throw new Error('invalidParameter');}if(typeof(fn)!=='function'){throw new Error('invalidParameter');}var routes=cache('routes');if(!routes){routes=[];domReady(function(){U.ROUTE0();});}routes.push(composeRoute(route,fn));if(!isErrorRoute(route)){routes.push(composeRoute(route+'~{anchor}',fn));}cache('routes',routes);function composeRoute(route,fn){return{route:route,exp:new RegExp('^'+route.replace(/{(\w+)}/g,'(\\w+)')+'$'),hasAnchor:route.split('~').length===2,fn:fn};}function isErrorRoute(v){return/^#(400|404|408|500)/.test(v);}function domReady(fn){document.addEventListener('DOMContentLoaded',fn);}};
U.ROUTE0 = function(url,err){var cache=U.malloc('_ROUTE0');var routes=cache('routes');if(!Array.isArray(routes)||routes.length===0){throw new Error('missingRoute');}if(url!==undefined&&typeof(url)!=='string'){throw new Error('invalidParameter');}if(typeof(url)==='string'&&url[0]!=='#'){throw new Error('invalidParameter');}if(!url&&err){throw new Error('invalidParameter');}var hash=[null,locationHash()];if(!window.onhashchange){window.onhashchange=function(){hash[0]=hash[1];hash[1]=locationHash();onHashChange(hash);};}if(!url&&!err){err=localStorage['ROUTE0_ERR'];err=isErrorRoute(location.hash)?new U.ErrorBuilder(err?JSON.parse(err):null):null;var search=location.hash.split(/\?+/)[0]||'#';var query=getQueryObj(location.hash);return findAndInvokeRoute(routes,search,query,err);}else{if(isErrorRoute(url)){localStorage['ROUTE0_ERR']=err?JSON.stringify(new U.ErrorBuilder(err)):'';location.replace(url);}else{location.assign(url==='#'?'':url);}}function findAndInvokeRoute(routes,search,query,err){var is=false;for(var i=0;i<routes.length;i++){var v=routes[i];if(v.exp.test(search)){is=true;var args=search.match(v.exp).slice(1);var anchor=v.hasAnchor?(args.pop()||null):null;var controller=new U.Controller0(v.route,args,anchor,query,err);return invokeRoute(v.fn,controller,args);}}if(!is){U.ROUTE0('#404');}}function invokeRoute(fn,controller,args){controller.startInterval();return processFlags(function(){fn.apply(controller,args);});}function processFlags(next){return processMiddlewares(function(){return next();});}function processMiddlewares(next){return next();}function getQueryObj(url){url=url.replace(/\+/g,' ');var exp=/[?&]([^=]+)=([^&]*)/g;var o={};var m=null;while(m=exp.exec(url)){var k=m[1]?decodeURIComponent(m[1]):'';var v=m[2]?decodeURIComponent(m[2]):'';if(k){o[k]=v;}}return o;}function locationHash(){var hash=location.href.split(location.pathname)[1];return typeof(hash)==='string'?hash:'';}function onHashChange(hash){var part=[hash[0].split('~'),hash[1].split('~')];if(part[0][0]===part[1][0]){if(part[0][1]&&!part[1][1]){location.reload();}else if(part[1][1]&&part[0][1]!==part[1][1]){return scrollToID(part[1][1]);}}else{if(part[1][0]==='#'){location.replace('');}else{location.reload();}}}function scrollToID(elementID){var el=document.getElementById(elementID);if(el){el.scrollIntoView();}}function isErrorRoute(v){return/^#(400|404|408|500)/.test(v);}};
U.Controller0 = function(route,args,anchor,query,err){var self=this;self.route=route;self.args=Array.isArray(args)?args:[];self.anchor=anchor||null;self.query=query;self.err=err||null;self.viewCalled=false;self.execTime=0;self.startInterval=function(){self.interval=setInterval(function(){self.execTime+=1000;if(self.execTime>=10000){clearInterval(self.interval);return self.throw408();}},1000);};};U.Controller0.prototype={view:function(html){var self=this;if(self.execTime>=10000){return;}if(typeof(html)!=='string'){throw new Error('invalidParameter');}if(self.viewCalled){throw new Error('invocationCount');}self.viewCalled=true;clearInterval(self.interval);var el=document.getElementById('page');if(el){el.innerHTML=html;}else{throw new Error('Element #page was not found.');}},throw400:function(err){U.ROUTE0('#400',err);},throw404:function(err){U.ROUTE0('#404',err);},throw408:function(err){U.ROUTE0('#408',err);},throw500:function(err){U.ROUTE0('#500',err);}};
U.ls = function(a,flag,fn,next){var fs=require('fs');if(next===undefined){next=fn;fn=flag;}var dirPaths=Array.isArray(a)?a:[a];flag=flag||'';(function nextDirPath(){var dirPath=dirPaths.shift();if(!dirPath){return next();}(function listDirectory(dirPath,callback){fs.readdir(dirPath,function(err,files){if(err){return next(err);}(function nextFile(){var file=files.shift();if(!file){return callback?callback():nextDirPath();}file=require('path').resolve(dirPath+'/'+file);fs.stat(file,function(err,stat){if(err){return next(err);}fn(file,stat,function(){if(stat.isDirectory()&&flag==='R'){listDirectory(file,function(err){if(err){return next(err);}return nextFile();});}else{return nextFile();}});});}());});}(dirPath));}());};
U.Watcher = function(t){this.t=t;this.fn={};this.trigger=function(k,a1,a2,a3){var fn=this.fn[k];return fn&&fn(a1,a2,a3);};};U.Watcher.prototype={watch:function(filepath){var self=this;require('fs').watchFile(filepath,{interval:self.t||1000},function(curr,prev){if(curr&&prev&&curr.mtime!==prev.mtime){return self.trigger('change',filepath,curr,prev);}});},on:function(k,fn){this.fn[k]=fn;}};
U.SETROUTE1 = function(route,fn){var cache=U.malloc('__SERVER');if(typeof(route)!=='string'||(['#public','#error'].indexOf(route)===-1&&route[0]!=='/')){throw new Error('invalidParameter');}if(typeof(fn)!=='function'){throw new Error('invalidParameter');}var routes=cache('routes');if(!routes){routes=[];}var v=composeRoute(route,fn);routes.push(v);cache('routes',routes);if(route==='#error'){cache('errorRoute',v);}if(route==='#public'){cache('publicRoute',v);}function composeRoute(route,fn){return{route:route,exp:new RegExp('^'+route.replace(/{(\w+)}/g,'(\\w+)')+'$'),fn:fn};}};
U.ROUTE1 = function(url,controller){var cache=U.malloc('__SERVER');var routes=cache('routes');if(!Array.isArray(routes)||routes.length===0){throw new Error('missingRoute');}if(typeof(url)!=='string'||(url!=='#error'&&url[0]!=='/')){throw new Error('invalidParameter');}var search=url.split(/\?+/)[0]||'/';var is=false;for(var i=0,l=routes.length;i<l;i++){var v=routes[i];if(v&&v.exp.test(search)){is=true;return invokeRoute();}}if(!is){return U.ROUTE1('#error',controller);}function invokeRoute(){console.log('INVOKE');controller.startInterval();processMiddlewares(function(){controller.route.fn.apply(controller,controller.args);});}function processMiddlewares(next){return next();}};
U.Controller1 = function(req,res){var self=this;self.req=req;self.res=res;self.args=[];self.publicFile=false;self.startInterval=function(){self.interval=setInterval(function(){self.execTime+=1000;if(self.execTime>=10000){clearInterval(self.interval);return self.throw408();}});};var search=null;var cache=U.malloc('__SERVER');self.findRoute=function(){var routes=cache('routes');if(!Array.isArray(routes)||routes.length===0){throw new Error('missingRoute');}search=self.req.url.split(/\?+/)[0]||'/';for(var i=0,l=routes.length;i<l;i++){var v=routes[i];if(v&&v.exp.test(search)){return v;}}return null;};self.prepare=function(next){self.status=200;self.error=null;self.route=self.findRoute();if(self.route){var args=search.match(self.route.exp).slice(1);if(Array.isArray(args)){self.args=args;}return next(self);}else{var pathname=require('url').parse(self.req.url).pathname;var ext=require('path').extname(pathname);if(cache('app').config.staticAccepts.indexOf(ext)>=0){var filepath=cache('app').config.publicDirectory+pathname;require('fs').stat(filepath,function(err){if(err||err.code==='ENOENT'){if(!cache('errorRoute')){throw new Error('missingErrorRoute');}self.route=cache('errorRoute');self.status=err.code==='ENOENT'?404:500;return next(self);}else{self.route=cache('publicRoute');self.publicFile=true;return next(self);}});}else{self.route=cache('errorRoute');self.status=404;return next(self);}}};self.throw=function(status,err){self.status=status;self.error=err;U.ROUTE1('#error',self);};};U.Controller1.prototype={json:function(status,obj){this.res.writeHead(status,{'Content-Type':'application/json'});return this.res.end(JSON.stringify(obj,null,'    '));},html:function(status,html){this.res.writeHead(status,{'Content-Type':'text/html'});return this.res.end(''+html);},plain:function(status,text){this.res.writeHead(status,{'Content-Type':'text/plain'});return this.res.end(''+text);},stream:function(status,filepath){var self=this;var rs=require('fs').createReadStream(filepath);rs.on('error',function(err){return self.throw404(err);});self.res.statusCode=status;rs.pipe(self.res);},throw301:function(err){this.throw(301,err);},throw400:function(err){this.throw(400,err);},throw401:function(err){this.throw(401,err);},throw403:function(err){this.throw(403,err);},throw404:function(err){this.throw(404,err);},throw408:function(err){this.throw(408,err);},throw409:function(err){this.throw(409,err);},throw500:function(err){this.throw(500,err);},throw503:function(err){this.throw(503,err);}};
U.SERVER = function(config){var cache=U.malloc('__SERVER');if(!config){return cache('app')||null;}function Request(){}Request.prototype={handle:function(req,res){var controller=new U.Controller1(req,res);controller.prepare(function(preparedController){if(preparedController.status!==200){return U.ROUTE1('#error',preparedController);}else if(preparedController.publicFile){return U.ROUTE1('#public',preparedController);}U.ROUTE1(preparedController.req.url,preparedController);});}};function App(){var self=this;config.publicDirectory=require('path').resolve(config.publicDirectory||'./public');config.staticAccepts=Array.isArray(config.staticAccepts)?config.staticAccepts:['.jpg','.png','.gif','.ico','.js','.coffee','.css','.txt','.xml','.woff','.woff2','.otf','.ttf','.eot','.svg','.zip','.rar','.pdf','.docx','.xlsx','.doc','.xls','.html','.htm','.appcache','.map','.ogg','.mp4','.mp3','.webp','.webm','.swf','.package','.json','.md'];self.config=config;self.request=new Request();self.server=require('http').createServer(self.request.handle).listen(config.port,config.host);self.connections={};self.server.on('connection',function(connection){var k=connection.remoteAddress+':'+connection.remotePort;self.connections[k]=connection;connection.on('close',function(){delete self.connections[k];});});}App.prototype={destroy:function(next){this.server.close(next);for(const k in this.connections){if(this.connections.hasOwnProperty(k)){this.connections[k].destroy();}}}};cache('app',new App());U.SETROUTE1('#public',function(){var filepath=config.publicDirectory+require('url').parse(this.req.url).pathname;this.stream(200,filepath);});};
if(typeof(process)==='object'&&typeof(module)==='object'){module.exports=U};