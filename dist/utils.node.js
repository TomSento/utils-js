"use strict";var $fs=require("fs"),$path=require("path"),$url=require("url"),$querystring=require("querystring"),$https=require("https"),$http=require("http"),$os=require("os"),$global="object"==typeof global?global:window;function $malloc(e){$global.$$cache||($global.$$cache={}),$global.$$cache[e]||($global.$$cache[e]={});var t=$global.$$cache[e];return function(e,r){if("object"!=typeof e||void 0!==r){if(void 0===e&&void 0===r)return t;if("string"!=typeof e)throw new Error("api-k");if(void 0===r)return t[e];t[e]=r}else t=e}}function $noop(){}function $toDebugStr(){for(var e="",r=0;r<arguments.length;r++){var t=arguments[r];t&&("object"==typeof t||Array.isArray(t))?(Array.isArray(t)?e+="Array("+t.length+"): \n":"object"==typeof t&&(e+="Object: \n"),e+=JSON.stringify(t,null,"    "),e+="\n"):e+=(0<r?" ":"")+t}return e}function $arrFilter(e,r){for(var t=[],n=0;n<e.length;n++)r.call(null,e[n],n,e)&&t.push(e[n]);return t}function $arrFind(e,r,t){for(var n="function"==typeof r,s=void 0!==t,o=0,i=e.length;o<i;o++)if(n){if(r(e[o],o))return e[o]}else if(s){if(e[o]&&e[o][r]===t)return e[o]}else if(e[o]===r)return e[o];return null}function $arrFindIndex(e,r,t){for(var n="function"==typeof r,s=void 0!==t,o=0,i=e.length;o<i;o++)if(n){if(r(e[o],o))return o}else if(s){if(e[o]&&e[o][r]===t)return o}else if(e[o]===r)return o;return-1}function $arrForEach(e,r){for(var t=e.length,n=0;n<t;n++)r(e[n],n,e)}function $arrLast(e){return e[e.length-1]||null}function $arrMap(e,r){for(var t=[],n=0;n<e.length;n++){var s=e[n];"function"==typeof r?t.push(r(s,n,e)):t.push(s&&"object"==typeof s?s[r]:void 0)}return t}function $strRemoveDiacritics(e){var r={" ":" ","߀":"0","Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ꜿ":"C","Ḉ":"C","ĆC":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ƈ":"C","Ȼ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ɗ":"D","Ɖ":"D","ᴅ":"D","Ꝺ":"D","Ð":"Dh","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","ɛ":"E","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","ᴇ":"E","ꝼ":"F","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","ɢ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","ȷ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","ϻ":"M","Ꞥ":"N","Ƞ":"N","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ɲ":"N","Ꞑ":"N","ᴎ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Þ":"Th","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ɑ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","Ƃ":"b","ｃ":"c","ⓒ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","Ƌ":"d","Ꮷ":"d","ԁ":"d","Ɦ":"d","ð":"dh","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ﬀ":"ff","ﬁ":"fi","ﬂ":"fl","ﬃ":"ffi","ﬄ":"ffl","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ꝿ":"g","ᵹ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ɭ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","л":"n","ԉ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ɔ":"o","ᴑ":"o","œ":"oe","ƣ":"oi","ꝏ":"oo","ȣ":"ou","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ρ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ʂ":"s","ß":"ss","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","þ":"th","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};return e.replace(/[^\u0000-\u007e]/g,function(e){return r[e]||e})}function $arrOrderBy(e,i,a,l){var r=e.length;if(!r||1===r)return e;"boolean"==typeof i&&(a=i,i=void 0),void 0===l&&(l=3),void 0===a&&(a=!0);var c=0,t=i?e[0][i]:e[0];switch(typeof t){case"string":c=1;break;case"number":c=2;break;case"boolean":c=3;break;default:if(!(t instanceof Date||isNaN(t.getTime())))return e;c=4}function s(e,r,t,n){var s=0,o=0,i=null;for(s=t;s<r;s+=t)for(o=s;0<o&&1===n(e[o-t],e[o]);)i=e[o],e[o]=e[o-t],e[o-t]=i,o-=t}return function(e,r){for(var t=e.length,n=Math.floor(t/2);n;)s(e,t,n,r),n=Math.floor(n/2)}(e,function(e,r){var t=i?e[i]:e,n=i?r[i]:r;if(1===c)return t&&n?a?$strRemoveDiacritics(t.substring(0,l)).localeCompare($strRemoveDiacritics(n.substring(0,l))):$strRemoveDiacritics(n.substring(0,l)).localeCompare($strRemoveDiacritics(t.substring(0,l))):0;if(2===c)return n<t?a?1:-1:t<n?a?-1:1:0;if(3===c)return!0===t&&!1===n?a?1:-1:!1===t&&!0===n?a?-1:1:0;if(4===c){if(!t||!n)return 0;t.getTime||(t=new Date(t)),n.getTime||(n=new Date(n));var s=t.getTime(),o=n.getTime();return o<s?a?1:-1:s<o?a?-1:1:0}return 0}),e}function $arrRemove(e,r,t){for(var n="function"==typeof r,s=void 0!==t,o=[],i=0,a=e.length;i<a;i++)n?r.call(e,e[i],i)||o.push(e[i]):s?e[i]&&e[i][r]!==t&&o.push(e[i]):e[i]!==r&&o.push(e[i]);return o}function $arrUnique(e,r){for(var t=[],n=0,s=0,o=e.length;s<o;s++){var i=e[s];if(r)if(0!==n){for(var a=!0,l=0;l<n;l++)if(t[l][r]===i[r]){a=!1;break}a&&(t.push(i),n++)}else t.push(i),n++;else-1===t.indexOf(i)&&t.push(i)}return t}function $numToKeyType(e){return{8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",32:"SPACE",37:"LEFT_ARROW",38:"UP_ARROW",39:"RIGHT_ARROW",40:"DOWN_ARROW",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z"}[e]||null}function $objClone(e,r,t){if(!e)return e;var n,s,o=typeof e;if("object"!==o||e instanceof Date)return e;if(e instanceof Array){n=e.length,s=new Array(n);for(var i=0;i<n;i++)if("object"!==(o=typeof e[i])||e[i]instanceof Date){if(t&&"function"===o)continue;s[i]=e[i]}else s[i]=$objClone(e[i],r,t);return s}for(var a in s={},e)if(!r||!r[a]){var l=e[a];if("object"!==(o=typeof l)||l instanceof Date){if(t&&"function"===o)continue;s[a]=l}else s[a]=$objClone(e[a],r,t)}return s}function $objExtend(e,r,t){if(!e||"object"!=typeof e)throw new Error("api-objA");if(!r||"object"!=typeof r)throw new Error("api-objB");void 0===t&&(t=!0);for(var n=Object.keys(r),s=n.length;s--;){var o=n[s];(t||void 0===e[o])&&(e[o]=$objClone(r[o]))}return e}function $objForIn(e,r){var t=0;for(var n in e)e.hasOwnProperty(n)&&(r(n,e[n],t),t++)}function $objKeys(e){var r,t=[];for(r in e)e.hasOwnProperty(r)&&t.push(r);return t}function $objToQueryStr(e){var r=[];for(var t in e)if(e.hasOwnProperty(t)){var n=o(e[t]);(t=encodeURIComponent(t))&&n&&r.push(t+"="+n)}return 0<r.length?"?"+r.join("&"):"";function o(e){switch(Object.prototype.toString.call(e)){case"[object Number]":return encodeURIComponent(e);case"[object String]":return function(e){if(0==e.replace(/\s*/g,"").length)return null;var t={" ":"%20","\t":"%09","\n":"%0A","\r":"%0D"};return(e=e.replace(/( |\t|\n|\r)/g,function(e,r){return t[r]||r}))||null}(e);case"[object Array]":return function(e){for(var r=[],t=e.length,n=0;n<t;n++){var s=o(e[n]);s&&r.push(s)}return 0<(t=r.length)?r.join(","):null}(e);case"[object Boolean]":return e?"1":"0"}return null}}$global.$malloc=$malloc,$global.$noop=$noop,$global.$toDebugStr=$toDebugStr,$global.$arrFilter=$arrFilter,$global.$arrFind=$arrFind,$global.$arrFindIndex=$arrFindIndex,$global.$arrForEach=$arrForEach,$global.$arrLast=$arrLast,$global.$arrMap=$arrMap,$global.$strRemoveDiacritics=$strRemoveDiacritics,$global.$arrOrderBy=$arrOrderBy,$global.$arrRemove=$arrRemove,$global.$arrUnique=$arrUnique,$global.$numToKeyType=$numToKeyType,$global.$objClone=$objClone,$global.$objExtend=$objExtend,$global.$objForIn=$objForIn,$global.$objKeys=$objKeys,$global.$objToQueryStr=$objToQueryStr;var CONTENT_TYPE_TO_EXT={"text/plain":".txt","text/markdown":".md","text/html":".html","application/xml":".xml","text/xml":".xml","application/json":".json","font/woff":".woff","font/woff2":".woff2","font/otf":".otf","font/ttf":".ttf","application/vnd.ms-fontobject":".eot","application/javascript":".js","text/css":".css","image/jpeg":".jpg","image/png":".png","image/gif":".gif","image/svg+xml":".svg","image/x-icon":".ico","video/mp4":".mp4","audio/mp3":".mp3","application/x-shockwave-flash":".swf","application/pdf":".pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","application/msword":".doc","application/vnd.ms-excel":".xls","application/zip":".zip","application/x-rar-compressed":".rar"};function $strContentTypeToExt(e){return CONTENT_TYPE_TO_EXT[e]||null}function $strf(e,t){return e.replace(/\{\d+\}/g,function(e){var r=t[+e.substring(1,e.length-1)];return null===r?"":r})}function $strFromUntil(e,r,t){var n=(e=e.substring(r)).split(t);return Array.isArray(n)?n[0]===e?null:n[0]:null}function $strHyphenize(e){if("string"!=typeof e)throw new Error("api-str");return e.replace(/\B([A-Z])/g,function(e){return"-"+e[0]}).toLowerCase()}function $strHTML(e,r){if(!e||"string"!=typeof e)return"";var t="<"+e;return r||(r={}),r.id&&(t+=' id="'+r.id+'"'),Array.isArray(r.classes)&&(t+=function(e){for(var r=e.classes,t="",n=0;n<r.length;n++){var s=r[n];s&&(s="."+s)}return 0<(t=e.classes.join(" ")).length?' class="'+t+'"':""}(r)),r.style&&"object"==typeof r.style&&(t+=function(e){var r="";for(var t in e)e.hasOwnProperty(t)&&(r+=$strHyphenize(t)+":"+e[t]+";");return 0<r.length?' style="'+r+'"':""}(r.style)),t+=function(e){e="object"==typeof e?e:{};var r="";for(var t in e)if(!(0<=["id","classes","style","data","html"].indexOf(t))){var n=t+'="'+e[t]+'"';r+=0<r.length?" "+n:n}return 0<r.length?" "+r:""}(r),r.data&&"object"==typeof r.data&&(t+=function(e){var r="";for(var t in e)if(e.hasOwnProperty(t)){var n="data-"+t+'="'+e[t]+'"';r+=0<r.length?" "+n:n}return 0<r.length?" "+r:""}(r.data)),0<=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e)?t+"/>":(t+=">",t+=r.html,t+="</"+e+">")}function $strMatchLen(e,r,t){var n=e.match(r);return t=parseInt(t),t=isNaN(t)?0:t,Array.isArray(n)&&n[t]?n[t].length:0}function $strPadEnd(e,r,t){if("number"!=typeof e||"string"!=typeof r||t){if("string"==typeof e&&"number"==typeof r&&"string"==typeof t)return n(e,r,t);throw new Error("invalidArguments")}return n("",e,r);function n(e,r,t){if((r-=e.length)<0)return e;for(void 0===t&&(t=" ");r--;)e+=t;return e}}function $strPadStart(e,r,t){if("number"!=typeof e||"string"!=typeof r||t){if("string"==typeof e&&"number"==typeof r&&"string"==typeof t)return n(e,r,t);throw new Error("invalidArguments")}return n("",e,r);function n(e,r,t){if((r-=e.length)<0)return e;for(void 0===t&&(t=" ");r--;)e=t+e;return e}}function $strReplaceBetween(e,r,t,n){return e.substring(0,r)+n+e.substring(t)}function $strReplaceCharAt(e,r,t){return e.substr(0,r)+t+e.substr(r+t.length)}function $strReverse(e){for(var r="",t=e.length-1;0<=t;t--)r+=e[t];return r}function $strReverseFromUntil(e,r,t){for(var n="",s=(e=e.substring(0,r)).length-1;0<=s;s--)n+=e[s];var o=n.split(t);return Array.isArray(o)?o[0]===e?null:o[0]:null}function $strReverseUntil(e,r){for(var t="",n=e.length-1;0<=n;n--)t+=e[n];var s=t.split(r);return Array.isArray(s)?s[0]===e?null:s[0]:null}function $strSlug(e,r){r=r||60;for(var t=$strRemoveDiacritics(e.trim().toLowerCase()),n="",s=t.length,o=0;o<s;o++){var i=t[o],a=t.charCodeAt(o);if(n.length>=r)break;31<a&&a<48?"-"!==n[n.length-1]&&(n+="-"):(47<a&&a<58||94<a&&a<123)&&(n+=i)}var l=n.length-1;return"-"===n[l]?n.substring(0,l):n}function $strStripHTML(e){e=e.replace(/<\/?[^>]+(>|$)/g,"");var t={nbsp:" ",amp:"&",quot:'"',lt:"<",gt:">"};return e.replace(/&(nbsp|amp|quot|lt|gt);/g,function(e,r){return t[r]||r})}function $strToHTMLText(e,r,t,n,s){var o={"&":"amp",'"':"quot","<":"lt",">":"gt"};return e=(e=(e=function(e){var r=/[^\s](\s+)[^\s]/g,t=null;for(;t=r.exec(e);)if(Array.isArray(t)){r.lastIndex-=1;var n=t.index+1,s=t[1].length,o=i(s,!1,!0);e=e.substring(0,n)+o+e.substring(n+s)}return e}(e=e.replace(/(&|"|<|>)/g,function(e,r){return"&"+o[r]+";"||r}))).replace(/^\s+/,function(e){return i(e.length,r,t)})).replace(/\s+$/,function(e){return i(e.length,n,s)});function i(e,r,t){for(var n=[],s=0;s<e;s++)n[s]=s%2==0?r?"&nbsp;":" ":r?" ":"&nbsp;";return t?n.reverse().join(""):n.join("")}}function $strToQueryObj(e){e=e.replace(/\+/g," ");for(var r=/[?&]([^=]+)=([^&]*)/g,t={},n=null;n=r.exec(e);){var s=n[1]?decodeURIComponent(n[1]):"",o=n[2]?decodeURIComponent(n[2]):"";s&&(t[s]=o)}return t}function $strTrim(e,r){r=r||"\\s";var t=new RegExp("^"+r+"+|"+r+"+$","gm");return e.replace(t,"")}function $strUntil(e,r){var t=e.split(r);return Array.isArray(t)?t[0]===e?null:t[0]:null}function $Error(e,r){if(!e)throw new Error("api-problem");if(e instanceof Error)this.id=e.message,this.message=r||null;else{if("string"!=typeof e)throw new Error("api-problem");this.id=e,this.message=r||null}}function $ErrorBuilder(e){if(e)if("string"==typeof e||e instanceof Error)this.errors=[new $Error(e)];else if(e instanceof $Error)this.errors=[e];else if(Array.isArray(e)){var r=e.length,t=[];if(0<r)for(var n=0;n<r;n++){var s=e[n];if(!s)throw new Error("api-err");if(s instanceof $Error)t.push(s);else{if(!(s instanceof Error))throw new Error("api-err");t.push(new $Error(s))}}this.errors=t}else{if("object"!=typeof e||!Array.isArray(e.errors))throw new Error("api-err");this.errors=e.errors}else this.errors=[]}function $log(){var e=$malloc("__LOG"),r=[].slice.call(arguments);e("prefix")&&r.unshift(e("prefix")+":"),console.log.apply(null,r)}function $logClear(){console.clear()}function $logDebug(){var e=$malloc("__LOG"),r=[].slice.call(arguments),t=$toDebugStr.apply(this,r),n=e("prefix")?e("prefix")+": ":"";console.log(n+t)}function $logError(){var e=$malloc("__LOG"),r=[].slice.call(arguments);e("prefix")&&r.unshift(e("prefix")+":"),console.error.apply(null,r)}function $logPrefix(e){$malloc("__LOG")("prefix",e)}function $logWarn(){var e=$malloc("__LOG"),r=[].slice.call(arguments);e("prefix")&&r.unshift(e("prefix")+":"),console.warn.apply(null,r)}function $uid1(){return[""+(new Date).getFullYear(),(""+((new Date).getMonth()+1)).padStart(2,"0"),(""+(new Date).getDate()).padStart(2,"0"),(""+(new Date).getHours()).padStart(2,"0"),(""+(new Date).getMinutes()).padStart(2,"0"),Math.random().toString(36).slice(2,8)].join("-")}function $uid2(){return[Math.random().toString(36).slice(2,8),Math.random().toString(36).slice(2,8),Math.random().toString(36).slice(2,8),Math.random().toString(36).slice(2,8)].join("-")}function $h(u,f,d){var r=/^\s/,t=/\s$/,n=/\s,/,s=/\s{2,}/,o=/,\s*,/,i=/\|{2,}/,a=/(?:\s+\|)|(?:\|\s+)/,l=/\|$/,c=/\(\s/,p=/\s\)/,m=/^(Doc|Head|Link|Meta|Title)(?![A-Za-z0-9_-])/,h=/^(A|Abbr|Address|Area|Article|Aside|Audio|B|Base|Bdi|Bdo|BlockQuote|Body|Br|Button|Canvas|Caption|Cite|Code|Col|ColGroup|DataList|Dd|Del|Details|Dfn|Dialog|Div|Dl|Dt|Em|Embeded|FieldSet|FigCaption|Figure|Footer|Form|H1|H2|H3|H4|H5|H6|Header|Hr|I|Iframe|Img|Input|Ins|Kbd|Label|Legend|Li|Main|Map|Mark|Menu|MenuItem|Meter|Nav|NoScript|Object|Ol|OptGroup|Option|Output|P|Param|Picture|Pre|Progress|Q|Rp|Rt|Ruby|S|Samp|Script|Section|Select|Small|Source|Span|Strong|Sub|Summary|Sup|Svg|Table|Tbody|Td|Template|TextArea|TFoot|Th|THead|Time|Tr|Track|U|Ul|Var|Video|Wbr)(?![A-Za-z0-9_-])/,g=/\|/,w=/(?:^|\s)(?:Accept|Alt|Charset|Chckd|Content|Disabled|For|Href|HttpEquiv|Lang|Multiple|Name|Ph|Property|Rel|Ro|Slctd|Src|Type)(?![A-Za-z0-9])/,b=/(?:^|\s)(?:Ac|Ai|Anim|Animdel|Animdir|Animdur|Animfm|Animic|Animn|Animps|Animtf|Ap|As|B|BdA|Bda|BdB|Bdb|Bdbc|Bdbs|Bdbw|Bdc|Bdcl|BdL|Bdl|Bdlc|Bdls|Bdlw|BdR|Bdr|Bdrad|Bdradbl|Bdradbr|Bdradtl|Bdradtr|Bdrc|Bdrs|Bdrw|Bds|Bdsp|BdT|Bdt|Bdtc|Bdts|Bdtw|Bdw|BdX|Bdx|BdY|Bdy|Bfv|Bg|Bga|Bgc|Bgcp|Bgi|Bgo|Bgp|Bgpx|Bgpy|Bgr|Bgz|Blur|Brightness|Bxsh|Bxz|C|Cl|Cnt|Contrast|Cur|D|Dropshadow|Ff|Fil|Fill|Fl|Fs|Fv|Fw|Fx|Fxb|Fxd|Fxf|Fxg|Fxs|Fxw|Fz|Grayscale|H|HueRotate|Hy|Invert|Jc|L|Lh|LineClamp|Lisi|Lisp|List|Lts|M|Mah|Matrix|Matrix3d|Maw|Mb|Mih|Miw|Ml|Mr|Mt|Mx|My|O|Op|Opacity|Or|Ov|Ovs|Ovx|Ovy|P|Pb|Pe|Pl|Pos|Pr|Prs|Prso|Pt|Px|Py|R|Rotate|Rotate3d|RotateX|RotateY|RotateZ|Rsz|Saturate|Scale|Scale3d|ScaleX|ScaleY|Sepia|Skew|SkewX|SkewY|Stk|Stklc|Stklj|Stkw|T|Ta|Tal|Tbl|Td|Ti|Tov|Tr|Translate|Translate3d|TranslateX|TranslateY|TranslateZ|Tren|Trf|Trfo|Trfs|Trs|Trsde|Trsdu|Trsp|Trstf|Tsh|Tt|Us|V|Va|W|Whs|Whsc|Wob|Wow|Z)(?![A-Za-z0-9])/,y=/\s+/g,v=/[^\w]/,E=/[^\w-_#.]/,x=/\.{2,}/,$=/#{2,}/,A=/\.$/,R=/#$/,T=/#\./,S=/\.#/,L=/[#.][-_]|[-_]\.|[-_]$/,U=/[-_A-Z][-_A-Za-z0-9]*|[.#][-_A-Za-z0-9]+/g,B=/\)(?![\s)]|$)/,k=/\S*\(.*?\)/g,C=/([^\s(]+)\((.*)\)/,O=/[()]/,M=/,\S/,N=/\)\S*\(/,D=/\S*\(.*?\)\S*/g,_=/^([^:_>+()!@]+)\(([^()]*)\)((?=!)!|)((?=:[^:_>+()!@])(?::[^:_>+()!@]+)+|)((?=::[^:_>+()!@])(?:::[^:_>+()!@]+)+|)((?=@[^:_>+()!@])@[^:_>+()!@]+|)$/,V=/,\S/,j=/url\[(.*?)\]/g,P=[/\[/g,/\]/g],H=/(^|\s|,)(?=#)(?:#([^.,\s]+))((?=\.)\.[^#,\s]*|)(?:\s|,|$)+/,F=/[a-z]/,I=/[^0-9A-F]/,z=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,q=/(?=:)(:[^:]+)/g,Y=/(?=::)(::[^:]+)/g,G="/* -------------------\x3e $ */",W={Doc:"<!DOCTYPE html><html[[modifiers]]>[[content]]</html>",Head:"<head>[[content]]</head>",Meta:"<meta[[modifiers]]>",Title:"<title>[[content]]</title>",Link:"<link[[modifiers]]>",Body:"<body>[[content]]</body>",Div:"<div[[modifiers]]>[[content]]</div>",Span:"<span[[modifiers]]>[[content]]</span>",H1:"<h1[[modifiers]]>[[content]]</h1>",H2:"<h2[[modifiers]]>[[content]]</h2>",H3:"<h3[[modifiers]]>[[content]]</h3>",H4:"<h4[[modifiers]]>[[content]]</h4>",H5:"<h5[[modifiers]]>[[content]]</h5>",A:"<a[[modifiers]]>[[content]]</a>",Button:"<button[[modifiers]]>[[content]]</button>",Img:"<img[[modifiers]]>",Label:"<label[[modifiers]]>[[content]]</label>",Input:"<input[[modifiers]] value=[[value]]>",Select:"<select[[modifiers]]>[[content]]</select>",Option:"<option[[modifiers]]>[[content]]</option>",Script:"<script[[modifiers]]><\/script>"},Z={Doc:[{name:"Language",func:"Lang",allowArgument:!0,html:"lang=$",noMissingSpaceAfterComma:!0}],Head:[],Meta:[{name:"Charset",func:"Charset",allowArgument:!0,html:"charset=$",noMissingSpaceAfterComma:!0},{name:"Content",func:"Content",allowArgument:!0,html:"content=$",noMissingSpaceAfterComma:!0},{name:"HttpEquiv",func:"HttpEquiv",allowArgument:!0,html:"http-equiv=$",noMissingSpaceAfterComma:!0},{name:"Name",func:"Name",allowArgument:!0,html:"name=$",noMissingSpaceAfterComma:!0},{name:"Property",func:"Property",allowArgument:!0,html:"property=$",noMissingSpaceAfterComma:!0}],Title:[],Link:[{name:"Href",func:"Href",allowArgument:!0,html:"href=$",noMissingSpaceAfterComma:!1},{name:"Rel",func:"Rel",allowArgument:!0,html:"rel=$",noMissingSpaceAfterComma:!0},{name:"Type",func:"Type",allowArgument:!0,html:"type=$",noMissingSpaceAfterComma:!0}],Body:[],Div:[],Span:[],H1:[],H2:[],H3:[],H4:[],H5:[],A:[{name:"Href",func:"Href",allowArgument:!0,html:"href=$",noMissingSpaceAfterComma:!1}],Button:[{name:"Disabled",func:"Disabled",allowArgument:!1,html:"disabled",noMissingSpaceAfterComma:!1},{name:"Type",func:"Type",allowArgument:!0,html:"type=$",noMissingSpaceAfterComma:!0}],Img:[{name:"Src",func:"Src",allowArgument:!0,html:"src=$",noMissingSpaceAfterComma:!1},{name:"Alt",func:"Alt",allowArgument:!0,html:"alt=$",noMissingSpaceAfterComma:!0}],Label:[{name:"For",func:"For",allowArgument:!0,html:"for=$",noMissingSpaceAfterComma:!0}],Input:[{name:"Accept",func:"Accept",allowArgument:!0,html:"accept=$",noMissingSpaceAfterComma:!0},{name:"Checked",func:"Chckd",allowArgument:!1,html:"checked",noMissingSpaceAfterComma:!1},{name:"Disabled",func:"Disabled",allowArgument:!1,html:"disabled",noMissingSpaceAfterComma:!1},{name:"Multiple",func:"Multiple",allowArgument:!1,html:"multiple",noMissingSpaceAfterComma:!1},{name:"Name",func:"Name",allowArgument:!0,html:"name=$",noMissingSpaceAfterComma:!0},{name:"Placeholder",func:"Ph",allowArgument:!0,html:"placeholder=$",noMissingSpaceAfterComma:!0},{name:"Readonly",func:"Ro",allowArgument:!1,html:"readonly",noMissingSpaceAfterComma:!1},{name:"Type",func:"Type",allowArgument:!0,html:"type=$",noMissingSpaceAfterComma:!0}],Select:[{name:"Disabled",func:"Disabled",allowArgument:!1,html:"disabled",noMissingSpaceAfterComma:!1}],Option:[{name:"Selected",func:"Slctd",allowArgument:!1,html:"selected",noMissingSpaceAfterComma:!1}],Script:[{name:"Src",func:"Src",allowArgument:!0,html:"src=$",noMissingSpaceAfterComma:!1}]},e={t:"transparent",cc:"currentColor",n:"none"},X=[{name:"Align content",func:"Ac",css:"align-content: $",expanders:{fs:"flex-start",fe:"flex-end",c:"center",sb:"space-between",sa:"space-around",st:"stretch"},type:"RULE"},{name:"Align items",func:"Ai",css:"align-items: $",expanders:{fs:"flex-start",fe:"flex-end",c:"center",b:"baseline",st:"stretch"},type:"RULE"},{name:"Animation",func:"Anim",css:"animation: $",type:"RULE"},{name:"Animation delay",func:"Animdel",css:"animation-delay: $",type:"RULE"},{name:"Animation direction",func:"Animdir",css:"animation-direction: $",expanders:{a:"alternate",ar:"alternate-reverse",n:"normal",r:"reverse"},type:"RULE"},{name:"Animation duration",func:"Animdur",css:"animation-duration: $",type:"RULE"},{name:"Animation fill mode",func:"Animfm",css:"animation-fill-mode: $",expanders:{b:"backwards",bo:"both",f:"forwards",n:"none"},type:"RULE"},{name:"Animation iteration count",func:"Animic",css:"animation-iteration-count: $",expanders:{i:"infinite"},type:"RULE"},{name:"Animation name",func:"Animn",css:"animation-name: $",expanders:{n:"none"},type:"RULE"},{name:"Animation play state",func:"Animps",css:"animation-play-state: $",expanders:{p:"paused",r:"running"},type:"RULE"},{name:"Animation timing function",func:"Animtf",css:"animation-timing-function: $",expanders:{e:"ease",ei:"ease-in",eo:"ease-out",eio:"ease-in-out",l:"linear",se:"step-end",ss:"step-start"},type:"RULE"},{name:"Appearance",func:"Ap",css:"appearance: $",expanders:{a:"auto",n:"none"},type:"RULE"},{name:"Align self",func:"As",css:"align-self: $",expanders:{a:"auto",fs:"flex-start",fe:"flex-end",c:"center",b:"baseline",st:"stretch"},type:"RULE"},{name:"Bottom",func:"B",css:"bottom: $",expanders:{a:"auto"},type:"RULE"},{name:"Border All Edges",func:"BdA",css:[".[[el]] {","    border-width: 1px;","    border-style: solid;","}"],allowArgument:!1,type:"HELPER"},{name:"Border All Edges",func:"Bda",css:"border: $",expanders:{n:"none"},type:"RULE"},{name:"Border Bottom 1px solid",func:"BdB",css:[".[[el]] {","    border-top-width: 0;","    border-right-width: 0;","    border-bottom-width: 1px;","    border-left-width: 0;","    border-style: solid;","}"],allowArgument:!1,type:"HELPER"},{name:"Border bottom",func:"Bdb",css:"border-bottom: $",type:"RULE"},{name:"Border bottom color",func:"Bdbc",css:"border-bottom-color: $",expanders:e,type:"RULE"},{name:"Border bottom style",func:"Bdbs",css:"border-bottom-style: $",expanders:{d:"dotted",da:"dashed",do:"double",g:"groove",h:"hidden",i:"inset",n:"none",o:"outset",r:"ridge",s:"solid"},type:"RULE"},{name:"Border bottom width",func:"Bdbw",css:"border-bottom-width: $",expanders:{m:"medium",t:"thin",th:"thick"},type:"RULE"},{name:"Border color",func:"Bdc",css:"border-color: $",expanders:e,type:"RULE"},{name:"Border collapse",func:"Bdcl",css:"border-collapse: $",expanders:{c:"collapse",s:"separate"},type:"RULE"},{name:"Border Left 1px solid",func:"BdL",css:[".[[el]] {","    border-top-width: 0;","    border-right-width: 0;","    border-bottom-width: 0;","    border-left-width: 1px;","    border-style: solid;","}"],allowArgument:!1,type:"HELPER"},{name:"Border left",func:"Bdl",css:"border-left: $",type:"RULE"},{name:"Border left color",func:"Bdlc",css:"border-left-color: $",expanders:e,type:"RULE"},{name:"Border left style",func:"Bdls",css:"border-left-style: $",expanders:{d:"dotted",da:"dashed",do:"double",g:"groove",h:"hidden",i:"inset",n:"none",o:"outset",r:"ridge",s:"solid"},type:"RULE"},{name:"Border left width",func:"Bdlw",css:"border-left-width: $",expanders:{m:"medium",t:"thin",th:"thick"},type:"RULE"},{name:"Border Right 1px solid",func:"BdR",css:[".[[el]] {","    border-top-width: 0;","    border-right-width: 1px;","    border-bottom-width: 0;","    border-left-width: 0;","    border-style: solid;","}"],allowArgument:!1,type:"HELPER"},{name:"Border right",func:"Bdr",css:"border-right: $",type:"RULE"},{name:"Border radius",func:"Bdrad",css:"border-radius: $",type:"RULE"},{name:"Border radius bottom left",func:"Bdradbl",css:"border-bottom-left-radius: $",type:"RULE"},{name:"Border radius bottom right",func:"Bdradbr",css:"border-bottom-right-radius: $",type:"RULE"},{name:"Border radius top left",func:"Bdradtl",css:"border-top-left-radius: $",type:"RULE"},{name:"Border radius top right",func:"Bdradtr",css:"border-top-right-radius: $",type:"RULE"},{name:"Border right color",func:"Bdrc",css:"border-right-color: $",expanders:e,type:"RULE"},{name:"Border right style",func:"Bdrs",css:"border-right-style: $",expanders:{d:"dotted",da:"dashed",do:"double",g:"groove",h:"hidden",i:"inset",n:"none",o:"outset",r:"ridge",s:"solid"},type:"RULE"},{name:"Border right width",func:"Bdrw",css:"border-right-width: $",expanders:{m:"medium",t:"thin",th:"thick"},type:"RULE"},{name:"Border style",func:"Bds",css:"border-style: $",expanders:{d:"dotted",da:"dashed",do:"double",g:"groove",h:"hidden",i:"inset",n:"none",o:"outset",r:"ridge",s:"solid"},type:"RULE"},{name:"Border spacing",func:"Bdsp",css:"border-spacing: $",type:"RULE"},{name:"Border Top 1px solid",func:"BdT",css:[".[[el]] {","    border-top-width: 1px;","    border-right-width: 0;","    border-bottom-width: 0;","    border-left-width: 0;","    border-style: solid;","}"],allowArgument:!1,type:"HELPER"},{name:"Border top",func:"Bdt",css:"border-top: $",type:"RULE"},{name:"Border top color",func:"Bdtc",css:"border-top-color: $",expanders:e,type:"RULE"},{name:"Border top style",func:"Bdts",css:"border-top-style: $",expanders:{d:"dotted",da:"dashed",do:"double",g:"groove",h:"hidden",i:"inset",n:"none",o:"outset",r:"ridge",s:"solid"},type:"RULE"},{name:"Border top width",func:"Bdtw",css:"border-top-width: $",expanders:{m:"medium",t:"thin",th:"thick"},type:"RULE"},{name:"Border width",func:"Bdw",css:"border-width: $",expanders:{m:"medium",t:"thin",th:"thick"},type:"RULE"},{name:"Border X 1px solid",func:"BdX",css:[".[[el]] {","    border-top-width: 0;","    border-right-width: 1px;","    border-bottom-width: 0;","    border-left-width: 1px;","    border-style: solid;","}"],allowArgument:!1,type:"HELPER"},{name:"Border X",func:"Bdx",css:["border-left: $","border-right: $"],type:"RULE"},{name:"Border Y 1px solid",func:"BdY",css:[".[[el]] {","    border-top-width: 1px;","    border-right-width: 0;","    border-bottom-width: 1px;","    border-left-width: 0;","    border-style: solid;","}"],allowArgument:!1,type:"HELPER"},{name:"Border Y",func:"Bdy",css:["border-top: $","border-bottom: $"],type:"RULE"},{name:"Backface visibility",func:"Bfv",css:"backface-visibility: $",expanders:{h:"hidden",v:"visible"},type:"RULE"},{name:"Background",func:"Bg",css:"background: $",expanders:{n:"none",t:"transparent"},type:"RULE"},{name:"Background attachment",func:"Bga",css:"background-attachment: $",expanders:{f:"fixed",l:"local",s:"scroll"},type:"RULE"},{name:"Background color",func:"Bgc",css:"background-color: $",expanders:e,type:"RULE"},{name:"Background clip",func:"Bgcp",css:"background-clip: $",expanders:{bb:"border-box",cb:"content-box",pb:"padding-box"},type:"RULE"},{name:"Background image",func:"Bgi",css:"background-image: $",expanders:{n:"none"},type:"RULE"},{name:"Background origin",func:"Bgo",css:"background-origin: $",expanders:{bb:"border-box",cb:"content-box",pb:"padding-box"},type:"RULE"},{name:"Background position",func:"Bgp",css:"background-position: $",expanders:{left_t:"left 0",right_t:"right 0",left_b:"left 100%",right_b:"right 100%",left_c:"left center",right_c:"right center",c_b:"center 100%",c_t:"center 0",c:"center"},type:"RULE"},{name:"Background position (X axis)",func:"Bgpx",css:"background-position-x: $",expanders:{left:"left",right:"right",c:"50%"},type:"RULE"},{name:"Background position (Y axis)",func:"Bgpy",css:"background-position-y: $",expanders:{t:"0",b:"100%",c:"50%"},type:"RULE"},{name:"Background repeat",func:"Bgr",css:"background-repeat: $",expanders:{nr:"no-repeat",rx:"repeat-x",ry:"repeat-y",r:"repeat",s:"space",ro:"round"},type:"RULE"},{name:"Background size",func:"Bgz",css:"background-size: $",expanders:{a:"auto",ct:"contain",cv:"cover"},type:"RULE"},{name:"Blur (filter)",func:"Blur",css:"filter: blur($)",type:"RULE"},{name:"Brightness (filter)",func:"Brightness",css:"filter: brightness($)",type:"RULE"},{name:"Box shadow",func:"Bxsh",css:"box-shadow: $",expanders:{n:"none"},type:"RULE"},{name:"Box sizing",func:"Bxz",css:"box-sizing: $",expanders:{cb:"content-box",pb:"padding-box",bb:"border-box"},type:"RULE"},{name:"Color",func:"C",css:"color: $",expanders:e,type:"RULE"},{name:"Clear",func:"Cl",css:"clear: $",expanders:{n:"none",b:"both"},type:"RULE"},{name:"Content",func:"Cnt",css:"content: $",expanders:{n:"none",nor:"normal",oq:"open-quote",cq:"close-quote",noq:"no-open-quote",ncq:"no-close-quote"},type:"RULE"},{name:"Contrast (filter)",func:"Contrast",css:"filter: contrast($)",type:"RULE"},{name:"Cursor",func:"Cur",css:"cursor: $",expanders:{a:"auto",as:"all-scroll",c:"cell",cr:"col-resize",co:"copy",cro:"crosshair",d:"default",er:"e-resize",ewr:"ew-resize",g:"grab",gr:"grabbing",h:"help",m:"move",n:"none",nd:"no-drop",na:"not-allowed",nr:"n-resize",ner:"ne-resize",neswr:"nesw-resize",nwser:"nwse-resize",nsr:"ns-resize",nwr:"nw-resize",p:"pointer",pr:"progress",rr:"row-resize",sr:"s-resize",ser:"se-resize",swr:"sw-resize",t:"text",vt:"vertical-text",w:"wait",wr:"w-resize",zi:"zoom-in",zo:"zoom-out"},type:"RULE"},{name:"Display",func:"D",css:"display: $",expanders:{n:"none",b:"block",f:"flex",if:"inline-flex",i:"inline",ib:"inline-block",tb:"table",tbr:"table-row",tbc:"table-cell",li:"list-item",ri:"run-in",cp:"compact",itb:"inline-table",tbcl:"table-column",tbclg:"table-column-group",tbhg:"table-header-group",tbfg:"table-footer-group",tbrg:"table-row-group"},type:"RULE"},{name:"Drop shadow (filter)",func:"Dropshadow",css:"filter: drop-shadow($)",type:"RULE"},{name:"Font family",func:"Ff",css:"font-family: $",expanders:{c:'"Monotype Corsiva", "Comic Sans MS", cursive',f:"Capitals, Impact, fantasy",m:'Monaco, "Courier New", monospace',s:'Georgia, "Times New Roman", serif',ss:"Helvetica, Arial, sans-serif"},type:"RULE"},{name:"Filter",func:"Fil",css:"filter: $",expanders:{n:"none"},type:"RULE"},{name:"Fill (SVG)",func:"Fill",css:"fill: $",expanders:e,type:"RULE"},{name:"Float",func:"Fl",css:"float: $",expanders:{n:"none"},type:"RULE"},{name:"Font style",func:"Fs",css:"font-style: $",expanders:{n:"normal",i:"italic",o:"oblique"},type:"RULE"},{name:"Font variant",func:"Fv",css:"font-variant: $",expanders:{n:"normal",sc:"small-caps"},type:"RULE"},{name:"Font weight",func:"Fw",css:"font-weight: $",expanders:{b:"bold",br:"bolder",lr:"lighter",n:"normal"},type:"RULE"},{name:"Flex",func:"Fx",css:"flex: $",expanders:{a:"auto",n:"none"},type:"RULE"},{name:"Flex basis",func:"Fxb",css:"flex-basis: $",expanders:{a:"auto",n:"none"},type:"RULE"},{name:"Flex direction",func:"Fxd",css:"flex-direction: $",expanders:{r:"row",rr:"row-reverse",c:"column",cr:"column-reverse"},type:"RULE"},{name:"Flex flow",func:"Fxf",css:"flex-flow: $",expanders:{r:"row",rr:"row-reverse",c:"column",cr:"column-reverse",nw:"nowrap",w:"wrap",wr:"wrap-reverse"},type:"RULE"},{name:"Flex grow",func:"Fxg",css:"flex-grow: $",type:"RULE"},{name:"Flex shrink",func:"Fxs",css:"flex-shrink: $",type:"RULE"},{name:"Flex-wrap",func:"Fxw",css:"flex-wrap: $",expanders:{nw:"nowrap",w:"wrap",wr:"wrap-reverse"},type:"RULE"},{name:"Font size",func:"Fz",css:"font-size: $",type:"RULE"},{name:"Grayscale (filter)",func:"Grayscale",css:"filter: grayscale($)",type:"RULE"},{name:"Height",func:"H",css:"height: $",expanders:{a:"auto",av:"available",bb:"border-box",cb:"content-box",fc:"fit-content",maxc:"max-content",minc:"min-content"},type:"RULE"},{name:"Hue Rotate (filter)",func:"HueRotate",css:"filter: hue-rotate($)",type:"RULE"},{name:"Hyphens",func:"Hy",css:"hyphens: $",expanders:{a:"auto",n:"normal",m:"manual"},type:"RULE"},{name:"Invert (filter)",func:"Invert",css:"filter: invert($)",type:"RULE"},{name:"Justify content",func:"Jc",css:"justify-content: $",expanders:{fs:"flex-start",fe:"flex-end",c:"center",sb:"space-between",sa:"space-around"},type:"RULE"},{name:"Left",func:"L",css:"left: $",expanders:{a:"auto"},type:"RULE"},{name:"Line height",func:"Lh",css:"line-height: $",expanders:{n:"normal"},type:"RULE"},{name:"Line clamp",func:"LineClamp",css:[".[[el]] {","    -webkit-line-clamp: [0];","    max-height: [1];","    display: -webkit-box;","    -webkit-box-orient: vertical;","    overflow: hidden;","}","@supports (display:-moz-box) {","    .[[el]] {","        display: block;","    }","}","a.[[el]] {","    display: inline-block;","    display: -webkit-box;","    *display: inline;","    zoom: 1;","}","a.[[el]]:after {",'    content: ".";',"    font-size: 0;","    visibility: hidden;","    display: inline-block;","    overflow: hidden;","    height: 0;","    width: 0;","}"],allowArgument:!0,type:"HELPER"},{name:"List style image",func:"Lisi",css:"list-style-image: $",expanders:{n:"none"},type:"RULE"},{name:"List style position",func:"Lisp",css:"list-style-position: $",expanders:{i:"inside",o:"outside"},type:"RULE"},{name:"List style type",func:"List",css:"list-style-type: $",expanders:{n:"none",d:"disc",c:"circle",s:"square",dc:"decimal",dclz:"decimal-leading-zero",lr:"lower-roman",lg:"lower-greek",ll:"lower-latin",ur:"upper-roman",ul:"upper-latin",a:"armenian",g:"georgian",la:"lower-alpha",ua:"upper-alpha"},type:"RULE"},{name:"Letter spacing",func:"Lts",css:"letter-spacing: $",expanders:{n:"normal"},type:"RULE"},{name:"Margin (all edges)",func:"M",css:"margin: $",expanders:{a:"auto"},type:"RULE"},{name:"Max height",func:"Mah",css:"max-height: $",expanders:{a:"auto",maxc:"max-content",minc:"min-content",fa:"fill-available",fc:"fit-content"},type:"RULE"},{name:"Matrix (transform)",func:"Matrix",css:"transform: matrix($)",type:"RULE"},{name:"Matrix 3d (transform)",func:"Matrix3d",css:"transform: matrix($)",type:"RULE"},{name:"Max width",func:"Maw",css:"max-width: $",expanders:{n:"none",fa:"fill-available",fc:"fit-content",maxc:"max-content",minc:"min-content"},type:"RULE"},{name:"Margin bottom",func:"Mb",css:"margin-bottom: $",expanders:{a:"auto"},type:"RULE"},{name:"Min height",func:"Mih",css:"min-height: $",expanders:{a:"auto",fa:"fill-available",fc:"fit-content",maxc:"max-content",minc:"min-content"},type:"RULE"},{name:"Min width",func:"Miw",css:"min-width: $",expanders:{a:"auto",fa:"fill-available",fc:"fit-content",ini:"initial",maxc:"max-content",minc:"min-content"},type:"RULE"},{name:"Margin left",func:"Ml",css:"margin-left: $",expanders:{a:"auto"},type:"RULE"},{name:"Margin right",func:"Mr",css:"margin-right: $",expanders:{a:"auto"},type:"RULE"},{name:"Margin top",func:"Mt",css:"margin-top: $",expanders:{a:"auto"},type:"RULE"},{name:"Margin (X axis)",func:"Mx",css:["margin-left: $","margin-right: $"],expanders:{a:"auto"},type:"RULE"},{name:"Margin (Y axis)",func:"My",css:["margin-top: $","margin-bottom: $"],expanders:{a:"auto"},type:"RULE"},{name:"Outline",func:"O",css:"outline: $",expanders:{n:"none"},type:"RULE"},{name:"Opacity",func:"Op",css:"opacity: $",type:"RULE"},{name:"Opacity (filter)",func:"Opacity",css:"filter: opacity($)",type:"RULE"},{name:"Order",func:"Or",css:"order: $",type:"RULE"},{name:"Overflow",func:"Ov",css:"overflow: $",expanders:{a:"auto",h:"hidden",s:"scroll",v:"visible"},type:"RULE"},{name:"Overflow scrolling",func:"Ovs",css:"-webkit-overflow-scrolling: $",expanders:{a:"auto"},type:"RULE"},{name:"Overflow (X axis)",func:"Ovx",css:"overflow-x: $",expanders:{a:"auto",h:"hidden",s:"scroll",v:"visible"},type:"RULE"},{name:"Overflow (Y axis)",func:"Ovy",css:"overflow-y: $",expanders:{a:"auto",h:"hidden",s:"scroll",v:"visible"},type:"RULE"},{name:"Padding (all edges)",func:"P",css:"padding: $",type:"RULE"},{name:"Padding bottom",func:"Pb",css:"padding-bottom: $",type:"RULE"},{name:"Pointer events",func:"Pe",css:"pointer-events: $",expanders:{a:"auto",f:"fill",n:"none",p:"painted",s:"stroke",v:"visible",vf:"visibleFill",vp:"visiblePainted",vs:"visibleStroke"},type:"RULE"},{name:"Padding left",func:"Pl",css:"padding-left: $",type:"RULE"},{name:"Position",func:"Pos",css:"position: $",expanders:{a:"absolute",f:"fixed",r:"relative",s:"static",st:"sticky"},type:"RULE"},{name:"Padding right",func:"Pr",css:"padding-right: $",type:"RULE"},{name:"Perspective",func:"Prs",css:"perspective: $",expanders:{n:"none"},type:"RULE"},{name:"Perspective origin",func:"Prso",css:"perspective-origin: $",expanders:{t:"top",c:"center"},type:"RULE"},{name:"Padding top",func:"Pt",css:"padding-top: $",type:"RULE"},{name:"Padding (X axis)",func:"Px",css:["padding-left: $","padding-right: $"],type:"RULE"},{name:"Padding (Y axis)",func:"Py",css:["padding-top: $","padding-bottom: $"],type:"RULE"},{name:"Right",func:"R",css:"right: $",expanders:{a:"auto"},type:"RULE"},{name:"Rotate (transform)",func:"Rotate",css:"transform: rotate($)",type:"RULE"},{name:"Rotate 3d (transform)",func:"Rotate3d",css:"transform: rotate3d($)",type:"RULE"},{name:"RotateX (transform)",func:"RotateX",css:"transform: rotateX($)",type:"RULE"},{name:"RotateY (transform)",func:"RotateY",css:"transform: rotateY($)",type:"RULE"},{name:"RotateZ (transform)",func:"RotateZ",css:"transform: rotateZ($)",type:"RULE"},{name:"Resize",func:"Rsz",css:"resize: $",expanders:{n:"none",b:"both",h:"horizontal",v:"vertical"},type:"RULE"},{name:"Saturate (filter)",func:"Saturate",css:"filter: saturate($)",type:"RULE"},{name:"Scale (transform)",func:"Scale",css:"transform: scale($)",type:"RULE"},{name:"Scale 3d (transform)",func:"Scale3d",css:"transform: scale3d($)",type:"RULE"},{name:"ScaleX (transform)",func:"ScaleX",css:"transform: scaleX($)",type:"RULE"},{name:"ScaleY (transform)",func:"ScaleY",css:"transform: scaleY($)",type:"RULE"},{name:"Sepia (filter)",func:"Sepia",css:"filter: sepia($)",type:"RULE"},{name:"Skew (transform)",func:"Skew",css:"transform: skew($)",type:"RULE"},{name:"SkewX (transform)",func:"SkewX",css:"transform: skewX($)",type:"RULE"},{name:"SkewY (transform)",func:"SkewY",css:"transform: skewY($)",type:"RULE"},{name:"Stroke (SVG)",func:"Stk",css:"stroke: $",expanders:e,type:"RULE"},{name:"Stroke linecap (SVG)",func:"Stklc",css:"stroke-linecap: $",expanders:{b:"butt",r:"round",s:"square"},type:"RULE"},{name:"Stroke linejoin (SVG)",func:"Stklj",css:"stroke-linejoin: $",expanders:{b:"bevel",r:"round",m:"miter"},type:"RULE"},{name:"Stroke width (SVG)",func:"Stkw",css:"stroke-width: $",type:"RULE"},{name:"Top",func:"T",css:"top: $",expanders:{a:"auto"},type:"RULE"},{name:"Text align",func:"Ta",css:"text-align: $",expanders:{c:"center",e:"end",j:"justify",mp:"match-parent",s:"start"},type:"RULE"},{name:"Text align last",func:"Tal",css:"text-align-last: $",expanders:{a:"auto",c:"center",e:"end",j:"justify",s:"start"},type:"RULE"},{name:"Table layout",func:"Tbl",css:"table-layout: $",expanders:{a:"auto",f:"fixed"},type:"RULE"},{name:"Text decoration",func:"Td",css:"text-decoration: $",expanders:{lt:"line-through",n:"none",o:"overline",u:"underline"},type:"RULE"},{name:"Text indent",func:"Ti",css:"text-indent: $",type:"RULE"},{name:"Text overflow",func:"Tov",css:"text-overflow: $",expanders:{c:"clip",e:"ellipsis"},type:"RULE"},{name:"Text replace",func:"Tr",css:"text-replace: $",expanders:{n:"none"},type:"RULE"},{name:"Translate (transform)",func:"Translate",css:"transform: translate($)",type:"RULE"},{name:"Translate 3d (transform)",func:"Translate3d",css:"transform: translate3d($)",type:"RULE"},{name:"Translate X (transform)",func:"TranslateX",css:"transform: translateX($)",type:"RULE"},{name:"Translate Y (transform)",func:"TranslateY",css:"transform: translateY($)",type:"RULE"},{name:"Translate Z (transform)",func:"TranslateZ",css:"transform: translateZ($)",type:"RULE"},{name:"Text rendering",func:"Tren",css:"text-rendering: $",expanders:{a:"auto",os:"optimizeSpeed",ol:"optimizeLegibility",gp:"geometricPrecision"},type:"RULE"},{name:"Transform",func:"Trf",css:"transform: $",type:"RULE"},{name:"Transform origin",func:"Trfo",css:"transform-origin: $",expanders:{t:"top",c:"center"},type:"RULE"},{name:"Transform style",func:"Trfs",css:"transform-style: $",expanders:{f:"flat",p:"preserve-3d"},type:"RULE"},{name:"Transition",func:"Trs",css:"transition: $",type:"RULE"},{name:"Transition delay",func:"Trsde",css:"transition-delay: $",expanders:{i:"initial"},type:"RULE"},{name:"Transition duration",func:"Trsdu",css:"transition-duration: $",type:"RULE"},{name:"Transition property",func:"Trsp",css:"transition-property: $",expanders:{a:"all"},type:"RULE"},{name:"Transition timing function",func:"Trstf",css:"transition-timing-function: $",expanders:{e:"ease",ei:"ease-in",eo:"ease-out",eio:"ease-in-out",l:"linear",ss:"step-start",se:"step-end"},type:"RULE"},{name:"Text shadow",func:"Tsh",css:"text-shadow: $",expanders:{n:"none"},type:"RULE"},{name:"Text transform",func:"Tt",css:"text-transform: $",expanders:{n:"none",c:"capitalize",u:"uppercase",l:"lowercase"},type:"RULE"},{name:"User select",func:"Us",css:"user-select: $",expanders:{a:"all",el:"element",els:"elements",n:"none",t:"text",to:"toggle"},type:"RULE"},{name:"Visibility",func:"V",css:"visibility: $",expanders:{v:"visible",h:"hidden",c:"collapse"},type:"RULE"},{name:"Vertical align",func:"Va",css:"vertical-align: $",expanders:{b:"bottom",bl:"baseline",m:"middle",sub:"sub",sup:"super",t:"top",tb:"text-bottom",tt:"text-top"},type:"RULE"},{name:"Width",func:"W",css:"width: $",expanders:{a:"auto",bb:"border-box",cb:"content-box",av:"available",minc:"min-content",maxc:"max-content",fc:"fit-content"},type:"RULE"},{name:"White space",func:"Whs",css:"white-space: $",expanders:{n:"normal",p:"pre",nw:"nowrap",pw:"pre-wrap",pl:"pre-line"},type:"RULE"},{name:"White space collapse",func:"Whsc",css:"white-space-collapse: $",expanders:{n:"normal",ka:"keep-all",l:"loose",bs:"break-strict",ba:"break-all"},type:"RULE"},{name:"Word break",func:"Wob",css:"word-break: $",expanders:{ba:"break-all",ka:"keep-all",n:"normal"},type:"RULE"},{name:"Word wrap",func:"Wow",css:"word-wrap: $",expanders:{bw:"break-word",n:"normal"},type:"RULE"},{name:"Z index",func:"Z",css:"z-index: $",expanders:{a:"auto"},type:"RULE"}];var K,J,Q=[{acssValue:":a",cssValue:":active"},{acssValue:":c",cssValue:":checked"},{acssValue:":d",cssValue:":default"},{acssValue:":di",cssValue:":disabled"},{acssValue:":e",cssValue:":empty"},{acssValue:":en",cssValue:":enabled"},{acssValue:":fi",cssValue:":first"},{acssValue:":fc",cssValue:":first-child"},{acssValue:":fot",cssValue:":first-of-type"},{acssValue:":fs",cssValue:":fullscreen"},{acssValue:":f",cssValue:":focus"},{acssValue:":h",cssValue:":hover"},{acssValue:":ind",cssValue:":indeterminate"},{acssValue:":ir",cssValue:":in-range"},{acssValue:":inv",cssValue:":invalid"},{acssValue:":lc",cssValue:":last-child"},{acssValue:":lot",cssValue:":last-of-type"},{acssValue:":l",cssValue:":left"},{acssValue:":li",cssValue:":link"},{acssValue:":oc",cssValue:":only-child"},{acssValue:":oot",cssValue:":only-of-type"},{acssValue:":o",cssValue:":optional"},{acssValue:":oor",cssValue:":out-of-range"},{acssValue:":ro",cssValue:":read-only"},{acssValue:":rw",cssValue:":read-write"},{acssValue:":req",cssValue:":required"},{acssValue:":r",cssValue:":right"},{acssValue:":rt",cssValue:":root"},{acssValue:":s",cssValue:":scope"},{acssValue:":t",cssValue:":target"},{acssValue:":va",cssValue:":valid"},{acssValue:":vi",cssValue:":visited"}],ee=[{acssValue:"::b",cssValue:"::before"},{acssValue:"::a",cssValue:"::after"},{acssValue:"::fl",cssValue:"::first-letter"},{acssValue:"::fli",cssValue:"::first-line"},{acssValue:"::ph",cssValue:"::placeholder"}];if(!(u=u instanceof RegExp?u.toString().slice(1,-1):u)||"string"!=typeof u)throw new Error("api-cmd");var re,te=ne(u,[se,oe,ie,ae,le,ce,ue,fe,de,pe]);if(te)throw te;return u=function(){var e,r,t,n,s=m.test(u)?"HTML_METATAG_CMD":h.test(u)?"HTML_BODYTAG_CMD":null;if("HTML_METATAG_CMD"===s||"HTML_BODYTAG_CMD"===s){u=function(e){var r=u.split(g);if(!Array.isArray(r)||0===r.length)throw new Error("Base command - Unable to parse triple.");if("HTML_METATAG_CMD"===e){if(2<r.length)throw new Error("Base command - Max 1 pipe separator.")}else if(3<r.length)throw new Error("Base command - Max 2 pipe separators.");var t=r[0];if(!t)throw new Error("Base command - Missing <html-selector>.");var n=null,s=null;if(3===r.length){if(!r[1]||!w.test(r[1]))throw new Error("Base command - Missing or invalid <html-attributes>.");if(n=r[1],!r[2]||!b.test(r[2]))throw new Error("Base command - Missing or invalid <acss>.");s=r[2]}else if(2===r.length){if(!r[1])throw new Error("Base command - Unable to classify command at [1].");if(w.test(r[1]))n=r[1];else{if(!b.test(r[1]))throw new Error("Base command - Unable to classify command at [1].");s=r[1]}}if("HTML_METATAG_CMD"===e&&s)throw new Error("Base command - Metatag command must not define <acss>.");return{type:e,htmlSelectorInstructionString:t,htmlAttributesInstructionsString:n,acssInstructionsString:s}}(s);var o=(e=s,r=u.htmlSelectorInstructionString,"HTML_METATAG_CMD"===e?ne(r,[me,he]):"HTML_BODYTAG_CMD"===e?ne(r,[me,ge,we,be,ye,ve,Ee,xe,$e]):null);if(o)throw o;var i=function(e,r){for(var t=r.match(U),n=null,s=null,o=[],i=0,a=t.length;i<a;i++){var l=t[i];if(l)if(0<i){var c=l[0];if("."===c)o.push(l.slice(1));else if("#"===c){if(0<o.length)throw new Error("HTML selector instruction string - No invalid order.");if(s)throw new Error("HTML selector instruction string - No multiple IDs. ");s=l.slice(1)}}else{if(!(n=l))throw new Error("Unable to parse HTML selector tag.");if(!W[n])throw new Error('Missing template for "'+n+'" tag.');if(0<=W[n].indexOf("[[modifiers]]")){if(0<=W[n].indexOf("[[content]]"))if(0<=["[object Array]","[object String]","[object Undefined]"].indexOf(Ge(f))&&void 0===d)K={},J=f;else{if(!("[object Object]"===Ge(f)&&0<=["[object Array]","[object String]","[object Undefined]"].indexOf(Ge(d))))throw new Error("Expected types fn('', [] || '' || undefined, undefined) or fn('', {}, [] || '' || undefined).");K=f,J=d}else if(K={},J="",0<=W[n].indexOf("[[value]]")){if(void 0!==d)throw new Error("Expected types fn('', any, undefined).");W[n]=W[n].replace("[[value]]",JSON.stringify(f))}else if(void 0!==f||void 0!==d)throw new Error("Expected types fn('', undefined, undefined).")}else{if(!(0<=W[n].indexOf("[[content]]")))throw new Error("invalidTemplate");if(!(0<=["[object Array]","[object String]","[object Undefined]"].indexOf(Ge(f))&&void 0===d))throw new Error("Expected types fn('', [] || '' || undefined, undefined).");K={},J=f}J=Array.isArray(J)?J.join(""):J||""}}return{tag:n,id:s,classes:o}}(0,u.htmlSelectorInstructionString),a=[];if(u.htmlAttributesInstructionsString){if(n=u.htmlAttributesInstructionsString,o=ne(n,[Ae]))throw o;a=function(e,r){var t=Z[e]||[],n=r.match(k);if(!n)throw new Error("HTML attributes instructions string - Unable to match any instruction string.");for(var s=[],o=!1,i=0,a=n.length;i<a;i++){var l=n[i],c=Re(l,t,e);if(0<i){var u=c.score,f=s[s.length-1].score;if(u<f)o=!0;else if(u===f)throw new Error("HTML attributes instructions string - Duplicate instructions.")}s.push(c)}if(o)throw function(e){for(var r=Ie(He(e),"score"),t=[],n=[],s=0,o=r.length;s<o;s++){var i=e[s].instructionString;i&&t.push(i);var a=r[s].instructionString;a&&n.push(a)}t=t.join(" "),n=n.join(" ");var l="HTML attributes instructions string - ";return new Error(l+=t&&n?'Found "'+t+'" expected "'+n+'".':"Invalid instructions order.")}(s);return s}(i.tag,u.htmlAttributesInstructionsString)}var l=De(null,[]);if(u.acssInstructionsString){if(t=u.acssInstructionsString,o=ne(t,[Le]))throw o;var c=function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",t=0;t<6;t++)r+=e.charAt(Math.floor(Math.random()*e.length));return"css-"+r}();l=function(e,r){var t,n,s,o,i=r.match(D);if(!i)throw new Error("ACSS instructions string - Unable to match any instruction string.");for(var a=[],l=[],c=!1,u=0,f=i.length;u<f;u++){var d=i[u],p=Ue(d),m=(t=d,n=p.score,s=p.pseudoScore,o=p.mediaValue,{instructionString:t,score:parseInt("10"+ze(""+(o+1),4,"0")+ze(""+n,4,"0")+ze(""+s,3,"0"))});if(0<u){var h=m.score,g=a[a.length-1].score;if(h<g)c=!0;else if(h===g)throw new Error("ACSS instructions string - Duplicate ACSS instructions.")}a.push(m),l.push(p)}if(c)throw function(e){for(var r=Ie(He(e),"score"),t=[],n=[],s=0,o=r.length;s<o;s++){var i=e[s].instructionString;i&&t.push(i);var a=r[s].instructionString;a&&n.push(a)}t=t.join(" "),n=n.join(" ");var l="ACSS instructions string - ";return new Error(l+=t&&n?'Found "'+t+'" expected "'+n+'".':"Invalid ACSS instructions order.")}(a);return De(e,l)}(c,u.acssInstructionsString),i.classes.unshift(c)}return{selector:i,attributes:a,acss:l}}throw new Error("Unsupported command type.")}(),0<(re=Ye([function(e){for(var r=[],t=0,n=e.rules.length;t<n;t++){var s=e.rules[t];if(s&&s.acssHelper){for(var o=[],i=0,a=s.acssHelper.css.length;i<a;i++){var l=s.acssHelper.css[i]+(0===i?G.replace("$","HELPERS"):"");o.push(l)}o=qe(o=(o=o.join("\n")).replace(/\[\[el\]\]/g,e.styleID),s.args),r=r.concat([o])}}return r.join("\n")}(u.acss),function(e){for(var r=function(e){for(var r=e.length,t=[];r--;){var n,s,o=e.shift(),i=null,a=[];for(n=0,s=o.length;n<s;n++)i=o[n],-1===a.indexOf(i.selector)&&a.push(i.selector);var l=[];for(n=0,s=a.length;n<s;n++){for(var c=Ve(o[0].mediaValue,a[n],[]),u=0,f=o.length;u<f;u++)(i=o[u])&&i.selector===c.selector&&c.css.push(i.css);c.css=c.css.join("\n"),0<Ye(c.css).length&&l.push(c)}0<l.length&&t.push(l)}return t}(function(e){for(var r=[],t=[],n=0,s=e.length;n<s;n++){var o=e[n],i=e[n-1];(0===n||i&&i.mediaValue===o.mediaValue)&&t.push(o),i&&i.mediaValue!==o.mediaValue&&(r.push(t),t=[o]),n===s-1&&r.push(t)}return r}(function(e){for(var r=[],t=0,n=e.rules.length;t<n;t++){var s=e.rules[t];s&&s.acssRule&&r.push(_e(e,s))}return r}(e))),t=r.length,n=[];t--;){var s=r.shift();if(0!==s.length){for(var o=[],i=0,a=s.length;i<a;i++){var l=s[i];o=o.concat([l.selector+" {\n    "+l.css.replace(/\n/g,"\n    ")+"\n}"])}o=o.join("\n");var c=s[0].mediaValue;0<c&&(o="@media (min-width: "+c+"px) {\n    "+o.replace(/\n/g,"\n    ")+"\n}"),n.push(o)}}return n=(n=n.join("\n")).replace("\n",G.replace("$","RULES")+"\n")}(u.acss)].join("\n"))).length?["<style>\n    "+re.replace(/\n/g,"\n    ")+"\n</style>",je(u.selector,u.attributes)].join(""):je(u.selector,u.attributes);function ne(e,r){for(var t=0,n=r.length;t<n;t++){var s=r[t](e);if(s)return s}return null}function se(e){return r.test(e)?new Error("Base command - No space at start."):null}function oe(e){return t.test(e)?new Error("Base command - No space at end."):null}function ie(e){return n.test(e)?new Error("Base command - No space followed by comma."):null}function ae(e){return s.test(e)?new Error("Base command - No multiple spaces."):null}function le(e){return o.test(e)?new Error("Base command - No multiple commas."):null}function ce(e){return i.test(e)?new Error("Base command - No multiple pipes."):null}function ue(e){return a.test(e)?new Error("Base command - No spaces around pipe."):null}function fe(e){return l.test(e)?new Error("Base command - No pipe at end."):null}function de(e){return c.test(e)?new Error("Base command - No space after open paren."):null}function pe(e){return p.test(e)?new Error("Base command - No space before close paren."):null}function me(e){return y.test(e)?new Error("HTML selector instruction string - No spaces."):null}function he(e){return v.test(e)?new Error("HTML selector instruction string - No unallowed character."):null}function ge(e){return E.test(e)?new Error("HTML selector instruction string - No unallowed character."):null}function we(e){return x.test(e)?new Error("HTML selector instruction string - No multiple dots."):null}function be(e){return $.test(e)?new Error("HTML selector instruction string - No multiple hashes."):null}function ye(e){return A.test(e)?new Error("HTML selector instruction string - No dot at end."):null}function ve(e){return R.test(e)?new Error("HTML selector instruction string - No hash at end."):null}function Ee(e){return T.test(e)?new Error("HTML selector instruction string - No hash followed by dot."):null}function xe(e){return S.test(e)?new Error("HTML selector instruction string - No dot followed by hash."):null}function $e(e){return L.test(e)?new Error("HTML selector instruction string - No name separator at boundary."):null}function Ae(e){return B.test(e)?new Error("HTML attributes instructions string - No missing space between instructions."):null}function Re(e,r,t){var n=e.match(C);if(!n)throw new Error("HTML attributes instruction string - Instruction must follow <Attribute>(<value>?) syntax.");var s=Fe(r,"func",n[1]);if(-1===s)throw new Error('Unsupported HTML attribute "'+n[1]+'" for "'+t+'" tag.');var o=r[s],i=function(e,r){if(!e.allowArgument)return r?new Error('HTML attributes instruction string - Instruction "'+e.func+'" must not define parameter.'):null;var t=[Te];e.noMissingSpaceAfterComma&&t.push(Se);return ne(r,t)}(o,n[2]);if(i)throw i;var a,l,c,u=n[2]||"";return a=e,l=u,c=s,function(e,r){if(!e||!r)return e;if("object"!=typeof e||"object"!=typeof r)return e;var t=[];for(var n in r)r.hasOwnProperty(n)&&t.push(n);for(var s=t.length;s--;){var o=t[s];e[o]=He(r[o])}return e}(He(o),{instructionString:a,instructionValue:l,score:c})}function Te(e){return O.test(e)?new Error("HTML attributes instruction value - No unallowed char."):null}function Se(e){return M.test(e)?new Error("HTML attributes instruction value - No missing space after comma."):null}function Le(e){return N.test(e)?new Error("ACSS instructions string - No missing space between instructions."):null}function Ue(e){var r=e.match(_);if(!r)throw new Error("ACSS instruction string - Instruction must follow <Style>[(<value>,<value>?,...)][<!>][:<pseudo-class>][::<pseudo-element>][@<breakpoint-identifier>]");var t=Fe(X,"func",r[1]);if(-1===t)throw new Error('Unsupported ACSS rule "'+r[1]+'".');var n=t+1,s=X[t],o=function(e,r){if("HELPER"===e.type){if(!e.allowArgument&&r)return new Error('ACSS instruction value - Instruction "'+e.func+'" must not define parameter."')}else if(!Ye(r))return new Error('ACSS instruction value - Instruction "'+e.func+'" must define parameter.');return function(e){if(e=e.replace(j,""),V.test(e))return new Error("ACSS instruction value - No missing space after comma.");return null}(r)}(s,r[2]);if(o)throw o;if("RULE"===s.type)return function(e,r,t){var n=(a=e,l=t[2],l=function(e){for(var r=null;r=H.exec(e);)if(Array.isArray(r)&&0<r.length){var t=r.index+r[1].length,n=t+1+r[2].length+r[3].length,s=Be(r[2],r[3]);e=e.slice(0,t)+s+e.slice(n),r.lastIndex=n}return e}(l=(l=l.replace(P[0],"(")).replace(P[1],")")),l=function(e,r){if(!e.expanders||"object"!=typeof e.expanders)return r;for(var t in e.expanders)if(e.expanders.hasOwnProperty(t))for(var n=new RegExp("(^|\\s)("+t+")(\\s|$)","g"),s=null;s=n.exec(r);)if(Array.isArray(s)&&0<s.length){var o=s.index+s[1].length,i=o+s[2].length;r=r.slice(0,o)+e.expanders[t]+r.slice(i)}return r}(a,l)),s="!"===t[3],o=function(e){var r=e.match(q);if(!Array.isArray(r)||0===r.length)return Me([],0);for(var t=0,n=[],s=[],o=!1,i=0,a=r.length;i<a;i++){var l=r[i],c=Fe(Q,"acssValue",l);if(-1===c)throw new Error('ACSS pseudo classes string - Unsupported class: "'+l+'".');var u=c+1;if(t+=u,0<i){var f=u,d=n[n.length-1];if(f<d)o=!0;else if(f===d)throw new Error("ACSS pseudo classes string - Duplicate pseudo classes.")}n.push(u),s.push(Q[c].cssValue)}if(o)throw function(e){for(var r=Ie(He(e)),t=[],n=[],s=0,o=r.length;s<o;s++){var i=Q[e[s]-1].acssValue;i&&t.push(i);var a=Q[r[s]-1].acssValue;a&&n.push(a)}t=t.join(""),n=n.join("");var l="ACSS pseudo classes string - ";return new Error(l+=t&&n?'Found "'+t+'" expected "'+n+'".':"Invalid pseudo classes order.")}(n);return Me(s,t)}(t[4]),i=function(e){var r=e.match(Y);if(!Array.isArray(r)||0===r.length)return Ne([],0);for(var t=0,n=[],s=[],o=!1,i=0,a=r.length;i<a;i++){var l=r[i],c=Fe(ee,"acssValue",l);if(-1===c)throw new Error('ACSS pseudo elements string - Unsupported element: "'+l+'".');var u=Q.length+c+1;if(t+=u,0<i){var f=u,d=n[n.length-1];if(f<d)o=!0;else if(f===d)throw new Error("ACSS pseudo elements string - Duplicate pseudo elements.")}n.push(u),s.push(ee[c].cssValue)}if(o)throw function(e){for(var r=Ie(He(e)),t=[],n=[],s=0,o=r.length;s<o;s++){var i=ee[e[s]-1].acssValue;i&&t.push(i);var a=ee[r[s]-1].acssValue;a&&n.push(a)}t=t.join(""),n=n.join("");var l="ACSS pseudo elements string - ";return new Error(l+=t&&n?'Found "'+t+'" expected "'+n+'".':"Invalid pseudo elements order.")}(n);return Ne(s,t)}(t[5]);var a,l;if(Array.isArray(o.array)&&0<o.array.length&&Array.isArray(i.array)&&0<i.array.length)throw new Error('ACSS instruction string - Define either "pseudo classes" or "pseudo elements" exclusively.');var c=o.score||i.score,u=function(e){if(!e)return 0;var r=parseInt(e.slice(1));if(isNaN(r)||r<=0||9e3<r)throw new Error("ACSS instruction string - Media query value must be in range 0..9000.");return r}(t[6]);return f=e,d=r,p=n,m=s,h=o.array,g=i.array,w=c,b=u,{acssRule:f,score:d,arg:p,important:m,pseudoClasses:h,pseudoElements:g,pseudoScore:w,mediaValue:b};var f,d,p,m,h,g,w,b}(s,n,r);if("HELPER"===s.type)return function(e,r,t){if(t[3]||t[4]||t[5]||t[6])throw new Error("ACSS instruction string - Helper must follow <Helper> syntax.");var n=t[2].split(/\s*,\s*/);n=n[0]?n:[];for(var s=[],o=e.css.join("").match(/\[\d+\]/g)||[],i=0,a=o.length;i<a;i++)-1===s.indexOf(o[i])&&s.push(o[i]);if(s.length!==n.length)throw new Error("ACSS instruction string - Passed "+n.length+" argument(s), expected "+s.length+' for "'+e.func+'" helper.');return l=e,c=r,u=n,{acssHelper:l,score:c,args:u,pseudoScore:0,mediaValue:0};var l,c,u}(s,n,r);throw new Error('ACSS config - Missing "type".')}function Be(e,r){var t=ne(e,[ke,Ce,Oe]);if(t)throw t;var n=function(e){var r=e.match(z);if(!r)throw new Error("ACSS color hex - Unable to parse.");var t=parseInt(r[1],16),n=parseInt(r[2],16),s=parseInt(r[3],16);return o=t,i=n,a=s,{r:o,g:i,b:a};var o,i,a}(e),s=function(e){if("string"==typeof e&&0<e.length){if("."!==e[0])throw new Error("ACSS color opacity - Unable to parse opacity.");e="0"+e;var r=parseFloat(e);if(isNaN(r)||(""+r).length!==e.length||r<0||1<r)throw new Error("ACSS color opacity - Unable to parse opacity.");if(4<e.length)throw new Error("ACSS color opacity - Max precision 0.01 exceeded.");return r}return 100}(r);return"rgba("+n.r+","+n.g+","+n.b+","+s+")"}function ke(e){return F.test(e)?new Error("ACSS color hex - No lowercased letter."):null}function Ce(e){return I.test(e)?new Error("ACSS color hex - No invalid hex value."):null}function Oe(e){return 6!==e.length?new Error("ACSS color hex - No invalid length."):null}function Me(e,r){return{array:e,score:r}}function Ne(e,r){return{array:e,score:r}}function De(e,r){return{styleID:e,rules:r}}function _e(e,r){for(var t=Array.isArray(r.acssRule.css)?r.acssRule.css:[r.acssRule.css],n="",s=0,o=t.length;s<o;s++)n=(n=t[s]).slice(0,n.length-1)+r.arg,t[s]=Pe(n,r.important);t=t.join("\n");var i="."+e.styleID+r.pseudoClasses.join("")+r.pseudoElements.join("");return Ve(r.mediaValue,i,t)}function Ve(e,r,t){return{mediaValue:e,selector:r,css:t}}function je(e,r){var t=W[e.tag],n=[];if(e.id&&(n=n.concat(['id="'+e.id+'"'])),Array.isArray(e.classes)&&0<e.classes.length&&(n=n.concat(['class="'+e.classes.join(" ")+'"'])),Array.isArray(r)&&0<r.length){for(var s=[],o=0,i=r.length;o<i;o++){var a=r[o];a&&a.html&&(s=s.concat(0<=a.html.indexOf("$")?[a.html.replace("$",'"'+a.instructionValue+'"')]:[a.html]))}0<s.length&&(n=n.concat(s.join(" ")))}if(K&&"object"==typeof K)for(var l in K)K.hasOwnProperty(l)&&(n=n.concat(["data-"+l+"='"+JSON.stringify(K[l])+"'"]));return n=0===n.length?"":" "+n.join(" "),t=(t=t.replace("[[modifiers]]",n)).replace("[[content]]",J)}function Pe(e,r){var t=(e=(e=";"===(e=e.replace(/\s{2,}/g," "))[e.length-1]?e.slice(0,-1):e).split(/\s*:\s*/))[0],n=e[1];r=r?"!important":"";var s=": ";if(t&&n){if(-1===["filter","appearance","column-count","column-gap","column-rule","display","transform","transform-style","transform-origin","transition","user-select","animation","perspective","animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-play-state","opacity","background","background-image","font-smoothing","text-size-adjust","backface-visibility","box-sizing","overflow-scrolling"].indexOf(t))return t+s+n+r+";";var o=[t+s+n+r];if("opacity"===t){var i=+n.replace(/\s/g,"");if(isNaN(i))return"";o.push("filter: alpha(opacity="+Math.floor(100*i)+")"+r)}else if("font-smoothing"===t)o.push("-webkit-"+t+s+n+r),o.push("-moz-osx-"+t+s+n+r);else if("background"===t||"background-image"===t){var a="-gradient";(0<=n.indexOf("linear"+a)||0<=n.indexOf("radial"+a))&&(o.push("-webkit-"+t+s+n+r),o.push("-moz-"+t+s+n+r),o.push("-ms-"+t+s+n+r))}else"text-overflow"===t?o.push("-ms-"+t+s+n+r):(o.push("-webkit-"+t+s+n+r),o.push("-moz-"+t+s+n+r),-1===t.indexOf("animation")&&o.push("-ms-"+t+s+n+r));return o.join(";\n")+";"}return""}function He(e,r){if(!e||"object"!=typeof e)return e;var t,n;if(e instanceof Array){var s=e.length;t=new Array(s);for(var o=0;o<s;o++)if("object"===(n=typeof e[o]))t[o]=He(e[o],r);else{if("function"===n)continue;t[o]=e[o]}return t}for(var i in t={},e)if(!r||!r[i]){var a=e[i];if("object"===(n=typeof a))t[i]=He(e[i],r);else{if("function"===n)continue;t[i]=a}}return t}function Fe(e,r,t){for(var n="function"==typeof r,s=void 0!==t,o=0,i=e.length;o<i;o++)if(n){if(r.call(e,e[o],o))return o}else if(s){if(e[o]&&e[o][r]===t)return o}else if(e[o]===r)return o;return-1}function Ie(e,r){for(var t,n,s,o=e.length,i=0;i<o;i++)for(var a=0;a<o-i-1;a++)if(t=e[a],n=e[a+1],void 0,s=r?t[r]:t,(r?n[r]:n)<s){var l=e[a];e[a]=e[a+1],e[a+1]=l}return e}function ze(e,r,t){if((r-=e.length)<0)return e;for(void 0===t&&(t=" ");r--;)e=t+e;return e}function qe(e,t){return e.replace(/\[\d+\]/g,function(e){var r=t[+e.substring(1,e.length-1)];return null===r?"":r})}function Ye(e){return e.replace(/^\s+|\s+$/,"")}function Ge(e){return Object.prototype.toString.call(e)}}function $schema(a,l,o){if("string"!=typeof a)throw new Error("api-name");if(void 0!==l&&"string"!=typeof l)throw new Error("api-defaultLanguage");if(void 0!==o&&"object"!=typeof o)throw new Error("api-obj");var e=$malloc("__SCHEMA");if(void 0===l&&void 0===o)return e(a)||null;function r(){for(var e in this.name=a,this.rule={},o)if(o.hasOwnProperty(e)){var r={type:s(o[e][0]),msg:{}},t=o[e][1];for(var n in t)t.hasOwnProperty(n)&&(0<=["prepare","validate"].indexOf(n)?r[n]=t[n]:r.msg[n]=t[n]);this.rule[e]=r}function s(e){switch(e){case Number:return"[object Number]";case String:return"[object String]";case Array:return"[object Array]";case Date:return"[object Date]";case Object:return"[object Object]";case Boolean:return"[object Boolean]";case Function:return"[object Function]"}return null}}l=l.toUpperCase(),r.prototype={prepareAndValidate:function(e,r){if(!e||"object"!=typeof e)throw new Error("api-o");if(r){if("string"!=typeof r)throw new Error("api-lan");r=r.toUpperCase()}var t,n=new $ErrorBuilder;for(var s in this.rule)if(this.rule.hasOwnProperty(s)){var o=this.rule[s],i=e[s];"function"==typeof o.prepare&&(t=Object.prototype.toString.call(i)===o.type,i=o.prepare(i,t,e),e[s]=i),t=Object.prototype.toString.call(i)===o.type,o.validate&&!o.validate(i,t,e)&&n.push(new $Error(a+"."+s,o.msg[r||l]||'Invalid "'+s+'".'))}return n},clean:function(e){if(!e||"object"!=typeof e)throw new Error("api-o");var r={};for(var t in this.rule)this.rule.hasOwnProperty(t)&&(r[t]=e[t]);return r},makeError:function(e,r){if(!e||"string"!=typeof e)throw new Error("api-name");if(r){if("string"!=typeof r)throw new Error("api-lan");r=r.toUpperCase()}var t=this.rule[e];if(!t||!t.msg)throw new Error('Property "'+e+'" not found.');return new $Error(a+"."+e,t.msg[r||l]||'Invalid "'+e+'".')}},e(a,new r)}function $test(e,r,t){if(!e||"string"!=typeof e)throw new Error("api-k");if(!r||"function"!=typeof r)throw new Error("api-fn");function n(e){var n=this;n.env=e,n.tests=[],n.emitter=new u,n.results=new i,n.logger=new a(e),n.terminated=!1,n.finalizeTimeout=5e3,n.findTest=function(e){for(var r=0;r<n.tests.length;r++){var t=n.tests[r];if(t&&t.id===e)return t}return null},n.runNextTest=function(e){var r=n.tests.shift();if(r)r.run();else{if(e>=n.finalizeTimeout)return n.finalize();setTimeout(function(){e=e||0,n.runNextTest(e+=500)},500)}},n.finalize=function(){this.logger.logResults(this.results.results)},n.canRunNextTest=function(){return!n.terminated},n.env.on("windowError",function(e){n.emitter.trigger("error",[e,"windowError"])}),n.env.on("uncaughtProcessException",function(e){n.emitter.trigger("error",[e,"uncaughtException"])}),n.env.on("unhandledProcessRejection",function(e){n.emitter.trigger("error",[e,"unhandledRejection"])})}function s(e,r,t,n){var s=this;s.id=e,s.fn=r,s.emitter=t,s.assert=new o(e,t),s.maxTimeout=n||2e4,s.execTime=0,s.startInterval=function(){s.interval=setInterval(function(){if(s.execTime+=500,s.execTime>=s.maxTimeout){var e=new Error('Test "'+s.id+'" exceeded maxTimeout '+s.maxTimeout+"ms.");return s.emitter.trigger("error",[e,"timingError"])}},500)},s.runNextTest=function(){clearInterval(s.interval),s.assert.onTestEnd(),s.emitter.trigger("runNextTest")}}function o(e,r){var i=this;i.testName=e,i.emitter=r,i.isAsync=!1,i.callbackCounter=-1,i.expectedAssertions=0,i.assertionCounter=0,i.callback=function(){i.callbackCounter--,0===i.callbackCounter&&i.emitter.trigger("assert.asyncTestEnded")},i.onTestEnd=function(){if(0<i.expectedAssertions&&i.expectedAssertions!==i.assertionCounter){var e="Expected "+i.expectedAssertions;e+=1===i.expectedAssertions?" assertion":" assertions",e+=", but "+i.assertionCounter,e+=1===i.assertionCounter?" was run.":" were run.",i.emitter.trigger("assert.result",i.composeAssertionResult(e,void 0,null,new Error("assert.expect")))}},i.composeAssertionResult=function(e,r,t,n,s,o){return{testName:i.testName,msg:e,expected:r,actual:t,expectedValue:n,actualValue:s,err:o}}}function i(){this.results={},this.composeTestResult=function(e,r){return{results:e,passed:r}}}function a(e){var s=this;s.logger=e.isNode()?new c:new l,s.logger.initialLog(),s.composeResultsForLogger=function(e,r,t){return{results:e,passed:r,failed:t}},s.prepareResults=function(e){var r=0,t=0;for(var n in e){if(e.hasOwnProperty(n))e[n].passed?r++:t++}return s.composeResultsForLogger(e,r,t)},s.getAssertErrorsStr=function(e){for(var r="",t=0;t<e.length;t++){var n=e[t];n.err&&(r+="  ---\n",r+="  message: '"+n.msg+"'\n",r+="  severity: failed\n",r+="  expected: "+n.expected+"\n",r+="  actual: "+n.actual+"\n",r+="  expectedValue: "+n.expectedValue+"\n",r+="  actualValue: "+n.actualValue+"\n",r+="  stack: "+n.err.stack+"\n",r+="  ...\n")}return r}}function l(){this.domReady=function(e){var r=document;"complete"===r.readyState||"loading"!==r.readyState?e():r.addEventListener("DOMContentLoaded",e)}}function c(){}function u(){this.fns={}}n.prototype={addTest:function(e,r,t){if(this.findTest(e))throw new Error('testDuplicate "'+e+'"');this.tests.push(new s(e,r,this.emitter,t))},run:function(){var t=this;t.emitter.on("runNextTest",function(){t.canRunNextTest()&&t.runNextTest()}),t.emitter.on("error",function(e){t.terminated=!0;var r=e[0]?": "+e[0].stack:"";console.error("TEST ERROR DETECTION [ENV:"+t.env.type+"] ("+e[1]+")"+r),t.env.isNode()&&t.env.env.exit(1)}),t.emitter.on("assert.result",function(e){t.results.push(e)}),t.emitter.trigger("runNextTest")}},s.prototype={run:function(){var r=this;r.startInterval();try{r.fn(r.assert)}catch(e){return r.emitter.trigger("error",[e,"syncError"])}r.isAsync()?r.emitter.on("assert.asyncTestEnded",function(){r.runNextTest()}):r.runNextTest()},isAsync:function(){return this.assert.isAsync}},o.prototype={ok:function(e,r,t,n){var s=this;return s.assertionCounter++,e?s.emitter.trigger("assert.result",s.composeAssertionResult(n,!0,!0,t,r,null)):s.emitter.trigger("assert.result",s.composeAssertionResult(n,!0,!1,t,r,new Error("assert.ok")))},async:function(e){if(isNaN(parseInt(e))||e<=0)throw new Error("api-expectedCallbacks");return this.isAsync=!0,this.callbackCounter=e,this.callback},expect:function(e){if(isNaN(parseInt(e))||e<=0)throw new Error("api-expectedAssertions");this.expectedAssertions=e}},i.prototype={push:function(e){var r=this;r.results[e.testName]||(r.results[e.testName]=r.composeTestResult([],!0)),r.results[e.testName].results.push(e),e.err&&(r.results[e.testName].passed=!1)}},a.prototype={logResults:function(e){e=this.prepareResults(e);var r=0;for(var t in e.results)e.results.hasOwnProperty(t)&&(this.logger.logTestResult(r,t,e.results[t].results,this.getAssertErrorsStr),r++);this.logger.logFooter(e)}},l.prototype={initialLog:function(){this.domReady(function(){var e=document,r=e.getElementById("tests");r||((r=e.createElement("div")).setAttribute("id","tests"),r.style.fontFamily='"Courier New", Courier, monospace',r.style.fontSize="12px");var t=e.createElement("div");t.textContent="TAP version 13",r.appendChild(t);var n=e.querySelector("body");n&&n.appendChild(r)})},logTestResult:function(e,r,t,n){var s=document;t=n(t);var o=s.createElement("div");t?(o.style.color="red",o.textContent="not ok "+(e+1)+" "+r,s.getElementById("tests").appendChild(o),(o=s.createElement("pre")).style.margin="0 0 15px 0",o.style.fontFamily="inherit",o.textContent=t):o.textContent="ok "+(e+1)+" "+r,s.getElementById("tests").appendChild(o)},logFooter:function(e){var r=document,t=r.createElement("div");t.textContent="1.."+(e.passed+e.failed),r.getElementById("tests").appendChild(t),(t=r.createElement("div")).textContent="# pass "+e.passed,r.getElementById("tests").appendChild(t),(t=r.createElement("div")).style.color="red",t.textContent="# fail "+e.failed,r.getElementById("tests").appendChild(t)}},c.prototype={initialLog:function(){console.log("TAP version 13")},logTestResult:function(e,r,t,n){(t=n(t))?(console.log("[31mnot ok "+(e+1)+" "+r+"[0m"),console.log(t)):console.log("ok "+(e+1)+" "+r)},logFooter:function(e){console.log("1.."+(e.passed+e.failed)),console.log("# pass "+e.passed),console.log("[31m# fail "+e.failed+"[0m")}},u.prototype={on:function(e,r){this.fns[e]=r},trigger:function(e,r){var t=this.fns[e];t&&t(r)}};var f,d=$malloc("__TEST"),p=d("runner"),m=d("env");if(m&&p)p.addTest(e,r,t);else{if((f=function(e,r){var i=this;i.env=e,i.type=r,i.fns={},"BROWSER"===i.type?i.env.onerror=function(e,r,t,n,s){var o=i.fns.windowError;if(o)return o(s),!0}:"NODE"===i.type&&(i.env.on("uncaughtException",function(e){var r=i.fns.uncaughtProcessException;r&&r(e)}),i.env.on("unhandledRejection",function(e){var r=i.fns.unhandledProcessRejection;r&&r(e)}))}).prototype={isNode:function(){return"NODE"===this.type},on:function(e,r){this.fns[e]=r}},!(m="object"==typeof process?new f(process,"NODE"):"object"==typeof window?new f(window,"BROWSER"):null))throw new Error("unknownEnvironment");d("env",m),(p=new n(m)).addTest(e,r,t),p.run(),d("runner",p)}}function $userAgent(e){if(e&&"string"!=typeof e)throw new Error("api-str");function r(e,r){for(var t={},n=0,s=null;n<r.length&&!s;){for(var o=r[n],i=r[n+1],a=0,l=0;a<o.length&&!s;)if(s=o[a++].exec(e),Array.isArray(s)&&0<s.length)for(var c=0;c<i.length;c++){var u=s[++l],f=i[c];Array.isArray(f)&&0<f.length?2===f.length?d(f[1])?t[f[0]]=p(f[1](u)):t[f[0]]=p(f[1]):3===f.length?!d(f[1])||f[1].exec&&f[1].test?t[f[0]]=u?p(u.replace(f[1],f[2])):null:t[f[0]]=u?p(f[1](u,f[2])):null:4===f.length&&(t[f[0]]=u&&d(f[3])?p(f[3](u.replace(f[1],f[2]))):null):t[f]=p(u)||null}n+=2}return t;function d(e){return"function"==typeof e}function p(e){return"string"==typeof e&&e.replace(/\s+/g,"_").toUpperCase()||null}}function t(e,r){for(var t in r)if(Array.isArray(r[t])&&0<r[t].length){for(var n=0;n<r[t].length;n++)if(s(e,r[t][n]))return"?"===t?null:t}else if(s(e,r[t]))return"?"===t?null:t;return e;function s(e,r){return"string"==typeof e&&0<=e.toLowerCase().indexOf(r.toLowerCase())}}function n(e){return e.toLowerCase()}function s(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}e="string"==typeof e?e||"":window&&window.navigator&&window.navigator.userAgent||"";var o="name",i="version",a="vendor",l="model",c="type",u="architecture",f="CONSOLE",d="MOBILE",p="TABLET",m="SMART_TV",h="WEARABLE",g={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{FIRE_PHONE:["SD","KF"]}},sprint:{model:{EVO_SHIFT_4G:"7373KT"},vendor:{HTC:"APA",SPRINT:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT_3.11":"NT3.51","NT_4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],VISTA:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},w={browser:[[/(opera\smini)\/([\w.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w.-]+)/i,/(opera).+version\/([\w.]+)/i,/(opera)[/\s]+([\w.]+)/i],[o,i],[/(opios)[/\s]+([\w.]+)/i],[[o,"Opera Mini"],i],[/\s(opr)\/([\w.]+)/i],[[o,"Opera"],i],[/(kindle)\/([\w.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[/\s]?([\w.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[/\s]?([\w.]*)/i,/(?:ms|\()(ie)\s([\w.]+)/i,/(rekonq)\/([\w.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w.-]+)/i],[o,i],[/(trident).+rv[:\s]([\w.]+).+like\sgecko/i],[[o,"IE"],i],[/(edge)\/((\d+)?[\w.]+)/i],[o,i],[/(yabrowser)\/([\w.]+)/i],[[o,"Yandex"],i],[/(puffin)\/([\w.]+)/i],[[o,"Puffin"],i],[/((?:[\s/])uc?\s?browser|(?:juc.+)ucweb)[/\s]?([\w.]+)/i],[[o,"UCBrowser"],i],[/(comodo_dragon)\/([\w.]+)/i],[[o,/_/g," "],i],[/(micromessenger)\/([\w.]+)/i],[[o,"WeChat"],i],[/(QQ)\/([\d.]+)/i],[o,i],[/m?(qqbrowser)[/\s]?([\w.]+)/i],[o,i],[/xiaomi\/miuibrowser\/([\w.]+)/i],[i,[o,"MIUI Browser"]],[/;fbav\/([\w.]+);/i],[i,[o,"Facebook"]],[/headlesschrome(?:\/([\w.]+)|\s)/i],[i,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w.]+)/i],[[o,/(.+)/,"$1 WebView"],i],[/((?:oculus|samsung)browser)\/([\w.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],i],[/android.+version\/([\w.]+)\s+(?:mobile\s?safari|safari)*/i],[i,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w.]+)/i],[o,i],[/(dolfin)\/([\w.]+)/i],[[o,"Dolphin"],i],[/((?:android.+)crmo|crios)\/([\w.]+)/i],[[o,"Chrome"],i],[/(coast)\/([\w.]+)/i],[[o,"Opera Coast"],i],[/fxios\/([\w.-]+)/i],[i,[o,"Firefox"]],[/version\/([\w.]+).+?mobile\/\w+\s(safari)/i],[i,[o,"Mobile Safari"]],[/version\/([\w.]+).+?(mobile\s?safari|safari)/i],[i,o],[/webkit.+?(gsa)\/([\w.]+).+?(mobile\s?safari|safari)(\/[\w.]+)/i],[[o,"GSA"],i],[/webkit.+?(mobile\s?safari|safari)(\/[\w.]+)/i],[o,[i,t,g.browser.oldSafari.version]],[/(konqueror)\/([\w.]+)/i,/(webkit|khtml)\/([\w.]+)/i],[o,i],[/(navigator|netscape)\/([\w.-]+)/i],[[o,"Netscape"],i],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[/\s]?([\w.+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w.-]+)/i,/(mozilla)\/([\w.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[/\s]?([\w.]+)/i,/(links)\s\(([\w.]+)/i,/(gobrowser)\/?([\w.]+)*/i,/(ice\s?browser)\/v?([\w._]+)/i,/(mosaic)[/\s]([\w.]+)/i],[o,i]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;)]/i],[[u,"amd64"]],[/(ia32(?=;))/i],[[u,n]],[/((?:i[346]|x)86)[;)]/i],[[u,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[u,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[u,/ower/,"",n]],[/(sun4\w)[;)]/i],[[u,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[u,n]]],device:[[/\((ipad|playbook);[\w\s);-]+(rim|apple)/i],[l,a,[c,p]],[/applecoremedia\/[\w.]+ \((ipad)/],[l,[a,"Apple"],[c,p]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[a,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[a,l,[c,p]],[/(kf[A-z]+)\sbuild\/[\w.]+.*silk\//i],[l,[a,"Amazon"],[c,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w.]+.*silk\//i],[[l,t,g.device.amazon.model],[a,"Amazon"],[c,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,a,[c,d]],[/\((ip[honed|\s\w*]+);/i],[l,[a,"Apple"],[c,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[a,l,[c,d]],[/\(bb10;\s(\w+)/i],[l,[a,"BlackBerry"],[c,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[l,[a,"Asus"],[c,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[a,"Sony"],[l,"Xperia Tablet"],[c,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[l,[a,"Sony"],[c,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[a,l,[c,f]],[/android.+;\s(shield)\sbuild/i],[l,[a,"Nvidia"],[c,f]],[/(playstation\s[34portablevi]+)/i],[l,[a,"Sony"],[c,f]],[/(sprint\s(\w+))/i],[[a,t,g.device.sprint.vendor],[l,t,g.device.sprint.model],[c,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[a,l,[c,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[a,[l,/_/g," "],[c,d]],[/(nexus\s9)/i],[l,[a,"HTC"],[c,p]],[/d\/huawei([\w\s-]+)[;)]/i,/(nexus\s6p)/i],[l,[a,"Huawei"],[c,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[a,l,[c,d]],[/[\s(;](xbox(?:\sone)?)[\s);]/i],[l,[a,"Microsoft"],[c,f]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[a,"Microsoft"],[c,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[a,"Motorola"],[c,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[a,"Motorola"],[c,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,s],[l,s],[c,m]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[a,"Samsung"],[c,m]],[/\(dtv[);].+(aquos)/i],[l,[a,"Sharp"],[c,m]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[a,"Samsung"],l,[c,p]],[/smart-tv.+(samsung)/i],[a,[c,m],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[a,"Samsung"],l,[c,d]],[/sie-(\w+)*/i],[l,[a,"Siemens"],[c,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[a,"Nokia"],l,[c,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[a,"Acer"],[c,p]],[/android.+([vl]k-?\d{3})\s+build/i],[l,[a,"LG"],[c,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[a,"LG"],l,[c,p]],[/(lg) netcast\.tv/i],[a,l,[c,m]],[/(nexus\s[45])/i,/lg[e;\s/-]+(\w+)*/i,/android.+lg(-?[\d\w]+)\s+build/i],[l,[a,"LG"],[c,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[a,"Lenovo"],[c,p]],[/linux;.+((jolla));/i],[a,l,[c,d]],[/((pebble))app\/[\d.]+\s/i],[a,l,[c,h]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[a,l,[c,d]],[/crkey/i],[[l,"Chromecast"],[a,"Google"]],[/android.+;\s(glass)\s\d/i],[l,[a,"Google"],[c,h]],[/android.+;\s(pixel c)\s/i],[l,[a,"Google"],[c,p]],[/android.+;\s(pixel xl|pixel)\s/i],[l,[a,"Google"],[c,d]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[l,/_/g," "],[a,"Xiaomi"],[c,d]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[l,/_/g," "],[a,"Xiaomi"],[c,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[l,[a,"Meizu"],[c,p]],[/android.+a000(1)\s+build/i],[l,[a,"OnePlus"],[c,d]],[/android.+[;/]\s*(RCT[\d\w]+)\s+build/i],[l,[a,"RCA"],[c,p]],[/android.+[;/]\s*(Venue[\d\s]*)\s+build/i],[l,[a,"Dell"],[c,p]],[/android.+[;/]\s*(Q[T|M][\d\w]+)\s+build/i],[l,[a,"Verizon"],[c,p]],[/android.+[;/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[a,"Barnes & Noble"],l,[c,p]],[/android.+[;/]\s+(TM\d{3}.*\b)\s+build/i],[l,[a,"NuVision"],[c,p]],[/android.+[;/]\s*(zte)?.+(k\d{2})\s+build/i],[[a,"ZTE"],l,[c,p]],[/android.+[;/]\s*(gen\d{3})\s+build.*49h/i],[l,[a,"Swiss"],[c,d]],[/android.+[;/]\s*(zur\d{3})\s+build/i],[l,[a,"Swiss"],[c,p]],[/android.+[;/]\s*((Zeki)?TB.*\b)\s+build/i],[l,[a,"Zeki"],[c,p]],[/(android).+[;/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;/]\s+(Dragon[-\s]+Touch\s+|DT)(.+)\s+build/i],[[a,"Dragon Touch"],l,[c,p]],[/android.+[;/]\s*(NS-?.+)\s+build/i],[l,[a,"Insignia"],[c,p]],[/android.+[;/]\s*((NX|Next)-?.+)\s+build/i],[l,[a,"NextBook"],[c,p]],[/android.+[;/]\s*(Xtreme_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[a,"Voice"],l,[c,d]],[/android.+[;/]\s*(LVTEL-?)?(V1[12])\s+build/i],[[a,"LvTel"],l,[c,d]],[/android.+[;/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[l,[a,"Envizen"],[c,p]],[/android.+[;/]\s*(Le[\s-]+Pan)[\s-]+(.*\b)\s+build/i],[a,l,[c,p]],[/android.+[;/]\s*(Trio[\s-]*.*)\s+build/i],[l,[a,"MachSpeed"],[c,p]],[/android.+[;/]\s*(Trinity)[-\s]*(T\d{3})\s+build/i],[a,l,[c,p]],[/android.+[;/]\s*TU_(1491)\s+build/i],[l,[a,"Rotor"],[c,p]],[/android.+(KS(.+))\s+build/i],[l,[a,"Amazon"],[c,p]],[/android.+(Gigaset)[\s-]+(Q.+)\s+build/i],[a,l,[c,p]],[/\s(tablet|tab)[;/]/i,/\s(mobile)(?:[;/]|\ssafari)/i],[[c,n],a,l],[/(android.+)[;/].+build/i],[l,[a,"Generic"]]],engine:[[/windows.+\sedge\/([\w.]+)/i],[i,[o,"EdgeHTML"]],[/(presto)\/([\w.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w.]+)/i,/(khtml|tasman|links)[/\s]\(?([\w.]+)/i,/(icab)[/\s]([23]\.[\d.]+)/i],[o,i],[/rv:([\w.]+).*(gecko)/i],[i,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,i],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s/]?([\d.\s]+\w)*/i,/(windows\smobile|windows)[\s/]?([ntce\d.\s]+\w)/i],[o,[i,t,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d.]+)/i],[[o,"Windows"],[i,t,g.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],i],[/(blackberry)\w*\/?([\w.]+)*/i,/(tizen)[/\s]([\w.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[/\s-]?([\w.]+)*/i,/linux;.+(sailfish);/i],[o,i],[/(symbian\s?os|symbos|s60(?=;))[/\s-]?([\w.]+)*/i],[[o,"Symbian"],i],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],i],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[/\s(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[/\s-]?(?!chrom)([\w.-]+)*/i,/(hurd|linux)\s?([\w.]+)*/i,/(gnu)\s?([\w.]+)*/i],[o,i],[/(cros)\s[\w]+\s([\w.]+\w)/i],[[o,"Chromium OS"],i],[/(sunos)\s?([\w.]+\d)*/i],[[o,"Solaris"],i],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w.]+)*/i],[o,i],[/(haiku)\s(\w+)/i],[o,i],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[i,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[i,/_/g,"."]],[/((?:open)?solaris)[/\s-]?([\w.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w.]+)*/i],[o,i]]},b=r(e,w.browser),y=r(e,w.engine),v=r(e,w.os),E=r(e,w.device);return{ua:e,browserName:b.name||null,browserVersion:b.version||null,engineName:y.name||null,engineVersion:y.version||null,osName:v.name||null,osVersion:v.version||null,deviceVendor:E.vendor||null,deviceModel:E.model||null,deviceType:E.type||null,cpu:r(e,w.cpu).architecture||null}}function $ls(e,l,c,u){void 0===u&&(u=c,c=l);var r=Array.isArray(e)?e:[e];l=l||"",function a(){var e=r.shift();if(!e)return u();!function s(o,i){$fs.readdir(o,function(e,r){if(e)return u(e);!function t(){var n=r.shift();if(!n)return i?i():a();n=$path.resolve(o+"/"+n),$fs.stat(n,function(e,r){if(e)return u(e);c(n,r,function(){if(!r.isDirectory()||"R"!==l)return t();s(n,function(e){return e?u(e):t()})})})}()})}(e)}()}function $Watcher(e){this.t=e,this.fn={},this.trigger=function(e,r,t,n){var s=this.fn[e];return s&&s(r,t,n)}}function $route1(t,n,s){if("string"!=typeof t||"/"!==t[0]&&-1===["#public","#error"].indexOf(t))throw new Error("api-matcher");if(!n||"function"!=typeof n)throw new Error("api-fn");if("#error"===t){if(void 0!==s)throw new Error("api-flags")}else if("string"!=typeof s)throw new Error("api-flags");var e=$malloc("__SERVER"),r=function(){var e;if("#error"!==t){if(!(e=s.match(/^-m\s(GET|PUT|POST|DELETE)\s+-s\s(\d+)(GB|MB|kB)\s+-t\s(\d+)s(?:(?=\s+-xhr)(?:\s+-(xhr))|)(?:(?=\s+-mfd)(?:\s+-(mfd))|)$/)))throw new Error('Route "flags" must follow "-m <Value> -s <Value><Unit> -t <Value><Unit> -xhr? -mfd?" syntax.')}var r={matcher:t};-1===["#public","#error"].indexOf(t)?r.exp=new RegExp("^"+t.replace(/\[(\w+)\]/g,"(\\w+)")+"$"):r.exp=null;return r.fn=n,"#error"!==t?(r.method=e[1],r.maxSize=function(e,r){if(e=parseInt(e),isNaN(e)||e<0)throw new Error("invalidMaxSize");return e*Math.pow(10,{kB:3,MB:6,GB:9}[r])}(e[2],e[3]),r.maxTimeout=function(e){if(e=parseInt(e),isNaN(e)||e<=0)throw new Error("invalidMaxTimeout");return 1e3*e}(e[4]),r.xhr=!!e[5],r.mfd=!!e[6]):(r.method=null,r.maxSize=0,r.maxTimeout=0,r.xhr=!1,r.mfd=!1),r}();if(-1===["#public","#error"].indexOf(t)){var o=e("matchers")||{},i=e("routes")||{};o[r.matcher]=r.exp,i[r.matcher+"?"+r.method+"?"+(r.xhr?"xhr?":"def?")+(r.mfd?"mfd":"def")]=r,e("matchers",o),e("routes",i)}if("#error"===t)return e("errorRoute",r);if("#public"===t)return e("publicRoute",r)}function MultipartParser(){this.boundary=null,this.boundaryChars=null,this.lookbehind=null,this.index=null,this.flags=0,this.S={PARSER_UNINITIALIZED:0,START:1,START_BOUNDARY:2,HEADER_FIELD_START:3,HEADER_FIELD:4,HEADER_VALUE_START:5,HEADER_VALUE:6,HEADER_VALUE_ALMOST_DONE:7,HEADERS_ALMOST_DONE:8,PART_DATA_START:9,PART_DATA:10,PART_END:11,END:12},this.state=this.S.PARSER_UNINITIALIZED,this.F={PART_BOUNDARY:1,LAST_BOUNDARY:2}}function parseMultipartHeader(e){var r="",t=' name="',n=t.length,s=e.indexOf(t);0<=s&&(r=e.slice(s+n,e.indexOf('"',s+n)));var o=r||"undefined_"+Math.floor(1e5*Math.random());return r="",n=(t=' filename="').length,0<=(s=e.indexOf(t))&&(r=e.slice(s+n,e.indexOf('"',s+n))),{name:o,filename:r||null}}$global.$strContentTypeToExt=$strContentTypeToExt,$global.$strf=$strf,$global.$strFromUntil=$strFromUntil,$global.$strHyphenize=$strHyphenize,$global.$strHTML=$strHTML,$global.$strMatchLen=$strMatchLen,$global.$strPadEnd=$strPadEnd,$global.$strPadStart=$strPadStart,$global.$strReplaceBetween=$strReplaceBetween,$global.$strReplaceCharAt=$strReplaceCharAt,$global.$strReverse=$strReverse,$global.$strReverseFromUntil=$strReverseFromUntil,$global.$strReverseUntil=$strReverseUntil,$global.$strSlug=$strSlug,$global.$strStripHTML=$strStripHTML,$global.$strToHTMLText=$strToHTMLText,$global.$strToQueryObj=$strToQueryObj,$global.$strTrim=$strTrim,$global.$strUntil=$strUntil,$Error.prototype={log:function(){var e=this.message?this.id+" - "+this.message:this.id;console.warn(e)},throw:function(){throw new Error(this.id)},logAndThrow:function(){this.log(),this.throw()},toNative:function(){var e=this.message?this.id+" - "+this.message:this.id;return new Error(e)},toString:function(){return JSON.stringify(this,null,"    ")}},$global.$Error=$Error,$ErrorBuilder.prototype={push:function(e){if(e instanceof Error)return this.errors.push(new $Error(e.message)),this;if(e instanceof $Error)return this.errors.push(e),this;throw new Error("api-err")},remove:function(e){for(var r=this.errors,t=-1,n=0;n<r.length;n++)r[n].id==e&&(t=n);0<=t&&r.splice(t,1)},clear:function(){this.errors=[]},first:function(){return this.errors[0]||null},last:function(){return this.errors[this.errors.length-1]||null},toString:function(){return JSON.stringify(this,null,"    ")},hasError:function(e){var r=this.errors;if(e){for(var t=0;t<r.length;t++)if(r[t]&&r[t].id==e)return!0;return!1}return 0<r.length},throwFirst:function(){if(0==this.errors.length)throw new Error("emptyErrorBuilder");this.errors[0].throw()},logFirst:function(){if(0==this.errors.length)throw new Error("emptyErrorBuilder");this.errors[0].log()},logAndThrowFirst:function(){if(0==this.errors.length)throw new Error("emptyErrorBuilder");this.errors[0].logAndThrow()}},$global.$ErrorBuilder=$ErrorBuilder,$global.$log=$log,$global.$logClear=$logClear,$global.$logDebug=$logDebug,$global.$logError=$logError,$global.$logPrefix=$logPrefix,$global.$logWarn=$logWarn,$global.$uid1=$uid1,$global.$uid2=$uid2,$global.$h=$h,$global.$schema=$schema,$global.$test=$test,$global.$userAgent=$userAgent,$global.$ls=$ls,$Watcher.prototype={watch:function(t){var n=this;$fs.watchFile(t,{interval:n.t||1e3},function(e,r){if(e&&r&&e.mtime!==r.mtime)return n.trigger("change",t,e,r)})},on:function(e,r){this.fn[e]=r}},$global.$Watcher=$Watcher,$global.$route1=$route1,MultipartParser.stateToString=function(e){for(var r in this.S)if(this.S.hasOwnProperty(r)&&this.S[r]===e)return r},MultipartParser.prototype.initWithBoundary=function(e){this.boundary=Buffer.alloc(e.length+4),this.boundary.write("\r\n--",0),this.boundary.write(e,4),this.lookbehind=Buffer.alloc(this.boundary.length+8),this.state=this.S.START,this.boundaryChars={};for(var r=0;r<this.boundary.length;r++)this.boundaryChars[this.boundary[r]]=!0},MultipartParser.prototype.write=function(n){var e,r,i=this,s=0,t=n.length,o=this.index,a=this.index,l=this.state,c=this.flags,u=this.lookbehind,f=this.boundary,d=this.boundaryChars,p=this.boundary.length,m=p-1,h=n.length;function g(e){i[e+"Mark"]=s}function w(e,r,t,n){if(void 0===t||t!==n){var s="on"+e.substr(0,1).toUpperCase()+e.substr(1),o=i[s];return o&&o(r,t,n)}}function b(e,r){var t=e+"Mark";i.hasOwnProperty(t)&&(r?(w(e,n,i[t],s),delete i[t]):(w(e,n,i[t],n.length),i[t]=0))}for(s=0;s<t;s++)switch(e=n[s],l){case this.S.PARSER_UNINITIALIZED:return s;case this.S.START:a=0,l=this.S.START_BOUNDARY;case this.S.START_BOUNDARY:if(a==f.length-2){if(45==e)c|=this.F.LAST_BOUNDARY;else if(13!=e)return s;a++;break}if(a-1==f.length-2){if(c&this.F.LAST_BOUNDARY&&45==e)w("end"),l=this.S.END,c=0;else{if(c&this.F.LAST_BOUNDARY||10!=e)return s;a=0,w("partBegin"),l=this.S.HEADER_FIELD_START}break}e!=f[a+2]&&(a=-2),e==f[a+2]&&a++;break;case this.S.HEADER_FIELD_START:l=this.S.HEADER_FIELD,g("headerField"),a=0;case this.S.HEADER_FIELD:if(13==e){delete i["headerField"+"Mark"],l=this.S.HEADERS_ALMOST_DONE;break}if(a++,45==e)break;if(58==e){if(1==a)return s;b("headerField",!0),l=this.S.HEADER_VALUE_START;break}if((r=32|e)<97||122<r)return s;break;case this.S.HEADER_VALUE_START:if(32==e)break;g("headerValue"),l=this.S.HEADER_VALUE;case this.S.HEADER_VALUE:13==e&&(b("headerValue",!0),w("headerEnd"),l=this.S.HEADER_VALUE_ALMOST_DONE);break;case this.S.HEADER_VALUE_ALMOST_DONE:if(10!=e)return s;l=this.S.HEADER_FIELD_START;break;case this.S.HEADERS_ALMOST_DONE:if(10!=e)return s;w("headersEnd"),l=this.S.PART_DATA_START;break;case this.S.PART_DATA_START:l=this.S.PART_DATA,g("partData");case this.S.PART_DATA:if(0===(o=a)){for(s+=m;s<h&&!d.hasOwnProperty(n[s]);)s+=p;e=n[s-=m]}if(a<f.length)f[a]==e?(0===a&&b("partData",!0),a++):a=0;else if(a==f.length)a++,13==e?c|=this.F.PART_BOUNDARY:45==e?c|=this.F.LAST_BOUNDARY:a=0;else if(a-1==f.length)if(c&this.F.PART_BOUNDARY){if(a=0,10==e){c&=~this.F.PART_BOUNDARY,w("partEnd"),w("partBegin"),l=this.S.HEADER_FIELD_START;break}}else c&this.F.LAST_BOUNDARY&&45==e?(w("partEnd"),w("end"),l=this.S.END,c=0):a=0;0<a?u[a-1]=e:0<o&&(w("partData",u,0,o),o=0,g("partData"),s--);break;case this.S.END:break;default:return s}return b("headerField"),b("headerValue"),b("partData"),this.index=a,this.state=l,this.flags=c,t},MultipartParser.prototype.end=function(){var e=function(e,r){var t=e["on"+r.substr(0,1).toUpperCase()+r.substr(1)];t&&t()};if(this.state==this.S.HEADER_FIELD_START&&0===this.index||this.state==this.S.PART_DATA&&this.index==this.boundary.length)e(this,"partEnd"),e(this,"end");else if(this.state!=this.S.END)return new Error("MultipartParser.end(): stream ended unexpectedly: "+this.explain())},MultipartParser.prototype.explain=function(){return"state = "+MultipartParser.stateToString(this.state)};var RES_FN_CALLS_BLACKLIST=["addTrailers","removeHeader","setHeader","setTimeout","write","writeContinue","writeHead","writeProcessing"],FILE_INDEX=0,CONCAT=[null,null];function $Controller1(e,r){var a=$malloc("__SERVER"),h=this;h.req=e,h.res=r,h.error=null,h.run=function(){h.prepareRoute(function(){if(h.monitorResponseChanges(),0<=["#public","#error"].indexOf(h.route.matcher))return h.invokeRoute();h.prepareRequest(function(){h.invokeRoute()})})},h.prepareRoute=function(r){if(h.route=h.findRoute(),h.route)return h.res.statusCode=200,r();if("GET"!==h.req.method)return h.prepareWithError(404),r();var e=h.toPathname(h.req.url),t=$path.extname(e);if(!t||-1===a("app").config.staticAccepts.indexOf(t))return h.prepareWithError(404),r();var n=$path.resolve(a("app").config.publicDirectory,"."+e);$fs.stat(n,function(e){e?h.prepareWithError("ENOENT"===e.code?404:500):(h.route=a("publicRoute"),h.res.statusCode=200),r()})},h.findRoute=function(){var e=a("matchers")||{},r=null;for(var t in e){if(e.hasOwnProperty(t))e[t].test(h.toPathname(h.req.url))&&(r=t)}if(!r)return null;var n="XMLHttpRequest"===h.req.headers["x-requested-with"],s="data"===h.getContentType4L(),o=a("routes")||{},i=o[r+"?"+h.req.method+"?"+(n?"xhr?":"def?")+(s?"mfd":"def")]||null;return i||(o[r+"?"+h.req.method+"?def?"+(s?"mfd":"def")]||null)},h.toPathname=function(e){return e.split(/\?+/)[0]||"/"},h.getContentType4L=function(){var e=h.req.headers["content-type"]||"",r=e.lastIndexOf(";");return 0<=r&&(e=e.slice(0,r)),e.slice(-4)},h.prepareWithError=function(e){if(!a("errorRoute"))throw new Error("missingErrorRoute");h.route=a("errorRoute"),h.res.statusCode=e},h.monitorResponseChanges=function(){for(var t=!1,e=0,r=RES_FN_CALLS_BLACKLIST.length;e<r;e++){var n=RES_FN_CALLS_BLACKLIST[e];s(n,h.res[n])}function s(e,r){h.res[e]=function(){t||r.apply(h.res,arguments)}}h.res.setTimeout(h.route.maxTimeout,function(){});var o,i=setTimeout(function(){h.routeError(408)},h.route.maxTimeout);o=h.res.end,h.res.end=function(){t||(t=!0,clearTimeout(i),o.apply(h.res,arguments))}},h.destroyStream=function(e){return e instanceof ReadStream?(e.destroy(),"function"==typeof e.close&&e.on("open",function(){"number"==typeof this.fd&&this.close()})):e instanceof Stream&&"function"==typeof e.destroy&&e.destroy(),e},h.prepareRequest=function(e){var r=$url.parse(h.req.url),t=(r.pathname||"").match(h.route.exp);h.args=1<(t||[]).length?t.slice(1):[],h.query=r.query&&"string"==typeof r.query?$querystring.parse(r.query):null,h.body=null;var n=h.getContentType4L();"json"===n?h.prepareRequestJSON(e):"data"===n?h.prepareRequestMULTIPART(e):(void 0===h.req.headers["content-type"]||h.prepareWithError(400),e())},h.prepareRequestJSON=function(r){if(-1===["POST","PUT"].indexOf(h.req.method).indexOf)return r();var t=0,n=[];h.req.on("data",function(e){(t+=e.length)<h.route.maxSize&&n.push(e)}),h.req.once("end",function(){if(t>=h.route.maxSize)return n=void 0,h.prepareWithError(431),r();try{var e=JSON.parse(Buffer.concat(n).toString("utf8"));if("[object Object]"!==Object.prototype.toString.call(e))return h.prepareWithError(400),r();h.body=e,r()}catch(e){h.prepareWithError(400),r()}})},h.prepareRequestMULTIPART=function(t){h.mfd=[];var e=h.req.headers["content-type"].split(";")[1];if(!e)return h.prepareWithError(400),t();if(!(e=e.slice(e.indexOf("=",2)+1))||-1===["POST","PUT"].indexOf(h.req.method))return h.prepareWithError(400),t();var n=!1,s=[];h.req.once("close",function(){if(!n){for(var e=0,r=s.length;e<r;e++)$fs.unlink(s[e]);h.mfd=[],h.prepareWithError(500),t()}});var o,i,a,l,c,u=new MultipartParser,f=0,d=h.route.maxSize,p=process.cwd()+$path.sep+"tmp"+$path.sep+"uploadedfile-",m=0;u.initWithBoundary(e),u.onPartBegin=function(){d<=f||((o=new FormDataEntry).value=Buffer.alloc(0),i=0,l=!(a=!1))},u.onHeaderValue=function(e,r,t){if(!(d<=f)){var n,s=e.slice(r,t).toString("utf8");if(1===i)return n=s.indexOf(";"),o.contentType=-1===n?s.trim():s.slice(0,n).trim(),void(i=2);if(!(0<i)){if(-1===s.indexOf("form-data; "))return d=-1,void(a||h.destroyStream(c));s=parseMultipartHeader(s),i=1,o.name=s.name,(a=!!s.filename)?(o.filename=s.filename,-1===(n=o.filename.lastIndexOf("\\"))&&(n=o.filename.lastIndexOf("/")),0<=n&&(o.filename=o.filename.slice(n+1)),o.path=p+FILE_INDEX+++".bin"):h.destroyStream(c)}}},u.onPartData=function(e,r,t){if(!(d<=f)){var n=e.slice(r,t);if(f+=n.length,!(d<=f))return a?(l&&(l&&(l=!1),m++,(c=$fs.createWriteStream(o.path)).once("close",function(){m--}),c.once("error",function(e){console.log(e),m--})),void c.write(n)):(l&&(l=!1),CONCAT[0]=o.value,CONCAT[1]=n,void(o.value=Buffer.concat(CONCAT)));o.path&&s.push(o.path)}},u.onPartEnd=function(){c&&(c.end(),c=null),d<=f||(o.value=a?void 0:o.value.toString("utf8"),h.mfd.push(o))},h.req.on("data",function(e){u.write(e)}),h.req.once("end",function(){n=!0,function(){if(0<m)setImmediate(function(){u.onEnd()});else{if(d<=f){for(var e=0,r=s.length;e<r;e++)$fs.unlink(s[e]);h.mfd=[],h.prepareWithError(431)}t()}}()})},h.invokeRoute=function(){h.route.fn.apply(h,h.args)},h.stream=function(e,r){h.res.statusCode=h.prepareStatus(e);var t=$fs.createReadStream(r);t.on("error",function(e){return h.routeError(404,e)}),t.pipe(h.res)},h.prepareStatus=function(e){var r=parseInt(e);return isNaN(r)||r<100||600<=r?200:r}}function FormDataEntry(){this.name=void 0,this.filename=void 0,this.contentType=void 0,this.path=void 0,this.value=void 0}$Controller1.prototype={routeError:function(e,r){var t=parseInt(e);this.res.statusCode=isNaN(t)||t<400||600<=t?500:t,this.res.statusMessage=null,this.res.sendDate=!0,r&&(this.error=r);var n=$malloc("__SERVER");if(!n("errorRoute"))throw new Error("missingErrorRoute");this.route=n("errorRoute"),this.invokeRoute()},json:function(e,r){this.res.writeHead(this.prepareStatus(e),{"Content-Type":"application/json"}),this.res.end(JSON.stringify(r,null,"    "))},html:function(e,r){this.res.writeHead(this.prepareStatus(e),{"Content-Type":"text/html"}),this.res.end(""+r)},plain:function(e,r){this.res.writeHead(this.prepareStatus(e),{"Content-Type":"text/plain"}),this.res.end(""+r)}},$global.$Controller1=$Controller1;var STATIC_ACCEPTS=[".txt",".md",".html",".xml",".json",".woff",".woff2",".otf",".ttf",".eot",".js",".css",".jpg",".png",".gif",".svg",".ico",".mp4",".mp3",".swf",".pdf",".docx",".xlsx",".doc",".xls",".zip",".rar"];function $server(r,e,t){var n=$malloc("__SERVER");if(!t)return n("app")||null;function s(){this.js=[],this.configure=function(){if(-1===["DEBUG","TEST","RELEASE"].indexOf(r))throw new Error("api-env");if(this.env=r,this[r]=!0,"boolean"!=typeof t.https)throw new Error("api-config.https");if(!t.host||"string"!=typeof t.host)throw new Error("api-config.host");if(!Number.isInteger(t.port)||t.port<=0)throw new Error("api-config.port");var e=void 0===t.publicDirectory?"./public":t.publicDirectory;if(!e||"string"!=typeof e)throw new Error("api-config.publicDirectory");if(t.publicDirectory=e,e=void 0===t.staticAccepts?STATIC_ACCEPTS:t.staticAccepts,!Array.isArray(e))throw new Error("api-config.staticAccepts");t.staticAccepts=e,this.config=t},this.configure(),this.handleRequest=function(e,r){new $Controller1(e,r).run()},this.removeTmpFiles=function(){for(var e=process.cwd()+$path.sep+"tmp",r=$fs.readdirSync(e),t=0,n=r.length;t<n;t++){var s=e+$path.sep+r[t];$fs.unlinkSync(s)}}}s.prototype={pushJS:function(e){this.js.push(e)},loadJS:function(s){var o=this;!function e(r){var t=o.js[r];if(!t)return s&&s();require.cache[t]=void 0;var n=require(t);if("function"!=typeof n.init)throw new Error('Missing "init()" in "'+t+'".');n.init(function(){e(++r)})}(0)},create:function(){var t=this;if(t.removeTmpFiles(),t.config.https){var e={key:t.config.key,cert:t.config.cert};t.server=$https.createServer(e,t.handleRequest).listen(t.config.port,t.config.host)}else t.server=$http.createServer(t.handleRequest).listen(t.config.port,t.config.host);var n=0;t.socket={},t.server.on("connection",function(e){var r=n++;(t.socket[r]=e).once("close",function(){delete t.socket[r]})})},createLog:function(){console.clear(),console.log("@pid "+process.pid+" ("+[(new Date).toGMTString(),"Node.js: "+process.version,"OS: "+$os.platform()+" "+$os.release()].join("; ")+")"),console.log(""),console.log("env     : "+r),console.log("name    : "+e.name||"-"),console.log("version : "+e.version||"-"),console.log("author  : "+e.author||"-"),console.log(""),console.log("http://"+this.config.host+":"+this.config.port+"/\n")},destroy:function(){for(var e in this.server.close(),this.socket)this.socket.hasOwnProperty(e)&&this.socket[e].destroy()}},$route1("#public",function(){var e=this.toPathname(this.req.url),r=$path.resolve(t.publicDirectory,"."+e);this.stream(200,r)},"-m GET -s 0kB -t 20s");var o=new s;return n("app",o),o}$global.$server=$server;