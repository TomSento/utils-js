"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var $path=require("path"),$fs=require("fs"),$Stream=require("stream"),$url=require("url"),$querystring=require("querystring"),$https=require("https"),$http=require("http");Array.prototype.find=function(e,i){for(var n="function"==typeof e,t=void 0!==i,r=0,o=this.length;r<o;r++)if(n){if(e(this[r],r))return this[r]}else if(t){if(this[r]&&this[r][e]===i)return this[r]}else if(this[r]===e)return this[r];return null},Array.prototype.findIndex=function(e,i){for(var n="function"==typeof e,t=void 0!==i,r=0,o=this.length;r<o;r++)if(n){if(e(this[r],r))return r}else if(t){if(this[r]&&this[r][e]===i)return r}else if(this[r]===e)return r;return-1},Array.prototype.remove=function(e,i){for(var n="function"==typeof e,t=void 0!==i,r=[],o=0,s=this.length;o<s;o++)n?e.call(this,this[o],o)||r.push(this[o]):t?this[o]&&this[o][e]!==i&&r.push(this[o]):this[o]!==e&&r.push(this[o]);return r},Array.prototype.unique=function(e){for(var i=[],n=0,t=0,r=this.length;t<r;t++){var o=this[t];if(e)if(0!==n){for(var s=!0,a=0;a<n;a++)if(i[a][e]===o[e]){s=!1;break}s&&(i.push(o),n++)}else i.push(o),n++;else-1===i.indexOf(o)&&i.push(o)}return i};var world="object"==typeof global?global:window;function clone(e,i,n){if(!e)return e;var t,r,o=typeof e;if("object"!==o||e instanceof Date)return e;if(e instanceof Array){t=e.length,r=new Array(t);for(var s=0;s<t;s++)if("object"!==(o=typeof e[s])||e[s]instanceof Date){if(n&&"function"===o)continue;r[s]=e[s]}else r[s]=clone(e[s],i,n);return r}for(var a in r={},e)if(!i||!i[a]){var l=e[a];if("object"!==(o=typeof l)||l instanceof Date){if(n&&"function"===o)continue;r[a]=l}else r[a]=clone(e[a],i,n)}return r}function extend(e,i,n){if(!e||"object"!=typeof e)throw new Error("api-objA");if(!i||"object"!=typeof i)throw new Error("api-objB");void 0===n&&(n=!0);for(var t=Object.keys(i),r=t.length;r--;){var o=t[r];(n||void 0===e[o])&&(e[o]=clone(i[o]))}return e}world.Cor||(world.Cor={}),world.Cor.clone=clone,world.Cor||(world.Cor={}),world.Cor.extend=extend;var ENCODE_HTML_CHARACTERS={"&":"amp","'":"#039",'"':"quot","<":"lt",">":"gt"};String.prototype.escape=function(){return this.replace(/(&|'|"|<|>)/g,function(e,i){return"&"+ENCODE_HTML_CHARACTERS[i]+";"||i})},String.prototype.padEnd||(String.prototype.padEnd=function(e,i){return e>>=0,i=String(void 0!==i?i:" "),this.length>e?String(this):((e-=this.length)>i.length&&(i+=i.repeat(e/i.length)),String(this)+i.slice(0,e))}),String.prototype.padStart||(String.prototype.padStart=function(e,i){return e>>=0,i=String(void 0!==i?i:" "),this.length>e?String(this):((e-=this.length)>i.length&&(i+=i.repeat(e/i.length)),i.slice(0,e)+String(this))});var DIACRITICS={" ":" ","߀":"0","Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ꜿ":"C","Ḉ":"C","ĆC":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ƈ":"C","Ȼ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ɗ":"D","Ɖ":"D","ᴅ":"D","Ꝺ":"D","Ð":"Dh","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","ɛ":"E","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","ᴇ":"E","ꝼ":"F","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","ɢ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","ȷ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","ϻ":"M","Ꞥ":"N","Ƞ":"N","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ɲ":"N","Ꞑ":"N","ᴎ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Þ":"Th","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ɑ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","Ƃ":"b","ｃ":"c","ⓒ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","Ƌ":"d","Ꮷ":"d","ԁ":"d","Ɦ":"d","ð":"dh","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ﬀ":"ff","ﬁ":"fi","ﬂ":"fl","ﬃ":"ffi","ﬄ":"ffl","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ꝿ":"g","ᵹ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ɭ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","л":"n","ԉ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ɔ":"o","ᴑ":"o","œ":"oe","ƣ":"oi","ꝏ":"oo","ȣ":"ou","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ρ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ʂ":"s","ß":"ss","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","þ":"th","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};function removeDiacritics(e){return e.replace(/[^\u0000-\u007e]/g,function(e){return DIACRITICS[e]||e})}String.prototype.slug=function(e){e=e||60;for(var i=removeDiacritics(this.trim().toLowerCase()),n="",t=i.length,r=0;r<t;r++){var o=i[r],s=i.charCodeAt(r);if(n.length>=e)break;s>31&&s<48?n.length>0&&"-"!==n[n.length-1]&&(n+="-"):(s>47&&s<58||s>94&&s<123)&&(n+=o)}var a=n.length-1;return"-"===n[a]?n.substring(0,a):n};var DECODE_HTML_CHARACTERS={nbsp:" ",amp:"&",quot:'"',lt:"<",gt:">"};function all(e,i,n){if(!Array.isArray(e))throw new Error("api-arr");if("function"!=typeof i)throw new Error("api-fn");if(void 0===n&&(n=Function.prototype),"function"!=typeof n)throw new Error("api-next");var t=e.length;if(0===t)return n(null,e);var r=!1,o=new Array(t),s=t;e.forEach(function(e,t){i(e,function(e,i){if(!r)return e?(r=!0,n(e)):(o[t]=i,0===--s?n(null,o):void 0)})})}String.prototype.strip=function(){return this.replace(/<\/?[^>]+(>|$)/g,"").replace(/&(nbsp|amp|quot|lt|gt);/g,function(e,i){return DECODE_HTML_CHARACTERS[i]||i})},world.Cor||(world.Cor={}),world.Cor.all=all;var ct2ext={"text/plain":".txt","text/markdown":".md","text/html":".html","application/xml":".xml","text/xml":".xml","application/json":".json","font/woff":".woff","font/woff2":".woff2","font/otf":".otf","font/ttf":".ttf","application/vnd.ms-fontobject":".eot","application/javascript":".js","text/css":".css","image/jpeg":".jpg","image/png":".png","image/gif":".gif","image/svg+xml":".svg","image/x-icon":".ico","video/mp4":".mp4","audio/mp3":".mp3","application/x-shockwave-flash":".swf","application/pdf":".pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","application/msword":".doc","application/vnd.ms-excel":".xls","application/zip":".zip","application/x-rar-compressed":".rar"};function extension(e){return ct2ext[e]||null}function html(e,...i){var n,t,r,o,s={B:{css:"bottom:$"},BdA:{helper:!0,css:"\n$0{\n    border-width:1px;\n    border-style:solid}"},BdB:{helper:!0,css:"\n$0{\n    border-top-width:0;\n    border-right-width:0;\n    border-bottom-width:1px;\n    border-left-width:0;\n    border-style:solid}"},Bdbc:{css:"border-bottom-color:$"},Bdbw:{css:"border-bottom-width:$"},Bdc:{css:"border-color:$",expand:{t:"transparent"}},Bdlc:{css:"border-left-color:$",expand:{t:"transparent"}},Bdrad:{css:"border-radius:$"},Bdrc:{css:"border-right-color:$"},Bds:{css:"border-style:$",expand:{s:"solid"}},Bdw:{css:"border-width:$"},Bgc:{css:"background-color:$"},Bgi:{css:"background-image:$",expand:{n:"none"}},Bgp:{css:"background-position:$",expand:{c:"center"}},Bgr:{css:"background-repeat:$",expand:{nr:"no-repeat",rx:"repeat-x"}},Bgz:{css:"background-size:$",expand:{ct:"contain",cv:"cover"}},Bxsh:{css:"box-shadow:$"},Bxz:{css:"box-sizing:$",expand:{bb:"border-box"}},C:{css:"color:$"},Cf:{helper:!0,css:"\n$0:before,$0:after{\n    content:' ';\n    display:table}\n$0:after{clear:both}"},Cnt:{css:"content:$"},Cur:{css:"cursor:$",expand:{d:"default",p:"pointer"}},D:{css:"display:$",expand:{n:"none",b:"block",i:"inline",ib:"inline-block"}},Ell:{helper:!0,css:"\n$0{\n    max-width:100%;\n    white-space:nowrap;\n    overflow:hidden;\n    text-overflow:ellipsis;\n    hyphens:none}\n$0:after{\n    content:'.';\n    font-size:0;\n    visibility:hidden;\n    display:inline-block;\n    overflow:hidden;\n    height:0;\n    width:0}"},Fl:{css:"float:$"},Fw:{css:"font-weight:$",expand:{n:"normal"}},Fz:{css:"font-size:$"},H:{css:"height:$"},IbBox:{helper:!0,css:"\n$0{\n    display:inline-block;\n    *display:inline;\n    zoom:1;\n    vertical-align:top}"},L:{css:"left:$"},Lh:{css:"line-height:$"},LineClamp:{helper:!0,css:"\n$0{\n    -webkit-line-clamp:$1;\n    max-height:$2;\n    display:-webkit-box;\n    -webkit-box-orient:vertical;\n    overflow:hidden}\n@supports(display:-moz-box){$0{display:block}}\na$0{\n    display:inline-block;\n    display:-webkit-box;\n    *display:inline;\n    zoom:1}\na$0:after{\n    content:'.';\n    font-size:0;\n    visibility:hidden;\n    display:inline-block;\n    overflow:hidden;\n    height:0;\n    width:0}"},List:{css:"list-style-type:$",expand:{n:"none"}},M:{css:"margin:$"},Mah:{css:"max-height:$"},Maw:{css:"max-width:$"},Mb:{css:"margin-bottom:$"},Mih:{css:"min-height:$"},Miw:{css:"min-width:$"},Ml:{css:"margin-left:$"},Mr:{css:"margin-right:$"},Mt:{css:"margin-top:$"},Mx:{css:"\n    margin-left:$;\n    margin-right:$",expand:{a:"auto"}},My:{css:"\n    margin-top:$;\n    margin-bottom:$"},O:{css:"outline:$",expand:{n:"none"}},Op:{css:"opacity:$"},Ov:{css:"overflow:$",expand:{a:"auto",h:"hidden"}},Ovx:{css:"overflow-x:$",expand:{h:"hidden"}},Ovy:{css:"overflow-y:$",expand:{a:"auto"}},P:{css:"padding:$"},Pb:{css:"padding-bottom:$"},Pl:{css:"padding-left:$"},Pos:{css:"position:$",expand:{a:"absolute",r:"relative"}},Pr:{css:"padding-right:$"},Pt:{css:"padding-top:$"},Px:{css:"\n    padding-left:$;\n    padding-right:$"},Py:{css:"\n    padding-top:$;\n    padding-bottom:$"},R:{css:"right:$"},StretchedBox:{helper:!0,css:"\n$0{\n    position:absolute;\n    top:0;\n    right:0;\n    bottom:0;\n    left:0}"},T:{css:"top:$"},Ta:{css:"text-align:$",expand:{c:"center",r:"right"}},Td:{css:"text-decoration:$",expand:{n:"none",u:"underline"}},TranslateX:{css:"transform:translateX($)"},Trs:{css:"transition:$"},Us:{css:"user-select:$",expand:{n:"none"}},Va:{css:"vertical-align:$",expand:{m:"middle"}},W:{css:"width:$"},Z:{css:"z-index:$"}},a={f:"focus",h:"hover",a:"active",":b":":before",":a":":after",":ph":":placeholder"},l={"&":"amp","'":"#039",'"':"quot","<":"lt",">":"gt"},d="",c=/(&|'|"|<|>)/g;for(n=0,t=e.length;n<t;n++)if(r=e[n],n<=t-2){if(!(o=i[n])||o.constructor!==Object&&o.constructor!==Array)o=""+o;else try{o=JSON.stringify(o)}catch(e){o=""+o}"!"===r[r.length-1]?r=r.slice(0,-1):o=o.replace(c,function(e,i){return"&"+l[i]+";"}),d+=r+o}else d+=r;for(var u,f,p,h,g,m,w,b,S=/[a-z]/,x="",v=0,E=2,A="";-1!==u;)if(-1!==(u=d.indexOf(' s="',E))){for(f=void 0,p=u-2,h=!0;h;)-1===(f=d.lastIndexOf("<",p))||S.test(d[f+1])?h=!1:p=f-3;-1!==f&&-1!==(g=d.indexOf('">',u+' s="'.length))?(g+='">'.length,m=genID(),-1===(w=d.slice(f+2,u-1).indexOf(' class="'))?x+=d.slice(v,u+1)+'class="'+m+'">':(w+=f+2,b=d.indexOf('" ',w+' class="'.length),x+=d.slice(v,b)+" "+m+d.slice(b,u)+">"),v=g,A+=acss2css(m,s,a,d.slice(u+' s="'.length,g-'">'.length)),E=u+' s="'.length+'">'.length+2):E+=8}return d=x+d.slice(v),x=void 0,A?"<style>"+A+"</style>"+d:d}function acss2css(e,i,n,t){for(var r,o,s,a,l,d,c,u,f,p,h,g=/[a-z]/i,m=-1,w="";-1!==r;)if(-1!==(r=t.indexOf("(",m+2)))if(g.test(t[r-1]))if(-1===(o=t.lastIndexOf(" ",r-2))?o=0:o+=1,-1!==(s=t.indexOf(")",r+1))){if(s+=1,-1===(m=t.indexOf(" ",s))&&(m=t.length),!(l=i[a=t.slice(o,r)]))throw new Error("bad rule: "+a);c="!"===(d=t.slice(s,m))[0],u=d.slice(c?2:1),f=!l.helper&&(":"===d[0]||c&&":"===d[1])?n[u]:void 0,p=!l.helper&&("@"===d[0]||c&&"@"===d[1])?parseInt(u):void 0,h=t.slice(r+1,s-1),l.helper?w=helper2css(e,l,h)+w:w+=rule2css(e,l,c,f,p,h)}else m=r+1;else m=r+2;return w?"\n"+w:""}function helper2css(e,i,n){var t,r,o,s;for(n?(r=n.split(",")).unshift("."+e):r=["."+e],t=r.length;t--;)" "===(o=r[t])[0]&&(r[t]=o.slice(1));for(var a=1,l="",d=1;-1!==s;)-1!==(s=i.css.indexOf("$",a))&&(l+=i.css.slice(d,s),l+=r[i.css[s+1]]||void 0,d=s+2,a=s+3);return l+i.css.slice(d)+"\n"}function rule2css(e,i,n,t,r,o){for(var s,a,l,d,c="",u=0;-1!==l;)s=o.indexOf("[",u),a=o.indexOf("]",u),-1===(l=Math.min(s,a))&&(l=Math.max(s,a)),-1!==l&&(c+=o.slice(u,l)+("["===o[l]?"(":")"),u=l+1);o=c+o.slice(u),c="",u=0;for(var f,p,h=/#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})(\.\d+)/gi;d=h.exec(o);)c+=o.slice(u,d.index)+"rgba("+parseInt(d[1],16)+","+parseInt(d[2],16)+","+parseInt(d[3],16)+","+d[4]+")",u=d.index+d[0].length;for(p in o=c+o.slice(u),c=void 0,i.expand){for(c="",u=0,f=new RegExp("(?:^| )(?:"+p+")(?: |$)","g");d=f.exec(o);)d.index>0?(d.index-u>0&&(c+=o.slice(u,d.index)),c+=" ",u=d.index+1+p.length):u=p.length,c+=i.expand[p],f.lastIndex=u;o=c+o.slice(u)}f=void 0,c=void 0;var g="."+e;return t&&(g+=":"+t),g+="{"+i.css.replace(/\$/g,o||void 0)+"}",r>0&&(g="@media(min-width:"+r+"px){"+g+"}"),g+"\n"}function genID(){for(var e=5,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-0123456789",n=i[Math.floor(Math.random()*(i.length-12))];e--;)n+=i[Math.floor(Math.random()*i.length)];return n}function Schema(e){if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("api-obj");this.rules=e}function tid(){var e=new Date;return e.getFullYear()+"-"+(""+(e.getMonth()+1)).padStart(2,"0")+"-"+(""+e.getDate()).padStart(2,"0")+"-"+(""+e.getHours()).padStart(2,"0")+"-"+(""+e.getMinutes()).padStart(2,"0")}function uid(e){if(!Number.isInteger(e)||e<=0)throw new Error("api-len");for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-0123456789",n=i[Math.floor(Math.random()*(i.length-12))];--e;)n+=i[Math.floor(Math.random()*i.length)];return n}function userAgent(e){if(e&&"string"!=typeof e)throw new Error("api-str");function i(e,i){for(var n={},t=0,r=null;t<i.length&&!r;){for(var o=i[t],s=i[t+1],a=0,l=0;a<o.length&&!r;)if(r=o[a++].exec(e),Array.isArray(r)&&r.length>0)for(var d=0;d<s.length;d++){var c=r[++l],u=s[d];Array.isArray(u)&&u.length>0?2===u.length?f(u[1])?n[u[0]]=p(u[1](c)):n[u[0]]=p(u[1]):3===u.length?!f(u[1])||u[1].exec&&u[1].test?n[u[0]]=c?p(c.replace(u[1],u[2])):null:n[u[0]]=c?p(u[1](c,u[2])):null:4===u.length&&(n[u[0]]=c&&f(u[3])?p(u[3](c.replace(u[1],u[2]))):null):n[u]=p(c)||null}t+=2}return n;function f(e){return"function"==typeof e}function p(e){return"string"==typeof e&&e.replace(/\s+/g,"_").toUpperCase()||null}}function n(e,i){for(var n in i)if(Array.isArray(i[n])&&i[n].length>0){for(var t=0;t<i[n].length;t++)if(r(e,i[n][t]))return"?"===n?null:n}else if(r(e,i[n]))return"?"===n?null:n;return e;function r(e,i){return"string"==typeof e&&e.toLowerCase().indexOf(i.toLowerCase())>=0}}function t(e){return e.toLowerCase()}function r(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}e="string"==typeof e?e||"":window&&window.navigator&&window.navigator.userAgent||"";var o="name",s="version",a="vendor",l="model",d="type",c="MOBILE",u="TABLET",f={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{FIRE_PHONE:["SD","KF"]}},sprint:{model:{EVO_SHIFT_4G:"7373KT"},vendor:{HTC:"APA",SPRINT:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT_3.11":"NT3.51","NT_4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],VISTA:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w.-]+)/i,/(opera).+version\/([\w.]+)/i,/(opera)[\/\s]+([\w.]+)/i],[o,s],[/(opios)[\/\s]+([\w.]+)/i],[[o,"Opera Mini"],s],[/\s(opr)\/([\w.]+)/i],[[o,"Opera"],s],[/(kindle)\/([\w.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w.]*)/i,/(?:ms|\()(ie)\s([\w.]+)/i,/(rekonq)\/([\w.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w.-]+)/i],[o,s],[/(trident).+rv[:\s]([\w.]+).+like\sgecko/i],[[o,"IE"],s],[/(edge)\/((\d+)?[\w.]+)/i],[o,s],[/(yabrowser)\/([\w.]+)/i],[[o,"Yandex"],s],[/(puffin)\/([\w.]+)/i],[[o,"Puffin"],s],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w.]+)/i],[[o,"UCBrowser"],s],[/(comodo_dragon)\/([\w.]+)/i],[[o,/_/g," "],s],[/(micromessenger)\/([\w.]+)/i],[[o,"WeChat"],s],[/(QQ)\/([\d.]+)/i],[o,s],[/m?(qqbrowser)[\/\s]?([\w.]+)/i],[o,s],[/xiaomi\/miuibrowser\/([\w.]+)/i],[s,[o,"MIUI Browser"]],[/;fbav\/([\w.]+);/i],[s,[o,"Facebook"]],[/headlesschrome(?:\/([\w.]+)|\s)/i],[s,[o,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w.]+)/i],[[o,/(.+)/,"$1 WebView"],s],[/((?:oculus|samsung)browser)\/([\w.]+)/i],[[o,/(.+(?:g|us))(.+)/,"$1 $2"],s],[/android.+version\/([\w.]+)\s+(?:mobile\s?safari|safari)*/i],[s,[o,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w.]+)/i],[o,s],[/(dolfin)\/([\w.]+)/i],[[o,"Dolphin"],s],[/((?:android.+)crmo|crios)\/([\w.]+)/i],[[o,"Chrome"],s],[/(coast)\/([\w.]+)/i],[[o,"Opera Coast"],s],[/fxios\/([\w.-]+)/i],[s,[o,"Firefox"]],[/version\/([\w.]+).+?mobile\/\w+\s(safari)/i],[s,[o,"Mobile Safari"]],[/version\/([\w.]+).+?(mobile\s?safari|safari)/i],[s,o],[/webkit.+?(gsa)\/([\w.]+).+?(mobile\s?safari|safari)(\/[\w.]+)/i],[[o,"GSA"],s],[/webkit.+?(mobile\s?safari|safari)(\/[\w.]+)/i],[o,[s,n,f.browser.oldSafari.version]],[/(konqueror)\/([\w.]+)/i,/(webkit|khtml)\/([\w.]+)/i],[o,s],[/(navigator|netscape)\/([\w.-]+)/i],[[o,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w.+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w.-]+)/i,/(mozilla)\/([\w.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w.]+)/i,/(links)\s\(([\w.]+)/i,/(gobrowser)\/?([\w.]+)*/i,/(ice\s?browser)\/v?([\w._]+)/i,/(mosaic)[\/\s]([\w.]+)/i],[o,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",t]],[/((?:i[346]|x)86)[;)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",t]],[/(sun4\w)[;)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",t]]],device:[[/\((ipad|playbook);[\w\s);-]+(rim|apple)/i],[l,a,[d,u]],[/applecoremedia\/[\w.]+ \((ipad)/],[l,[a,"Apple"],[d,u]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[a,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[a,l,[d,u]],[/(kf[A-z]+)\sbuild\/[\w.]+.*silk\//i],[l,[a,"Amazon"],[d,u]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w.]+.*silk\//i],[[l,n,f.device.amazon.model],[a,"Amazon"],[d,c]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,a,[d,c]],[/\((ip[honed|\s\w*]+);/i],[l,[a,"Apple"],[d,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[a,l,[d,c]],[/\(bb10;\s(\w+)/i],[l,[a,"BlackBerry"],[d,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[l,[a,"Asus"],[d,u]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[a,"Sony"],[l,"Xperia Tablet"],[d,u]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[l,[a,"Sony"],[d,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[a,l,[d,"CONSOLE"]],[/android.+;\s(shield)\sbuild/i],[l,[a,"Nvidia"],[d,"CONSOLE"]],[/(playstation\s[34portablevi]+)/i],[l,[a,"Sony"],[d,"CONSOLE"]],[/(sprint\s(\w+))/i],[[a,n,f.device.sprint.vendor],[l,n,f.device.sprint.model],[d,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[a,l,[d,u]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[a,[l,/_/g," "],[d,c]],[/(nexus\s9)/i],[l,[a,"HTC"],[d,u]],[/d\/huawei([\w\s-]+)[;)]/i,/(nexus\s6p)/i],[l,[a,"Huawei"],[d,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[a,l,[d,c]],[/[\s(;](xbox(?:\sone)?)[\s);]/i],[l,[a,"Microsoft"],[d,"CONSOLE"]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[a,"Microsoft"],[d,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[a,"Motorola"],[d,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[a,"Motorola"],[d,u]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,r],[l,r],[d,"SMART_TV"]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[a,"Samsung"],[d,"SMART_TV"]],[/\(dtv[);].+(aquos)/i],[l,[a,"Sharp"],[d,"SMART_TV"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[a,"Samsung"],l,[d,u]],[/smart-tv.+(samsung)/i],[a,[d,"SMART_TV"],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[a,"Samsung"],l,[d,c]],[/sie-(\w+)*/i],[l,[a,"Siemens"],[d,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[a,"Nokia"],l,[d,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[a,"Acer"],[d,u]],[/android.+([vl]k-?\d{3})\s+build/i],[l,[a,"LG"],[d,u]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[a,"LG"],l,[d,u]],[/(lg) netcast\.tv/i],[a,l,[d,"SMART_TV"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(-?[\d\w]+)\s+build/i],[l,[a,"LG"],[d,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[a,"Lenovo"],[d,u]],[/linux;.+((jolla));/i],[a,l,[d,c]],[/((pebble))app\/[\d.]+\s/i],[a,l,[d,"WEARABLE"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[a,l,[d,c]],[/crkey/i],[[l,"Chromecast"],[a,"Google"]],[/android.+;\s(glass)\s\d/i],[l,[a,"Google"],[d,"WEARABLE"]],[/android.+;\s(pixel c)\s/i],[l,[a,"Google"],[d,u]],[/android.+;\s(pixel xl|pixel)\s/i],[l,[a,"Google"],[d,c]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[l,/_/g," "],[a,"Xiaomi"],[d,c]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[l,/_/g," "],[a,"Xiaomi"],[d,u]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[l,[a,"Meizu"],[d,u]],[/android.+a000(1)\s+build/i],[l,[a,"OnePlus"],[d,c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[l,[a,"RCA"],[d,u]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[l,[a,"Dell"],[d,u]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[l,[a,"Verizon"],[d,u]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[a,"Barnes & Noble"],l,[d,u]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[l,[a,"NuVision"],[d,u]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[a,"ZTE"],l,[d,u]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[l,[a,"Swiss"],[d,c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[l,[a,"Swiss"],[d,u]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[l,[a,"Zeki"],[d,u]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[-\s]+Touch\s+|DT)(.+)\s+build/i],[[a,"Dragon Touch"],l,[d,u]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[l,[a,"Insignia"],[d,u]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[l,[a,"NextBook"],[d,u]],[/android.+[;\/]\s*(Xtreme_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[a,"Voice"],l,[d,c]],[/android.+[;\/]\s*(LVTEL-?)?(V1[12])\s+build/i],[[a,"LvTel"],l,[d,c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[l,[a,"Envizen"],[d,u]],[/android.+[;\/]\s*(Le[\s-]+Pan)[\s-]+(.*\b)\s+build/i],[a,l,[d,u]],[/android.+[;\/]\s*(Trio[\s-]*.*)\s+build/i],[l,[a,"MachSpeed"],[d,u]],[/android.+[;\/]\s*(Trinity)[-\s]*(T\d{3})\s+build/i],[a,l,[d,u]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[l,[a,"Rotor"],[d,u]],[/android.+(KS(.+))\s+build/i],[l,[a,"Amazon"],[d,u]],[/android.+(Gigaset)[\s-]+(Q.+)\s+build/i],[a,l,[d,u]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,t],a,l],[/(android.+)[;\/].+build/i],[l,[a,"Generic"]]],engine:[[/windows.+\sedge\/([\w.]+)/i],[s,[o,"EdgeHTML"]],[/(presto)\/([\w.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w.]+)/i,/(icab)[\/\s]([23]\.[\d.]+)/i],[o,s],[/rv:([\w.]+).*(gecko)/i],[s,o]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[o,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d.\s]+\w)/i],[o,[s,n,f.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d.]+)/i],[[o,"Windows"],[s,n,f.os.windows.version]],[/\((bb)(10);/i],[[o,"BlackBerry"],s],[/(blackberry)\w*\/?([\w.]+)*/i,/(tizen)[\/\s]([\w.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w.]+)*/i,/linux;.+(sailfish);/i],[o,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w.]+)*/i],[[o,"Symbian"],s],[/\((series40);/i],[o],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[o,"Firefox OS"],s],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w.-]+)*/i,/(hurd|linux)\s?([\w.]+)*/i,/(gnu)\s?([\w.]+)*/i],[o,s],[/(cros)\s[\w]+\s([\w.]+\w)/i],[[o,"Chromium OS"],s],[/(sunos)\s?([\w.]+\d)*/i],[[o,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w.]+)*/i],[o,s],[/(haiku)\s(\w+)/i],[o,s],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[s,/_/g,"."],[o,"iOS"]],[/(mac\sos\sx)\s?([\w\s.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[o,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w.]+)*/i],[o,s]]},h=i(e,p.browser),g=i(e,p.engine),m=i(e,p.os),w=i(e,p.device);return{ua:e,browserName:h.name||null,browserVersion:h.version||null,engineName:g.name||null,engineVersion:g.version||null,osName:m.name||null,osVersion:m.version||null,deviceVendor:w.vendor||null,deviceModel:w.model||null,deviceType:w.type||null,cpu:i(e,p.cpu).architecture||null}}world.Cor||(world.Cor={}),world.Cor.extension=extension,world.Cor||(world.Cor={}),world.Cor.html=html,Schema.prototype={prepareValidate:function(e){if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("api-o");var i={};for(var n in this.rules)if(this.rules.hasOwnProperty(n)){var t=this.rules[n],r=e[n];"function"==typeof t.prepare&&(r=t.prepare(r,e),e[n]=r),t.validate&&!t.validate(r,e)&&(i[n]=!0)}return i},clean:function(e){if("[object Object]"!==Object.prototype.toString.call(e))throw new Error("api-o");var i={};for(var n in this.rules)this.rules.hasOwnProperty(n)&&(i[n]=e[n]);return i}},world.Cor||(world.Cor={}),world.Cor.Schema=Schema,world.Cor||(world.Cor={}),world.Cor.tid=tid,world.Cor||(world.Cor={}),world.Cor.uid=uid,world.Cor||(world.Cor={}),world.Cor.userAgent=userAgent,world.log=function(){for(var e="",i=0;i<arguments.length;i++){var n=arguments[i];n&&("object"==typeof n||Array.isArray(n))?(Array.isArray(n)?e+="Array("+n.length+"): \n":"object"==typeof n&&(e+="Object: \n"),e+=JSON.stringify(n,null,"    "),e+="\n"):e+=(i>0?" ":"")+n}console.log(e)};var $ext2ct={".txt":"text/plain",".md":"text/markdown",".html":"text/html",".xml":"application/xml",".json":"application/json",".woff":"font/woff",".woff2":"font/woff2",".otf":"font/otf",".ttf":"font/ttf",".eot":"application/vnd.ms-fontobject",".js":"application/javascript",".css":"text/css",".jpg":"image/jpeg",".png":"image/png",".gif":"image/gif",".svg":"image/svg+xml",".ico":"image/x-icon",".mp4":"video/mp4",".mp3":"audio/mp3",".swf":"application/x-shockwave-flash",".pdf":"application/pdf",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".doc":"application/msword",".xls":"application/vnd.ms-excel",".zip":"application/zip",".rar":"application/x-rar-compressed"};function MultipartParser(){this.boundary=null,this.boundaryChars=null,this.lookbehind=null,this.index=null,this.flags=0,this.S={PARSER_UNINITIALIZED:0,START:1,START_BOUNDARY:2,HEADER_FIELD_START:3,HEADER_FIELD:4,HEADER_VALUE_START:5,HEADER_VALUE:6,HEADER_VALUE_ALMOST_DONE:7,HEADERS_ALMOST_DONE:8,PART_DATA_START:9,PART_DATA:10,PART_END:11,END:12},this.state=this.S.PARSER_UNINITIALIZED,this.F={PART_BOUNDARY:1,LAST_BOUNDARY:2}}MultipartParser.stateToString=function(e){for(var i in this.S)if(this.S.hasOwnProperty(i)&&this.S[i]===e)return i},MultipartParser.prototype.initWithBoundary=function(e){this.boundary=Buffer.alloc(e.length+4),this.boundary.write("\r\n--",0),this.boundary.write(e,4),this.lookbehind=Buffer.alloc(this.boundary.length+8),this.state=this.S.START,this.boundaryChars={};for(var i=0;i<this.boundary.length;i++)this.boundaryChars[this.boundary[i]]=!0},MultipartParser.prototype.write=function(e){var i,n,t=this,r=0,o=e.length,s=this.index,a=this.index,l=this.state,d=this.flags,c=this.lookbehind,u=this.boundary,f=this.boundaryChars,p=this.boundary.length,h=p-1,g=e.length;function m(e){t[e+"Mark"]=r}function w(e,i,n,r){if(void 0===n||n!==r){var o="on"+e.substr(0,1).toUpperCase()+e.substr(1),s=t[o];return s&&s(i,n,r)}}function b(i,n){var o=i+"Mark";t.hasOwnProperty(o)&&(n?(w(i,e,t[o],r),delete t[o]):(w(i,e,t[o],e.length),t[o]=0))}for(r=0;r<o;r++)switch(i=e[r],l){case this.S.PARSER_UNINITIALIZED:return r;case this.S.START:a=0,l=this.S.START_BOUNDARY;case this.S.START_BOUNDARY:if(a==u.length-2){if(45==i)d|=this.F.LAST_BOUNDARY;else if(13!=i)return r;a++;break}if(a-1==u.length-2){if(d&this.F.LAST_BOUNDARY&&45==i)w("end"),l=this.S.END,d=0;else{if(d&this.F.LAST_BOUNDARY||10!=i)return r;a=0,w("partBegin"),l=this.S.HEADER_FIELD_START}break}i!=u[a+2]&&(a=-2),i==u[a+2]&&a++;break;case this.S.HEADER_FIELD_START:l=this.S.HEADER_FIELD,m("headerField"),a=0;case this.S.HEADER_FIELD:if(13==i){delete t["headerField"+"Mark"],l=this.S.HEADERS_ALMOST_DONE;break}if(a++,45==i)break;if(58==i){if(1==a)return r;b("headerField",!0),l=this.S.HEADER_VALUE_START;break}if((n=32|i)<97||n>122)return r;break;case this.S.HEADER_VALUE_START:if(32==i)break;m("headerValue"),l=this.S.HEADER_VALUE;case this.S.HEADER_VALUE:13==i&&(b("headerValue",!0),w("headerEnd"),l=this.S.HEADER_VALUE_ALMOST_DONE);break;case this.S.HEADER_VALUE_ALMOST_DONE:if(10!=i)return r;l=this.S.HEADER_FIELD_START;break;case this.S.HEADERS_ALMOST_DONE:if(10!=i)return r;w("headersEnd"),l=this.S.PART_DATA_START;break;case this.S.PART_DATA_START:l=this.S.PART_DATA,m("partData");case this.S.PART_DATA:if(s=a,0===a){for(r+=h;r<g&&!f.hasOwnProperty(e[r]);)r+=p;i=e[r-=h]}if(a<u.length)u[a]==i?(0===a&&b("partData",!0),a++):a=0;else if(a==u.length)a++,13==i?d|=this.F.PART_BOUNDARY:45==i?d|=this.F.LAST_BOUNDARY:a=0;else if(a-1==u.length)if(d&this.F.PART_BOUNDARY){if(a=0,10==i){d&=~this.F.PART_BOUNDARY,w("partEnd"),w("partBegin"),l=this.S.HEADER_FIELD_START;break}}else d&this.F.LAST_BOUNDARY&&45==i?(w("partEnd"),w("end"),l=this.S.END,d=0):a=0;a>0?c[a-1]=i:s>0&&(w("partData",c,0,s),s=0,m("partData"),r--);break;case this.S.END:break;default:return r}return b("headerField"),b("headerValue"),b("partData"),this.index=a,this.state=l,this.flags=d,o},MultipartParser.prototype.end=function(){var e=function(e,i){var n=e["on"+i.substr(0,1).toUpperCase()+i.substr(1)];n&&n()};if(this.state==this.S.HEADER_FIELD_START&&0===this.index||this.state==this.S.PART_DATA&&this.index==this.boundary.length)e(this,"partEnd"),e(this,"end");else if(this.state!=this.S.END)return new Error("MultipartParser.end(): stream ended unexpectedly: "+this.explain())},MultipartParser.prototype.explain=function(){return"state = "+MultipartParser.stateToString(this.state)},global.$router||(global.$router={matchers:{},routes:{}});var EXP_ONLY_SLASHES=/^\/{2,}$/,RES_FN_CALLS_BLACKLIST=["addTrailers","removeHeader","setHeader","setTimeout","write","writeContinue","writeHead","writeProcessing"],MAX_URL_LEN=2e3,MAX_URL_QUERY_LEN=1e3,FILE_INDEX=0,CONCAT=[null,null];function handleRequest(e,i,n){prepareRoute(e,i,n,function(t){monitorResponseChanges(e,i,n,t),prepareRequest(e,i,n,t,function(n,r,o){processMiddlewares(t,e,i,n,r,o,function(s){t.fn.call(s,e,i,n,r,o)})})})}function prepareRoute(e,i,n,t){var r=findRoute(e);if(r)return i.statusCode=200,t(r);if("GET"!==e.method)return n(e,i,404,"{}");var o=toPathname(e.url);if("/"===o[o.length-1])return n(e,i,404,"{}");var s=$path.extname(o);if(!s||!$ext2ct.hasOwnProperty(s))return n(e,i,404,"{}");var a=process.cwd()+$path.sep+"tmp"+$path.sep+"public",l=$path.normalize(a+o);if(0!==l.indexOf(a+$path.sep))return n(e,i,404,"{}");$fs.stat(l,function(t){if(t)return"ENOENT"===t.code?n(e,i,404,"{}"):n(e,i,500,"{}",t);serveStaticFile(i,l,s)})}function findRoute(e){var i=toPathname(e.url);if(EXP_ONLY_SLASHES.test(i))return null;var n="/"!==i&&"/"===i[i.length-1]?i.slice(0,-1):i,t=null;for(var r in global.$router.matchers){global.$router.matchers[r].test(n)&&(t=r)}if(!t)return null;var o="data"===getContentType4L(e);return global.$router.routes[t+"?"+e.method+"?"+(o?"mfd":"def")]||null}function toPathname(e){return e.split(/\?+/)[0]||"/"}function getContentType4L(e){var i=e.headers["content-type"]||"",n=i.lastIndexOf(";");return n>=0&&(i=i.slice(0,n)),i.slice(-4)}function serveStaticFile(e,i,n){var t=$fs.createReadStream(i);$Stream.finished(e,function(){t.destroy()}),e.writeHead(200,{"Content-Type":$ext2ct[n]}),t.pipe(e)}function monitorResponseChanges(e,i,n,t){for(var r=!1,o=0,s=RES_FN_CALLS_BLACKLIST.length;o<s;o++){var a=RES_FN_CALLS_BLACKLIST[o];l(a,i[a])}function l(e,n){i[e]=function(){r||n.apply(i,arguments)}}i.setTimeout(t.maxTimeout,function(){});var d,c=setTimeout(function(){n(e,i,408,"{}")},t.maxTimeout);d=i.end,i.end=function(){r||(r=!0,clearTimeout(c),d.apply(i,arguments))}}function prepareRequest(e,i,n,t,r){var o=$url.parse(e.url);if(e.url.length>=MAX_URL_LEN||(o.query||"").length>=MAX_URL_QUERY_LEN)return n(e,i,414,"{}");var s=[],a=o.pathname||"/";if("/"!==a){var l=(a="/"===a[a.length-1]?a.slice(0,-1):a).match(t.exp);l&&l.length>1&&(s=l.slice(1))}var d={};o.query&&"string"==typeof o.query&&(d=$querystring.parse(o.query)||{}),e.headers.cookie=e.headers.cookie?prepareRequestCookies(e):{},"json"===(a=getContentType4L(e))?prepareRequestJSON(e,i,n,t,function(e){r(s,d,e)}):"data"===a?prepareRequestMULTIPART(e,i,n,t,function(e){r(s,d,e)}):void 0===e.headers["content-type"]?r(s,d,{}):n(e,i,400,"{}")}function prepareRequestCookies(e){var i={},n=e.headers.cookie;return function e(t){var r=n.indexOf("=",t+1);if(-1===r)return i;var o=n.indexOf(";",r+1);-1===o&&(o=n.length);var s=n.slice(t,r).trim(),a=n.slice(r+1,o);s&&a&&(i[s]=decodeURI(a)),e(++o)}(0),i}function prepareRequestJSON(e,i,n,t,r){if(-1===["POST","PUT"].indexOf(e.method))return n(e,i,400,"{}");var o=!1;e.once("close",function(){o||n(e,i,500,"{}",new Error("unexpectedClosing"))});var s=0,a=[];e.on("data",function(e){(s+=e.length)<t.maxSize&&a.push(e)}),e.once("end",function(){if(o=!0,s>=t.maxSize)return a=void 0,n(e,i,413,"{}");try{var l=JSON.parse(Buffer.concat(a).toString("utf8"));if("[object Object]"!==Object.prototype.toString.call(l))return n(e,i,400,"{}");r(l)}catch(t){n(e,i,400,"{}")}})}function prepareRequestMULTIPART(e,i,n,t,r){var o=e.headers["content-type"].split(";")[1];if(!o)return n(e,i,400,"{}");if(!(o=o.slice(o.indexOf("=",2)+1))||-1===["POST","PUT"].indexOf(e.method))return n(e,i,400,"{}");var s=!1,a=[],l=[];e.once("close",function(){s||(l=void 0,unlinkAll(a),n(e,i,500,"{}",new Error("unexpectedClosing")))});var d,c,u,f,p,h=new MultipartParser,g=0,m=t.maxSize,w=process.cwd()+$path.sep+"tmp"+$path.sep+"uploadedfile-",b=0;h.initWithBoundary(o),h.onPartBegin=function(){g>=m||((d=new FormDataEntry).value=Buffer.alloc(0),c=0,u=!1,f=!0)},h.onHeaderValue=function(e,i,n){if(!(g>=m)){var t,r=e.slice(i,n).toString("utf8");if(1===c)return t=r.indexOf(";"),d.contentType=-1===t?r.trim():r.slice(0,t).trim(),void(c=2);if(!(c>0)){if(-1===r.indexOf("form-data; "))return m=-1,void(!u&&p&&p.destroy());r=parseMultipartHeader(r),c=1,d.name=r.name,(u=!!r.filename)?(d.filename=r.filename,-1===(t=d.filename.lastIndexOf("\\"))&&(t=d.filename.lastIndexOf("/")),t>=0&&(d.filename=d.filename.slice(t+1)),d.path=w+FILE_INDEX+++".bin"):p&&p.destroy()}}},h.onPartData=function(e,i,n){if(!(g>=m)){var t=e.slice(i,n);if(!((g+=t.length)>=m))return u?void(f?(f&&(f=!1),b++,p=$fs.createWriteStream(d.path),a.push(d.path),p.once("close",function(){b--}),p.once("error",function(e){console.log(e),b--}),p.write(t)):p.write(t)):(f&&(f=!1),CONCAT[0]=d.value,CONCAT[1]=t,void(d.value=Buffer.concat(CONCAT)))}},h.onPartEnd=function(){p&&(p.end(),p=null),g>=m||(d.value=u?void 0:d.value.toString("utf8"),l.push(d))},e.on("data",function(e){h.write(e)}),e.once("end",function(){s=!0,function t(){if(b>0)setImmediate(function(){t()});else{if(g>=m)return l=void 0,unlinkAll(a),n(e,i,431,"{}");r(l)}}()})}function unlinkAll(e){!function i(n){var t=e[n];t&&$fs.unlink(t,function(){setImmediate(function(){i(++n)})})}(0)}function parseMultipartHeader(e){var i="",n=' name="',t=n.length,r=e.indexOf(n);r>=0&&(i=e.slice(r+t,e.indexOf('"',r+t)));var o=i||"undefined_"+Math.floor(1e5*Math.random());return i="",t=(n=' filename="').length,(r=e.indexOf(n))>=0&&(i=e.slice(r+t,e.indexOf('"',r+t))),{name:o,filename:i||null}}function FormDataEntry(){this.name=void 0,this.filename=void 0,this.contentType=void 0,this.path=void 0,this.value=void 0}function processMiddlewares(e,i,n,t,r,o,s){var a={};!function l(d){var c=e.middlewares[d];if(!c)return s(a);c.call(a,i,n,t,r,o,function(){setImmediate(function(){l(++d)})})}(0)}global.Cor||(global.Cor={}),global.Cor.handleRequest=handleRequest;var CONCAT$1=[null,null],EXP_FLAGS=/^-m\s(GET|PUT|POST|DELETE)(?:(?=\s-flw)(?:\s-(flw))|)$/;function request(e,i,n,t,r){var o,s,a,l;if(i=function(){var e=i.match(EXP_FLAGS);if(!e)throw new Error('Request "flags" must follow "-m <Value> -flw?"');return{method:e[1],follow:!!e[2]}}(),l=n,("[object Object]"===Object.prototype.toString.call(l)||Array.isArray(l)||"string"==typeof l||Buffer.isBuffer(l))&&"[object Object]"===Object.prototype.toString.call(t)&&"function"==typeof r)o=n,s=t,a=r;else if("[object Object]"===Object.prototype.toString.call(n)&&"function"==typeof t)s=n,a=t;else{if("function"!=typeof n)throw new Error("Invalid arguments at tail.");a=n}if(s)for(var d in s)s.hasOwnProperty(d)&&(s[d.toLowerCase()]=s[d]);if(void 0!==o){var c=s["content-type"];if(!c)throw new Error("Missing content type.");if("[object Object]"===Object.prototype.toString.call(o)||Array.isArray(o)){if("application/json"!==c)throw new Error("Invalid content type.");o=JSON.stringify(o)}}!function e(n){var t=$url.parse(n);t.method=i.method,t.headers=s;var r=("https:"===t.protocol?$https:$http).request(t,function(n){if(n.statusCode>=300&&n.statusCode<400&&n.headers.location&&i.follow)setImmediate(function(){e(n.headers.location)});else{n.once("error",function(e){a(e)});var t=Buffer.alloc(0);n.on("data",function(e){CONCAT$1[0]=t,CONCAT$1[1]=e,t=Buffer.concat(CONCAT$1)}),n.once("end",function(){t=function(e){try{return JSON.parse(e)}catch(i){return e}}(t.toString("utf8"));var e=n.statusCode;if(200!==e)return a(new Error(""+e),t);a(null,t)})}});r.once("error",function(e){a(e)}),o&&(r.setHeader("content-length",o.length),r.write(o)),r.end()}(e)}function route(){for(var e,i,n=[],t=0,r=arguments.length;t<r;t++)0===t?e=arguments[0]:t===r-1?i=arguments[r-1]:n.push(arguments[t]);if(!e||"string"!=typeof e)throw new Error("api-matcher");if(!i||"function"!=typeof i)throw new Error("api-fn");var o=function(){var t;if(!(t=e.match(/^([\w-\/[\]@]+)\s+-m\s(GET|PUT|POST|DELETE)\s+-s\s(\d+)(GB|MB|kB)\s+-t\s(\d+)s(?:(?=\s+-mfd)(?:\s+-(mfd))|)$/)))throw new Error('Route "matcher" must follow "<Url> -m <Value> -s <Value><Unit> -t <Value><Unit> -mfd?" syntax.');var r=t[1];return{matcher:r="/"!==r&&"/"===r[r.length-1]?r.slice(0,-1):r,exp:new RegExp("^"+r.replace(/\[(\w+)\]/g,"([-\\w.@]+)")+"$"),middlewares:n,fn:i,method:t[2],maxSize:s(t[3],t[4]),maxTimeout:a(t[5]),mfd:!!t[6]}}();function s(e,i){if(e=parseInt(e),isNaN(e)||e<0)throw new Error("invalidMaxSize");return e*Math.pow(10,{kB:3,MB:6,GB:9}[i])}function a(e){if(e=parseInt(e),isNaN(e)||e<=0)throw new Error("invalidMaxTimeout");return 1e3*e}global.$router.matchers[o.matcher]=o.exp,global.$router.routes[o.matcher+"?"+o.method+"?"+(o.mfd?"mfd":"def")]=o}global.Cor||(global.Cor={}),global.Cor.request=request,global.$router||(global.$router={matchers:{},routes:{}}),global.Cor||(global.Cor={}),global.Cor.route=route;var SKIP,BLOCK_START_IDX,BLOCK_END_IDX,EXP_MATCH_REGEX=/(\/[^\n].*?\/)[gi\n;,)\]\s]/g,EXP_MATCH_SINGLE_QUOTE_STRING=/('.*?')[\n;,)\] ]/g,EXP_NOTOK_SINGLE_QUOTE_STRING=/"\s*\+/,EXP_MATCH_DOUBLE_QUOTE_STRING=/(".*?")[\n;,)\] ]/g,EXP_NOTOK_DOUBLE_QUOTE_STRING=/'\s*\+/,EXP_OBFUSCATOR_SEPARATORS=/[\s(){}[\]|<>=,:;!%^&*|?~\/'"+-]+/g,EXP_WHITESPACES=/\s+/g,PROCESSED_BLOCKS={},OBFUSCATED={};function compileSrc(e){SKIP=getSkipRanges(e),e=removeBlockComments(e),SKIP=null,SKIP=getSkipRanges(e),e=removeSingleLineComments(e),SKIP=null,SKIP=getSkipRanges(e="{"+e+"}");for(var i,n,t,r=!1,o=0;!r;)-1!==(o=findSafeIndexOf(e,"}",o))?((i=findClosestUnprocessedOpenBracketIndex(e,o))>=0&&(n=e.slice(i,o+1),BLOCK_START_IDX=i,BLOCK_END_IDX=o+1,t=n.length,n=getObfuscatedBlock(n),e=e.slice(0,i)+n+e.slice(o+1),o+=n.length-t),o++):r=!0;return(e=compressRawScript(e)).slice(1,e.length-1)}function getSkipRanges(e){var i=getRegexRanges(e);return i=(i=i.concat(getSingleQuoteStringRanges(e))).concat(getDoubleQuoteStringRanges(e))}function getRegexRanges(e){for(var i,n,t=[];i=EXP_MATCH_REGEX.exec(e);)0!==i[1].indexOf("//")&&0!==i[1].indexOf("/*")?n&&0===n.indexOf("/*")&&i[1].lastIndexOf("*/")===i[1].length-2?n=i[1]:(t.push(composeRange(i.index,i.index+i[1].length)),n=i[1]):n=i[1];return t}function composeRange(e,i){return{fromIndex:e,toIndex:i}}function getSingleQuoteStringRanges(e){for(var i,n=[];i=EXP_MATCH_SINGLE_QUOTE_STRING.exec(e);)EXP_NOTOK_SINGLE_QUOTE_STRING.test(e.slice(i.index,i.index+i[1].length))||2!==i[1].length&&n.push(composeRange(i.index,i.index+i[1].length));return n}function getDoubleQuoteStringRanges(e){for(var i,n=[];i=EXP_MATCH_DOUBLE_QUOTE_STRING.exec(e);)EXP_NOTOK_DOUBLE_QUOTE_STRING.test(e.slice(i.index,i.index+i[1].length))||2!==i[1].length&&n.push(composeRange(i.index,i.index+i[1].length));return n}function removeBlockComments(e){for(var i,n=0,t="";-1!==i;){if(-1!==(i=e.indexOf("/*",n)))findSkipRange(SKIP,i)?(t+=e.slice(n,i+2),n=i+2):(t+=e.slice(n,i),-1!==(n=e.indexOf("*/",i+2))?n+=2:i=-1);else t+=e.slice(n)}return t}function findSkipRange(e,i){for(var n,t=0,r=e.length;t<r;t++)if((n=e[t]).fromIndex<=i&&i<n.toIndex)return n;return null}function removeSingleLineComments(e){for(var i,n=0,t="";-1!==i;){if(-1!==(i=e.indexOf("//",n)))findSkipRange(SKIP,i)?(t+=e.slice(n,i+2),n=i+2):(t+=e.slice(n,i),-1!==(n=e.indexOf("\n",i+2))||(i=-1));else t+=e.slice(n)}return t}function findSafeIndexOf(e,i,n){for(var t=n,r=!1;!r;)if(-1!==(t=e.indexOf(i,t))){var o=findSkipRange(SKIP,t);o?t=o.toIndex:r=!0}else r=!0;return t}function findClosestUnprocessedOpenBracketIndex(e,i){for(var n=i,t=!1;!t;)-1!==(n=findSafeLastIndexOf(e,"{",n-1))?PROCESSED_BLOCKS[n]||(PROCESSED_BLOCKS[n]=!0,t=!0):t=!0;return n}function findSafeLastIndexOf(e,i,n){for(var t=n,r=!1;!r;)if(-1!==(t=e.lastIndexOf(i,t))){var o=findSkipRange(SKIP,t);o?t=o.fromIndex:r=!0}else r=!0;return t}function getObfuscatedBlock(e){var i=e;return updateProcessedBlocks(e=BLOCK_obfuscateFunctions(e,getBlockChunks(e))),updateSkipRanges(i,e),e}function getBlockChunks(e){for(var i,n=0,t=[];i=EXP_OBFUSCATOR_SEPARATORS.exec(e);)t.push(composeMatch(e.slice(n,i.index),n)),t.push(composeMatch(i[0],i.index)),n=i.index+i[0].length;return t}function composeMatch(e,i){return{0:e,index:i}}function BLOCK_obfuscateFunctions(e,i){for(var n,t,r=getSkipRanges(e),o=i.length,s={};o--;)o>=3&&"("===i[o][0].trim()[0]&&" "===i[o-2][0]&&"function"===i[o-3][0].trim()&&BLOCK_tryRegisterDeclaration(i[o-1],r,s,!1),o>=2&&"var"===i[o-2][0]&&" "===i[o-1][0]&&BLOCK_tryRegisterDeclaration(i[o],r,s,!0);if(0===Object.keys(s).length)return e;o=i.length;for(var a=[];o>1;)if(t=s[(n=i[--o-1])[0]]||s[n[0].split(".")[0]],":"!==i[o][0].trim()[0]&&t){if(n.index===t.index)continue;if(t.isVar&&n.index<=t.index)continue;if(findSkipRange(r,n.index))continue;n[0]=n[0].slice(0,t[0].length),n.hash=t.hash,a.push(n)}return BLOCK_replaceNames(e,s,a)}function BLOCK_tryRegisterDeclaration(e,i,n,t){if(!OBFUSCATED[e[0]]&&!findSkipRange(i,e.index)){var r=getHash();OBFUSCATED[r]=!0,e.hash=r,t&&(e.isVar=!0),n[e[0]]=e}}function getHash(){for(var e=5,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_$0123456789",n=i[Math.floor(Math.random()*(i.length-10))];e--;)n+=i[Math.floor(Math.random()*i.length)];return n}function BLOCK_replaceNames(e,i,n){var t,r=[];for(var o in i)i.hasOwnProperty(o)&&r.push(i[o]);(r=n.concat(r)).sort(function(e,i){return e.index-i.index});for(var s=0,a="",l=0,d=r.length;l<d;l++)t=r[l],a+=e.slice(s,t.index)+t.hash,s=t.index+t[0].length;return a+e.slice(s)}function updateProcessedBlocks(e){for(var i in PROCESSED_BLOCKS)PROCESSED_BLOCKS.hasOwnProperty(i)&&i>BLOCK_START_IDX&&i<BLOCK_END_IDX&&(PROCESSED_BLOCKS[i]=!1);for(var n=0;-1!==n;)n++,-1!==(n=e.indexOf("{",n))&&(PROCESSED_BLOCKS[BLOCK_START_IDX+n]=!0)}function updateSkipRanges(e,i){for(var n,t,r=SKIP.length,o=[];r--;)((n=SKIP[r]).toIndex<=BLOCK_START_IDX||n.fromIndex>=BLOCK_END_IDX)&&o.push(n);for(r=(SKIP=o).length;r--;)(n=SKIP[r]).fromIndex>=BLOCK_END_IDX&&(t=i.length-e.length,n.fromIndex+=t,n.toIndex+=t);var s=getSkipRanges(i);for(r=s.length;r--;)(n=s[r]).fromIndex+=BLOCK_START_IDX,n.toIndex+=BLOCK_START_IDX,SKIP.push(n)}function compressRawScript(e){for(var i,n=0,t="";i=EXP_OBFUSCATOR_SEPARATORS.exec(e);)n<i.index&&(t+=e.slice(n,i.index)),t+=" "===i[0]?" ":compressChunk(i),n=i.index+i[0].length;return e.length===n?t:t+e.slice(n)}function compressChunk(e){for(var i,n=0,t="";i=EXP_WHITESPACES.exec(e[0]);)n<i.index&&(t+=e[0].slice(n,i.index)),findSkipRange(SKIP,e.index+i.index)&&(t+=i[0]),n=i.index+i[0].length;return e[0].length===n?t:t+e[0].slice(n)}global.Cor||(global.Cor={}),global.Cor.compileSrc=compileSrc,exports.handleRequest=handleRequest,exports.request=request,exports.route=route,exports.compileSrc=compileSrc,exports.clone=clone,exports.extend=extend,exports.all=all,exports.extension=extension,exports.Schema=Schema,exports.tid=tid,exports.uid=uid,exports.userAgent=userAgent;